
<!doctype html>
<html>
  <head>
    <link href="../images/favicon-5d3e445d.ico" rel="icon" type="image/ico" />
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta
            name="FameEX OpenAPI Docs"
            content="Documentation for the FameEX OpenAPI"
        >
    <title>FameEX OpenAPI文档</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="../stylesheets/screen-a5f82e95.css" rel="stylesheet" media="screen" />
    <link href="../stylesheets/print-e3a9e2c4.css" rel="stylesheet" media="print" />
      <script src="../javascripts/all-8e135379.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>
  <header class="fixed-header">
    <span class="header-logo-wrapper">
      <img src="../images/logo-068727b5.png" alt="" />
    </span>
    <span class="header-button-wrapper">
      <a href="/docs-v1/en/index.html" class="header-button">English</a>
    </span>
  </header>      
  <body class="zh zh_index" data-languages="[&quot;http&quot;,&quot;shell&quot;,&quot;java&quot;,&quot;go&quot;,&quot;python&quot;,&quot;php&quot;,&quot;javascript--node&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
        <div class="lang-selector">
              <a href="#" data-language-name="http">HTTP</a>
              <a href="#" data-language-name="shell">SHELL</a>
              <a href="#" data-language-name="java">JAVA</a>
              <a href="#" data-language-name="go">GO</a>
              <a href="#" data-language-name="python">PYTHON</a>
              <a href="#" data-language-name="php">PHP</a>
              <a href="#" data-language-name="javascript--node">Node.js</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#11affa2be2" class="toc-h1 toc-link" data-title="文档说明">文档说明</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#api" class="toc-h2 toc-link" data-title="API基本信息">API基本信息</a>
                  </li>
                  <li>
                    <a href="#29d525527a" class="toc-h2 toc-link" data-title="文档入参规范">文档入参规范</a>
                  </li>
                  <li>
                    <a href="#6bb2d7a966" class="toc-h2 toc-link" data-title="接口通用信息">接口通用信息</a>
                  </li>
                  <li>
                    <a href="#fd081abd37" class="toc-h2 toc-link" data-title="接口是否需要签名验证">接口是否需要签名验证</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#a573a19f9c" class="toc-h3 toc-link" data-title="接口鉴权类型">接口鉴权类型</a>
                          </li>
                          <li>
                            <a href="#trade-user_data" class="toc-h3 toc-link" data-title="需要签名的接口 (TRADE 与 USER_DATA)">需要签名的接口 (TRADE 与 USER_DATA)</a>
                          </li>
                          <li>
                            <a href="#b5ed0cdb50" class="toc-h3 toc-link" data-title="接口示例">接口示例</a>
                              <ul class="toc-list-h4">
                                  <li>
                                    <a href="#get" class="toc-h4 toc-link" data-title="GET示例 获取服务器时间">GET示例 获取服务器时间</a>
                                  </li>
                                  <li>
                                    <a href="#get-2" class="toc-h4 toc-link" data-title="GET示例 订单查询">GET示例 订单查询</a>
                                  </li>
                                  <li>
                                    <a href="#post" class="toc-h4 toc-link" data-title="POST示例  创建测试订单">POST示例  创建测试订单</a>
                                  </li>
                              </ul>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#http" class="toc-h2 toc-link" data-title="HTTP返回代码的类型">HTTP返回代码的类型</a>
                  </li>
                  <li>
                    <a href="#12907e94be" class="toc-h2 toc-link" data-title="访问限制">访问限制</a>
                  </li>
                  <li>
                    <a href="#a3d140c825" class="toc-h2 toc-link" data-title="时间同步安全">时间同步安全</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#8ec82582cd" class="toc-h1 toc-link" data-title="返回码类型">返回码类型</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#10xx" class="toc-h2 toc-link" data-title="10XX - 通用服务器和网络错误">10XX - 通用服务器和网络错误</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#code-1000-unknown" class="toc-h3 toc-link" data-title="Code:-1000 UNKNOWN">Code:-1000 UNKNOWN</a>
                          </li>
                          <li>
                            <a href="#code-1001-disconnected" class="toc-h3 toc-link" data-title="Code:-1001 DISCONNECTED">Code:-1001 DISCONNECTED</a>
                          </li>
                          <li>
                            <a href="#code-1002-unauthorized" class="toc-h3 toc-link" data-title="Code:-1002 UNAUTHORIZED">Code:-1002 UNAUTHORIZED</a>
                          </li>
                          <li>
                            <a href="#code-1003-too_many_requests" class="toc-h3 toc-link" data-title="Code:-1003 TOO_MANY_REQUESTS">Code:-1003 TOO_MANY_REQUESTS</a>
                          </li>
                          <li>
                            <a href="#code-1004-no_this_company" class="toc-h3 toc-link" data-title="Code:-1004 NO_THIS_COMPANY">Code:-1004 NO_THIS_COMPANY</a>
                          </li>
                          <li>
                            <a href="#code-1006-unexpected_resp" class="toc-h3 toc-link" data-title="Code:-1006 UNEXPECTED_RESP">Code:-1006 UNEXPECTED_RESP</a>
                          </li>
                          <li>
                            <a href="#code-1007-timeout" class="toc-h3 toc-link" data-title="Code:-1007 TIMEOUT">Code:-1007 TIMEOUT</a>
                          </li>
                          <li>
                            <a href="#code-1014-unknown_order_composition" class="toc-h3 toc-link" data-title="Code:-1014 UNKNOWN_ORDER_COMPOSITION">Code:-1014 UNKNOWN_ORDER_COMPOSITION</a>
                          </li>
                          <li>
                            <a href="#code-1015-too_many_orders" class="toc-h3 toc-link" data-title="Code:-1015 TOO_MANY_ORDERS">Code:-1015 TOO_MANY_ORDERS</a>
                          </li>
                          <li>
                            <a href="#code-1016-service_shutting_down" class="toc-h3 toc-link" data-title="Code:-1016 SERVICE_SHUTTING_DOWN">Code:-1016 SERVICE_SHUTTING_DOWN</a>
                          </li>
                          <li>
                            <a href="#code-1017-no_content_type" class="toc-h3 toc-link" data-title="Code:-1017 NO_CONTENT_TYPE">Code:-1017 NO_CONTENT_TYPE</a>
                          </li>
                          <li>
                            <a href="#code-1020-unsupported_operation" class="toc-h3 toc-link" data-title="Code:-1020 UNSUPPORTED_OPERATION">Code:-1020 UNSUPPORTED_OPERATION</a>
                          </li>
                          <li>
                            <a href="#code-1021-invalid_timestamp" class="toc-h3 toc-link" data-title="Code:-1021 INVALID_TIMESTAMP">Code:-1021 INVALID_TIMESTAMP</a>
                          </li>
                          <li>
                            <a href="#code-1022-invalid_signature" class="toc-h3 toc-link" data-title="Code:-1022 INVALID_SIGNATURE">Code:-1022 INVALID_SIGNATURE</a>
                          </li>
                          <li>
                            <a href="#code-1023-unauthorized" class="toc-h3 toc-link" data-title="Code:-1023 UNAUTHORIZED">Code:-1023 UNAUTHORIZED</a>
                          </li>
                          <li>
                            <a href="#code-1024-unauthorized" class="toc-h3 toc-link" data-title="Code:-1024 UNAUTHORIZED">Code:-1024 UNAUTHORIZED</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#11xx" class="toc-h2 toc-link" data-title="11XX - 请求内容中的问题">11XX - 请求内容中的问题</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#code-1100-illegal_chars" class="toc-h3 toc-link" data-title="Code:-1100 ILLEGAL_CHARS">Code:-1100 ILLEGAL_CHARS</a>
                          </li>
                          <li>
                            <a href="#code-1101-too_many_parameters" class="toc-h3 toc-link" data-title="Code:-1101 TOO_MANY_PARAMETERS">Code:-1101 TOO_MANY_PARAMETERS</a>
                          </li>
                          <li>
                            <a href="#code-1102-mandatory_param_empty_or_malformed" class="toc-h3 toc-link" data-title="Code:-1102 MANDATORY_PARAM_EMPTY_OR_MALFORMED">Code:-1102 MANDATORY_PARAM_EMPTY_OR_MALFORMED</a>
                          </li>
                          <li>
                            <a href="#code-1103-unknown_param" class="toc-h3 toc-link" data-title="Code:-1103 UNKNOWN_PARAM">Code:-1103 UNKNOWN_PARAM</a>
                          </li>
                          <li>
                            <a href="#code-1104-unread_parameters" class="toc-h3 toc-link" data-title="Code:-1104 UNREAD_PARAMETERS">Code:-1104 UNREAD_PARAMETERS</a>
                          </li>
                          <li>
                            <a href="#code-1105-param_empty" class="toc-h3 toc-link" data-title="Code:-1105 PARAM_EMPTY">Code:-1105 PARAM_EMPTY</a>
                          </li>
                          <li>
                            <a href="#code-1106-param_not_required" class="toc-h3 toc-link" data-title="Code:-1106 PARAM_NOT_REQUIRED">Code:-1106 PARAM_NOT_REQUIRED</a>
                          </li>
                          <li>
                            <a href="#code-1111-bad_precision" class="toc-h3 toc-link" data-title="Code:-1111 BAD_PRECISION">Code:-1111 BAD_PRECISION</a>
                          </li>
                          <li>
                            <a href="#code-1112-no_depth" class="toc-h3 toc-link" data-title="Code:-1112 NO_DEPTH">Code:-1112 NO_DEPTH</a>
                          </li>
                          <li>
                            <a href="#code-1116-invalid_order_type" class="toc-h3 toc-link" data-title="Code:-1116 INVALID_ORDER_TYPE">Code:-1116 INVALID_ORDER_TYPE</a>
                          </li>
                          <li>
                            <a href="#code-1117-invalid_side" class="toc-h3 toc-link" data-title="Code:-1117 INVALID_SIDE">Code:-1117 INVALID_SIDE</a>
                          </li>
                          <li>
                            <a href="#code-1121-bad_symbol" class="toc-h3 toc-link" data-title="Code:-1121 BAD_SYMBOL">Code:-1121 BAD_SYMBOL</a>
                          </li>
                          <li>
                            <a href="#code-1136-order_quantity_too_small" class="toc-h3 toc-link" data-title="Code:-1136 ORDER_QUANTITY_TOO_SMALL">Code:-1136 ORDER_QUANTITY_TOO_SMALL</a>
                          </li>
                          <li>
                            <a href="#code-1138-order_price_wave_exceed" class="toc-h3 toc-link" data-title="Code:-1138 ORDER_PRICE_WAVE_EXCEED">Code:-1138 ORDER_PRICE_WAVE_EXCEED</a>
                          </li>
                          <li>
                            <a href="#code-1139-order_not_support_market" class="toc-h3 toc-link" data-title="Code:-1139 ORDER_NOT_SUPPORT_MARKET">Code:-1139 ORDER_NOT_SUPPORT_MARKET</a>
                          </li>
                          <li>
                            <a href="#code-1145-order_not_support_cancellation" class="toc-h3 toc-link" data-title="Code:-1145 ORDER_NOT_SUPPORT_CANCELLATION">Code:-1145 ORDER_NOT_SUPPORT_CANCELLATION</a>
                          </li>
                          <li>
                            <a href="#code-1147-price_volume_presion_error" class="toc-h3 toc-link" data-title="Code:-1147 PRICE_VOLUME_PRESION_ERROR">Code:-1147 PRICE_VOLUME_PRESION_ERROR</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#2xxx" class="toc-h2 toc-link" data-title="2XXX - 其他相关返回码">2XXX - 其他相关返回码</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#code-2013-no_such_order" class="toc-h3 toc-link" data-title="Code:-2013 NO_SUCH_ORDER">Code:-2013 NO_SUCH_ORDER</a>
                          </li>
                          <li>
                            <a href="#code-2015-rejected_api_key" class="toc-h3 toc-link" data-title="Code:-2015 REJECTED_API_KEY">Code:-2015 REJECTED_API_KEY</a>
                          </li>
                          <li>
                            <a href="#code-2016-exchange_lock" class="toc-h3 toc-link" data-title="Code:-2016 EXCHANGE_LOCK">Code:-2016 EXCHANGE_LOCK</a>
                          </li>
                          <li>
                            <a href="#code-2017-balance_not_enough" class="toc-h3 toc-link" data-title="Code:-2017 BALANCE_NOT_ENOUGH">Code:-2017 BALANCE_NOT_ENOUGH</a>
                          </li>
                          <li>
                            <a href="#code-2100-param_error" class="toc-h3 toc-link" data-title="Code:-2100 PARAM_ERROR">Code:-2100 PARAM_ERROR</a>
                          </li>
                          <li>
                            <a href="#code-2200-order_create_fails" class="toc-h3 toc-link" data-title="Code:-2200 ORDER_CREATE_FAILS">Code:-2200 ORDER_CREATE_FAILS</a>
                          </li>
                          <li>
                            <a href="#code-35" class="toc-h3 toc-link" data-title="Code:35">Code:35</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#aec581acff" class="toc-h1 toc-link" data-title="枚举类型">枚举类型</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#b79e080266" class="toc-h2 toc-link" data-title="交易对">交易对</a>
                  </li>
                  <li>
                    <a href="#4e4ca9ca80" class="toc-h2 toc-link" data-title="订单状态">订单状态</a>
                  </li>
                  <li>
                    <a href="#8a2949b872" class="toc-h2 toc-link" data-title="订单种类">订单种类</a>
                  </li>
                  <li>
                    <a href="#ba0138f8ea" class="toc-h2 toc-link" data-title="订单方向">订单方向</a>
                  </li>
                  <li>
                    <a href="#k" class="toc-h2 toc-link" data-title="K线间隔">K线间隔</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#57aa173947" class="toc-h1 toc-link" data-title="现货交易">现货交易</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#4f270f1396" class="toc-h2 toc-link" data-title="公共">公共</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#none" class="toc-h3 toc-link" data-title="安全类型: None">安全类型: None</a>
                          </li>
                          <li>
                            <a href="#10b7d8eccc" class="toc-h3 toc-link" data-title="测试连接">测试连接</a>
                          </li>
                          <li>
                            <a href="#e76ff2af0c" class="toc-h3 toc-link" data-title="服务器时间">服务器时间</a>
                          </li>
                          <li>
                            <a href="#df6185ef0f" class="toc-h3 toc-link" data-title="币对列表">币对列表</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#8e4b902c12" class="toc-h2 toc-link" data-title="行情">行情</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#none-2" class="toc-h3 toc-link" data-title="安全类型: None">安全类型: None</a>
                          </li>
                          <li>
                            <a href="#b754edd9d5" class="toc-h3 toc-link" data-title="订单薄">订单薄</a>
                          </li>
                          <li>
                            <a href="#ticker" class="toc-h3 toc-link" data-title="行情Ticker">行情Ticker</a>
                          </li>
                          <li>
                            <a href="#ticker-v2" class="toc-h3 toc-link" data-title="行情Ticker-V2">行情Ticker-V2</a>
                          </li>
                          <li>
                            <a href="#fceaf3d0b6" class="toc-h3 toc-link" data-title="最近成交">最近成交</a>
                          </li>
                          <li>
                            <a href="#k-2" class="toc-h3 toc-link" data-title="K线/蜡烛图数据">K线/蜡烛图数据</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#dfe799947f" class="toc-h2 toc-link" data-title="交易">交易</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#trade" class="toc-h3 toc-link" data-title="安全类型: TRADE">安全类型: TRADE</a>
                          </li>
                          <li>
                            <a href="#8be954be0d" class="toc-h3 toc-link" data-title="创建新订单">创建新订单</a>
                          </li>
                          <li>
                            <a href="#v2" class="toc-h3 toc-link" data-title="创建新订单-V2">创建新订单-V2</a>
                          </li>
                          <li>
                            <a href="#623198186c" class="toc-h3 toc-link" data-title="创建测试订单">创建测试订单</a>
                          </li>
                          <li>
                            <a href="#1285d91409" class="toc-h3 toc-link" data-title="订单查询">订单查询</a>
                          </li>
                          <li>
                            <a href="#v2-2" class="toc-h3 toc-link" data-title="订单查询-V2">订单查询-V2</a>
                          </li>
                          <li>
                            <a href="#4e53c0fccd" class="toc-h3 toc-link" data-title="撤销订单">撤销订单</a>
                          </li>
                          <li>
                            <a href="#v2-3" class="toc-h3 toc-link" data-title="撤销订单-V2">撤销订单-V2</a>
                          </li>
                          <li>
                            <a href="#ad00632ed5" class="toc-h3 toc-link" data-title="批量撤销订单">批量撤销订单</a>
                          </li>
                          <li>
                            <a href="#936545ae3e" class="toc-h3 toc-link" data-title="当前订单">当前订单</a>
                          </li>
                          <li>
                            <a href="#v2-4" class="toc-h3 toc-link" data-title="当前订单-V2">当前订单-V2</a>
                          </li>
                          <li>
                            <a href="#7d44b7792d" class="toc-h3 toc-link" data-title="交易记录">交易记录</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#c3d92b20c8" class="toc-h2 toc-link" data-title="账户">账户</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#user_data" class="toc-h3 toc-link" data-title="安全类型: USER_DATA">安全类型: USER_DATA</a>
                          </li>
                          <li>
                            <a href="#bc5c2a707b" class="toc-h3 toc-link" data-title="账户信息（废弃）">账户信息（废弃）</a>
                          </li>
                          <li>
                            <a href="#a07dc5034c" class="toc-h3 toc-link" data-title="账户信息（推荐）">账户信息（推荐）</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#5bf19eee5a" class="toc-h1 toc-link" data-title="合约交易">合约交易</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#4f270f1396-2" class="toc-h2 toc-link" data-title="公共">公共</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#none-3" class="toc-h3 toc-link" data-title="安全类型: None">安全类型: None</a>
                          </li>
                          <li>
                            <a href="#10b7d8eccc-2" class="toc-h3 toc-link" data-title="测试连接">测试连接</a>
                          </li>
                          <li>
                            <a href="#3f1907847c" class="toc-h3 toc-link" data-title="获取服务器时间">获取服务器时间</a>
                          </li>
                          <li>
                            <a href="#5ae89a50fd" class="toc-h3 toc-link" data-title="合约列表">合约列表</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#8e4b902c12-2" class="toc-h2 toc-link" data-title="行情">行情</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#none-4" class="toc-h3 toc-link" data-title="安全类型: None">安全类型: None</a>
                          </li>
                          <li>
                            <a href="#b754edd9d5-2" class="toc-h3 toc-link" data-title="订单薄">订单薄</a>
                          </li>
                          <li>
                            <a href="#ticker-2" class="toc-h3 toc-link" data-title="行情Ticker">行情Ticker</a>
                          </li>
                          <li>
                            <a href="#ticker-v2-2" class="toc-h3 toc-link" data-title="行情Ticker-V2">行情Ticker-V2</a>
                          </li>
                          <li>
                            <a href="#c3474f0c9f" class="toc-h3 toc-link" data-title="获取指数/标记价格">获取指数/标记价格</a>
                          </li>
                          <li>
                            <a href="#k-3" class="toc-h3 toc-link" data-title="K线/蜡烛图数据">K线/蜡烛图数据</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#dfe799947f-2" class="toc-h2 toc-link" data-title="交易">交易</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#trade-2" class="toc-h3 toc-link" data-title="安全类型: TRADE">安全类型: TRADE</a>
                          </li>
                          <li>
                            <a href="#5ac84906d9" class="toc-h3 toc-link" data-title="创建订单">创建订单</a>
                          </li>
                          <li>
                            <a href="#af8cccfe1d" class="toc-h3 toc-link" data-title="创建条件单">创建条件单</a>
                          </li>
                          <li>
                            <a href="#3eedd32d80" class="toc-h3 toc-link" data-title="取消订单">取消订单</a>
                          </li>
                          <li>
                            <a href="#054ef2401f" class="toc-h3 toc-link" data-title="取消条件单">取消条件单</a>
                          </li>
                          <li>
                            <a href="#dea71f6fbe" class="toc-h3 toc-link" data-title="订单详情">订单详情</a>
                          </li>
                          <li>
                            <a href="#936545ae3e-2" class="toc-h3 toc-link" data-title="当前订单">当前订单</a>
                          </li>
                          <li>
                            <a href="#6d4fb4cfcd" class="toc-h3 toc-link" data-title="历史委托">历史委托</a>
                          </li>
                          <li>
                            <a href="#cc30a051b8" class="toc-h3 toc-link" data-title="盈亏记录">盈亏记录</a>
                          </li>
                          <li>
                            <a href="#7d44b7792d-2" class="toc-h3 toc-link" data-title="交易记录">交易记录</a>
                          </li>
                          <li>
                            <a href="#97ef08e65e" class="toc-h3 toc-link" data-title="更改持仓模式">更改持仓模式</a>
                          </li>
                          <li>
                            <a href="#168f63da47" class="toc-h3 toc-link" data-title="更改保证金模式">更改保证金模式</a>
                          </li>
                          <li>
                            <a href="#a417f8d88a" class="toc-h3 toc-link" data-title="更改杠杆倍数">更改杠杆倍数</a>
                          </li>
                          <li>
                            <a href="#6b4a8e9b43" class="toc-h3 toc-link" data-title="当前持仓列表">当前持仓列表</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#websocket" class="toc-h1 toc-link" data-title="Websocket">Websocket</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#153042ed9e" class="toc-h2 toc-link" data-title="概述">概述</a>
                  </li>
                  <li>
                    <a href="#b122f813d5" class="toc-h2 toc-link" data-title="基本信息">基本信息</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#94a9a32795" class="toc-h3 toc-link" data-title="心跳">心跳</a>
                          </li>
                          <li>
                            <a href="#demo" class="toc-h3 toc-link" data-title="Demo">Demo</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#5fc78ab0c4" class="toc-h2 toc-link" data-title="订阅/取消订阅参数">订阅/取消订阅参数</a>
                  </li>
                  <li>
                    <a href="#5319af762d" class="toc-h2 toc-link" data-title="订阅">订阅</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#00a0f1327d" class="toc-h3 toc-link" data-title="订阅全量深度">订阅全量深度</a>
                          </li>
                          <li>
                            <a href="#6c81f8d216" class="toc-h3 toc-link" data-title="订阅实时成交">订阅实时成交</a>
                          </li>
                          <li>
                            <a href="#k-4" class="toc-h3 toc-link" data-title="订阅K线行情">订阅K线行情</a>
                          </li>
                          <li>
                            <a href="#24h-ticker" class="toc-h3 toc-link" data-title="订阅24h行情Ticker">订阅24h行情Ticker</a>
                          </li>
                          <li>
                            <a href="#k-5" class="toc-h3 toc-link" data-title="请求K线历史数据">请求K线历史数据</a>
                          </li>
                          <li>
                            <a href="#3cf0f7e533" class="toc-h3 toc-link" data-title="请求成交记录">请求成交记录</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#sdk" class="toc-h1 toc-link" data-title="SDK开发库">SDK开发库</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#java" class="toc-h2 toc-link" data-title="Java">Java</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#0adb1147b3" class="toc-h1 toc-link" data-title="常见问题">常见问题</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#timestamp" class="toc-h2 toc-link" data-title="请求接口的timestamp参数和到达服务器时间最大差值是多少？">请求接口的timestamp参数和到达服务器时间最大差值是多少？</a>
                  </li>
                  <li>
                    <a href="#quot-x-ch-ts-quot" class="toc-h2 toc-link" data-title="请求头"X-CH-TS"不能为空，如何解决？">请求头"X-CH-TS"不能为空，如何解决？</a>
                  </li>
                  <li>
                    <a href="#57968bc36e" class="toc-h2 toc-link" data-title="为什么签名认证总返回无效的签名？">为什么签名认证总返回无效的签名？</a>
                  </li>
                  <li>
                    <a href="#illegal_content_type-1017" class="toc-h2 toc-link" data-title="调用接口提示ILLEGAL_CONTENT_TYPE(-1017)，是什么原因？">调用接口提示ILLEGAL_CONTENT_TYPE(-1017)，是什么原因？</a>
                  </li>
                  <li>
                    <a href="#api-2" class="toc-h2 toc-link" data-title="API每秒调用频率有限制吗？">API每秒调用频率有限制吗？</a>
                  </li>
                  <li>
                    <a href="#api-3" class="toc-h2 toc-link" data-title="API的访问频率是根据什么限制的？">API的访问频率是根据什么限制的？</a>
                  </li>
                  <li>
                    <a href="#http-429" class="toc-h2 toc-link" data-title="HTTP状态码429是怎样造成的？">HTTP状态码429是怎样造成的？</a>
                  </li>
                  <li>
                    <a href="#api-ip" class="toc-h2 toc-link" data-title="API调用接口报超过访问频率会被封IP吗？封多久？">API调用接口报超过访问频率会被封IP吗？封多久？</a>
                  </li>
                  <li>
                    <a href="#websocker" class="toc-h2 toc-link" data-title="为什么WebSocker出现了断开连接？">为什么WebSocker出现了断开连接？</a>
                  </li>
                  <li>
                    <a href="#time-out" class="toc-h2 toc-link" data-title="用户请求接口报错Time Out？">用户请求接口报错Time Out？</a>
                  </li>
                  <li>
                    <a href="#0a7de45921" class="toc-h2 toc-link" data-title="如何拿到平台所有的币对">如何拿到平台所有的币对</a>
                  </li>
                  <li>
                    <a href="#a728c422ac" class="toc-h2 toc-link" data-title="批量下单/撤单有条数限制吗？">批量下单/撤单有条数限制吗？</a>
                  </li>
                  <li>
                    <a href="#newclientorderid" class="toc-h2 toc-link" data-title="newClientOrderId是什么, 有什么作用?">newClientOrderId是什么, 有什么作用?</a>
                  </li>
                  <li>
                    <a href="#6b6191e1e7" class="toc-h2 toc-link" data-title="如何获取最新成交价格？">如何获取最新成交价格？</a>
                  </li>
                  <li>
                    <a href="#ticker-24" class="toc-h2 toc-link" data-title="Ticker接口中的24小时成交量会出现负增长吗？">Ticker接口中的24小时成交量会出现负增长吗？</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://www.fameex.net/' target='_blank'>FameEX</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='11affa2be2'>文档说明</h1><h2 id='api'>API基本信息</h2>
<ul>
<li>  本篇 <code>现货交易</code> 列出 REST 接口的 baseurl <code>https://openapi.fameex.com</code>。</li>
<li>  本篇 <code>现货交易</code> 列出 REST 接口的备用 baseurl <code>https://openapi.fameex.net</code>。</li>
<li>  本篇 <code>合约交易</code> 列出 REST 接口的 baseurl <code>https://futuresopenapi.fameex.com</code>。</li>
<li>  本篇 <code>合约交易</code> 列出 REST 接口的 备用baseurl <code>https://futuresopenapi.fameex.net</code>。</li>
<li>  所有接口都会返回一个 JSON、object 或者 array。</li>
<li>  响应中如有数组，数组元素以时间倒序排列，越早的数据越靠前。</li>
<li>  所有时间、时间戳均为 Unix 时间，单位为<strong>毫秒</strong>。</li>
</ul>
<h2 id='29d525527a'>文档入参规范</h2>
<p>入参名称的带有红色 <font color="red">*</font> 号，说明该参数为必传，反之为非必传。</p>

<p>接口对入参字符大小写敏感，在接口中会明确指明。
如写明需要输入大写的币对名称，则需要输入 <code>BTCUSDT</code>，输入小写的 <code>btcusdt</code> 是不被允许的。</p>

<p>文档中的入参有明确的类型说明，需要按照指定的类型输入。
如 <code>integer</code> 类型只能输入数字类型，<code>3</code> 的输入是正确的，但 <code>&quot;3&quot;</code> 的输入是不被允许的。</p>
<h2 id='6bb2d7a966'>接口通用信息</h2>
<ul>
<li>  所有请求基于 Https 协议，请求头信息中 <code>Content-Type</code> 需要统一设置为：<code>&#39;application/json&#39;</code>。</li>
<li>  <code>GET</code> 方法的接口，参数必须在 <code>query string</code> 中发送。</li>
<li>  <code>POST</code> 方法的接口，参数必须在 <code>request body</code> 中发送。</li>
<li>  对参数的顺序不做要求。</li>
</ul>
<h2 id='fd081abd37'>接口是否需要签名验证</h2>
<p>接口类型分为：公共、行情、交易、账户。</p>

<ul>
<li>  公共和行情类下的接口无需 API-KEY 或者签名就可访问。</li>
<li>  交易和账户安全需要 API-KEY 和签名验证后才可访问。</li>
<li>  签名内容和参数有关，若参数输入错误则会返回提示参数错误或空值。</li>
<li>  需要签名验证的接口 要在 Header 中添加 <code>X-CH-SIGN</code>，<code>X-CH-APIKEY</code>，<code>X-CH-TS</code> 进行验签。</li>
<li>  <code>X-CH-TS</code>（时间戳），为 Unix 时间，单位为<strong>毫秒</strong>。</li>
<li>  <code>X-CH-APIKEY</code>，用户的 <code>apiKey</code>。</li>
<li>  <code>X-CH-SIGN</code>，签名加密钥匙为<code>secretKey</code>。签名规则和示例可参照：<a href="#需要签名的接口">签名规则</a>、<a href="#有请求参数的示例">签名示例</a></li>
<li>  (文档中的 <code>apiKey</code>，<code>secretKey</code> 均为虚拟值；真实内容需要用户在前台页面的API管理中申请获取)。</li>
</ul>

<table><thead>
<tr>
<th style="text-align: left">接口类型</th>
<th style="text-align: left">鉴权类型</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">公共</td>
<td style="text-align: left">NONE</td>
</tr>
<tr>
<td style="text-align: left">行情</td>
<td style="text-align: left">NONE</td>
</tr>
<tr>
<td style="text-align: left">交易</td>
<td style="text-align: left">TRADE</td>
</tr>
<tr>
<td style="text-align: left">账户</td>
<td style="text-align: left">USER_DATA</td>
</tr>
</tbody></table>
<h3 id='a573a19f9c'>接口鉴权类型</h3>
<ul>
<li>  每个接口都有自己的鉴权类型，鉴权类型决定了访问时应当进行何种鉴权。</li>
<li>  如果需要 API-KEY，应当在 HTTP 头中以 <code>X-CH-APIKEY</code> 字段传递。</li>
<li>  API-KEY 与 API-Secret 是大小写敏感的。</li>
<li>  可以在网页用户中心修改 API-KEY 所具有的权限，例如读取账户信息、发送交易指令、发送提现指令。</li>
</ul>

<table><thead>
<tr>
<th style="text-align: left">鉴权类型</th>
<th style="text-align: left">描述</th>
<th style="text-align: left">Header</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">NONE</td>
<td style="text-align: left">不需要鉴权的接口</td>
<td style="text-align: left"></td>
</tr>
<tr>
<td style="text-align: left">TRADE</td>
<td style="text-align: left">需要有效的 API-KEY 和签名</td>
<td style="text-align: left"><code>X-CH-SIGN</code>，<code>X-CH-APIKEY</code>，<code>X-CH-TS</code></td>
</tr>
<tr>
<td style="text-align: left">USER_DATA</td>
<td style="text-align: left">需要有效的 API-KEY 和签名</td>
<td style="text-align: left"><code>X-CH-SIGN</code>，<code>X-CH-APIKEY</code>，<code>X-CH-TS</code></td>
</tr>
<tr>
<td style="text-align: left">USER_STREAM</td>
<td style="text-align: left">需要有效的 API-KEY</td>
<td style="text-align: left"><code>X-CH-APIKEY</code>，<code>X-CH-TS</code></td>
</tr>
<tr>
<td style="text-align: left">MARKET_DATA</td>
<td style="text-align: left">需要有效的 API-KEY</td>
<td style="text-align: left"><code>X-CH-APIKEY</code>，<code>X-CH-TS</code></td>
</tr>
</tbody></table>

<p><a name="需要签名的接口"></a></p>
<h3 id='trade-user_data'>需要签名的接口 (TRADE 与 USER_DATA)</h3>
<ul>
<li>  调用 <code>TRADE</code> 或者 <code>USER_DATA</code> 接口时，应当在 HTTP 头中以 <code>X-CH-SIGN</code> 字段传递签名参数。</li>
<li>  <code>X-CH-SIGN</code> 签名使用 <code>HMAC SHA256</code> 加密算法，API-KEY 所对应的 API-Secret 作为 <code>HMAC SHA256</code> 的密钥。</li>
<li>  <code>X-CH-SIGN</code> 的请求头是以 timestamp + method + requestPath + body 字符串（+表示字符串连接）作为操作对象。</li>
<li>  其中 timestamp 的值与 <code>X-CH-TS</code> 请求头相同，method 是请求方法，字母全部大写：<code>GET</code>/<code>POST</code>。</li>
<li>  requestPath 是请求接口路径，例如:<code>sapi/v1/order?symbol=ethusdt&amp;orderID=111000111</code>。</li>
<li>  <code>body</code> 是请求主体的字符串（post only），如果是 <code>GET</code> 请求则 <code>body</code> 可省略。</li>
<li>  签名大小写不敏感。</li>
</ul>
<h3 id='b5ed0cdb50'>接口示例</h3>
<p>下方以接口作为示例，展示接口格式、访问链接和参数说明描述。</p>
<h4 id='get'>GET示例 获取服务器时间</h4>
<p><code>GET https://openapi.fameex.com/sapi/v1/time</code></p>

<p>没有请求参数的 GET</p>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://openapi.fameex.com/sapi/v1/time

// request headers
Content-Type:application/json
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://openapi.fameex.com/sapi/v1/time"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="c1">// 使用 URI 创建 URL</span>
      <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="s">"https://openapi.fameex.com/sapi/v1/time"</span><span class="o">);</span>
      <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>

      <span class="c1">// 读取响应</span>
      <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
      <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
      <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
      <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

      <span class="c1">// 输出结果</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response: "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com/sapi/v1/time"</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应体</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"读取响应失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 打印响应</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"服务器返回:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com/sapi/v1/time"</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>  <span class="c1"># 检查请求是否成功
</span>    <span class="k">print</span><span class="p">(</span><span class="s">"Response:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
<span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"请求错误:"</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com/sapi/v1/time"</span><span class="p">;</span>

<span class="c1">// 初始化 cURL</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>

<span class="c1">// 设置 cURL 选项</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 跳过 SSL 证书验证（如果 API 需要）</span>

<span class="c1">// 执行请求</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 检查是否有错误</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"cURL 错误："</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Response: "</span> <span class="mf">.</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 关闭 cURL</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">https</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://openapi.fameex.com/sapi/v1/time</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">https</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>

  <span class="c1">// A chunk of data has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">data</span> <span class="o">+=</span> <span class="nx">chunk</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="c1">// The whole response has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">end</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>

<span class="p">}).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">请求错误:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"China Standard Time"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"serverTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1705039779880</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">timezone</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>China Standard Time</code></td>
<td style="text-align: left">服务器时区</td>
</tr>
<tr>
<td style="text-align: left">serverTime</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>1705039779880</code></td>
<td style="text-align: left">服务器时间戳</td>
</tr>
</tbody></table>

<p><a name="有请求参数的示例"></a></p>
<h4 id='get-2'>GET示例 订单查询</h4>
<p><code>GET https://openapi.fameex.com/sapi/v1/order</code></p>

<p>有请求参数的 GET</p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">orderId<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">订单id</td>
</tr>
<tr>
<td style="text-align: left">symbol<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>小写</code>币对名称，例如：<code>ethusdt</code></td>
</tr>
</tbody></table>

<p><strong>API数据</strong></p>

<table><thead>
<tr>
<th style="text-align: left">Key</th>
<th style="text-align: left">Value</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><code>apiKey</code></td>
<td style="text-align: left">您的API-KEY</td>
</tr>
<tr>
<td style="text-align: left"><code>secretKey</code></td>
<td style="text-align: left">您的API-SECRET</td>
</tr>
</tbody></table>

<p>以下是在 linux bash 环境下使用 echo，openssl 和 curl 工具实现的一个调用接口下单的示例。<font color="red">（其中以上的 <code>apikey</code>、<code>secretKey</code> 仅供示范，请将其替换为您的真实 <code>apiKey</code> 和 <code>secretKey</code>）</font></p>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://openapi.fameex.com/sapi/v1/order?orderId=12&amp;symbol=ethusdt

// request headers
Content-Type: application/json
X-CH-TS: 1739503617552
X-CH-APIKEY: 您的API-KEY
X-CH-SIGN: 325b02a8444da041c71fb6e3c35c6baf87e5cb48acc19e4cd312b8bf821bfc1b
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># 设置 API 相关信息</span>
<span class="nv">API_URL</span><span class="o">=</span><span class="s2">"https://openapi.fameex.com"</span>
<span class="nv">REQUEST_URL</span><span class="o">=</span><span class="s2">"/sapi/v1/order"</span>
<span class="nv">QUERY_STRING</span><span class="o">=</span><span class="s2">"?orderId=12&amp;symbol=ethusdt"</span>

<span class="c"># 计算完整的请求路径</span>
<span class="nv">REQUEST_PATH</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">REQUEST_URL</span><span class="k">}${</span><span class="nv">QUERY_STRING</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">FULL_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">API_URL</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>

<span class="c"># API 认证信息</span>
<span class="nv">API_KEY</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">API_SECRET</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 生成当前毫秒级时间戳</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="si">$(</span><span class="nb">date</span> +%s | <span class="nb">awk</span> <span class="s1">'{print $1 * 1000}'</span><span class="si">)</span>

<span class="c"># 定义请求方法</span>
<span class="nv">METHOD</span><span class="o">=</span><span class="s2">"GET"</span>

<span class="c"># 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="nv">SIGN_PAYLOAD</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">METHOD</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">SIGNATURE</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$API_SECRET</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>

<span class="c"># **打印调试信息**</span>
<span class="nb">echo</span> <span class="s2">"==== 请求信息 ===="</span>
<span class="nb">echo</span> <span class="s2">"Timestamp (X-CH-TS): </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Sign Payload (待签名字符串): </span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Signature (X-CH-SIGN): </span><span class="nv">$SIGNATURE</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Request URL: </span><span class="k">${</span><span class="nv">FULL_URL</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"=================="</span>

<span class="c"># 发送 GET 请求</span>
curl <span class="nt">-X</span> GET <span class="s2">"</span><span class="nv">$FULL_URL</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$API_KEY</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.Instant</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FameexApiRequest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// API 相关信息</span>
            <span class="nc">String</span> <span class="n">apiUrl</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">requestUrl</span> <span class="o">=</span> <span class="s">"/sapi/v1/order"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">queryString</span> <span class="o">=</span> <span class="s">"?orderId=12&amp;symbol=ethusdt"</span><span class="o">;</span>

            <span class="c1">// 计算完整的请求路径</span>
            <span class="nc">String</span> <span class="n">requestPath</span> <span class="o">=</span> <span class="n">requestUrl</span> <span class="o">+</span> <span class="n">queryString</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">fullUrl</span> <span class="o">=</span> <span class="n">apiUrl</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>

            <span class="c1">// API 认证信息</span>
            <span class="nc">String</span> <span class="n">apiKey</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiSecret</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>

            <span class="c1">// 生成当前毫秒级时间戳</span>
            <span class="nc">String</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">toEpochMilli</span><span class="o">());</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"GET"</span><span class="o">;</span>

            <span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
            <span class="nc">String</span> <span class="n">signPayload</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSha256</span><span class="o">(</span><span class="n">signPayload</span><span class="o">,</span> <span class="n">apiSecret</span><span class="o">);</span>

            <span class="c1">// **打印调试信息**</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"==== 请求信息 ===="</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Timestamp (X-CH-TS): "</span> <span class="o">+</span> <span class="n">timestamp</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Sign Payload (待签名字符串): "</span> <span class="o">+</span> <span class="n">signPayload</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Signature (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request URL: "</span> <span class="o">+</span> <span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"=================="</span><span class="o">);</span>

            <span class="c1">// 发送 GET 请求</span>
            <span class="n">sendGetRequest</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// HMAC-SHA256 签名计算</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSha256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>

        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">// 发送 HTTP GET 请求</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendGetRequest</span><span class="o">(</span><span class="nc">String</span> <span class="n">fullUrl</span><span class="o">,</span> <span class="nc">String</span> <span class="n">apiKey</span><span class="o">,</span> <span class="nc">String</span> <span class="n">timestamp</span><span class="o">,</span> <span class="nc">String</span> <span class="n">signature</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>

            <span class="c1">// 设置请求头</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">);</span>

            <span class="c1">// 发送请求并获取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response Code: "</span> <span class="o">+</span> <span class="n">responseCode</span><span class="o">);</span>

            <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNextLine</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">());</span>
            <span class="o">}</span>
            <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"strconv"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// API 相关信息</span>
    <span class="n">apiURL</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com"</span>
    <span class="n">requestURL</span> <span class="o">:=</span> <span class="s">"/sapi/v1/order"</span>
    <span class="n">queryString</span> <span class="o">:=</span> <span class="s">"?orderId=12&amp;symbol=ethusdt"</span>

    <span class="c">// 计算完整的请求路径</span>
    <span class="n">requestPath</span> <span class="o">:=</span> <span class="n">requestURL</span> <span class="o">+</span> <span class="n">queryString</span>
    <span class="n">fullURL</span> <span class="o">:=</span> <span class="n">apiURL</span> <span class="o">+</span> <span class="n">requestPath</span>

    <span class="c">// API 认证信息</span>
    <span class="n">apiKey</span> <span class="o">:=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">apiSecret</span> <span class="o">:=</span> <span class="s">"您的API-SECRET"</span>

    <span class="c">// 生成当前毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">strconv</span><span class="o">.</span><span class="n">FormatInt</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span><span class="o">/</span><span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">),</span> <span class="m">10</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"GET"</span>

    <span class="c">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
    <span class="n">signPayload</span> <span class="o">:=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">signPayload</span><span class="p">,</span> <span class="n">apiSecret</span><span class="p">)</span>

    <span class="c">// **打印调试信息**</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">signPayload</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
<span class="p">}</span>

<span class="c">// 计算 HMAC-SHA256 签名</span>
<span class="k">func</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 发送 HTTP GET 请求</span>
<span class="k">func</span> <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>

    <span class="c">// 创建请求</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">,</span> <span class="no">nil</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error creating request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置 Headers</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error sending request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">resp</span><span class="o">.</span><span class="n">StatusCode</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
<span class="n">REQUEST_URL</span> <span class="o">=</span> <span class="s">"/sapi/v1/order"</span>
<span class="n">QUERY_STRING</span> <span class="o">=</span> <span class="s">"?orderId=12&amp;symbol=ethusdt"</span>

<span class="c1"># 计算完整的请求路径
</span><span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="n">REQUEST_URL</span> <span class="o">+</span> <span class="n">QUERY_STRING</span>
<span class="n">FULL_URL</span> <span class="o">=</span> <span class="n">API_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>

<span class="c1"># API 认证信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>

<span class="c1"># 生成当前毫秒级时间戳
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="c1"># 请求方法
</span><span class="n">METHOD</span> <span class="o">=</span> <span class="s">"GET"</span>

<span class="c1"># 生成签名 (X-CH-SIGN) - GET 请求没有 body
</span><span class="n">SIGN_PAYLOAD</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">METHOD</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">SIGNATURE</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">SIGN_PAYLOAD</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c1"># **打印调试信息**
</span><span class="k">print</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">SIGN_PAYLOAD</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">SIGNATURE</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">FULL_URL</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

<span class="c1"># 发送 GET 请求
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">SIGNATURE</span><span class="p">,</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">FULL_URL</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="c1"># 打印响应
</span><span class="k">print</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>

<span class="c1">// API 相关信息</span>
<span class="nv">$API_URL</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$REQUEST_URL</span> <span class="o">=</span> <span class="s2">"/sapi/v1/order"</span><span class="p">;</span>
<span class="nv">$QUERY_STRING</span> <span class="o">=</span> <span class="s2">"?orderId=12&amp;symbol=ethusdt"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="nv">$REQUEST_PATH</span> <span class="o">=</span> <span class="nv">$REQUEST_URL</span> <span class="mf">.</span> <span class="nv">$QUERY_STRING</span><span class="p">;</span>
<span class="nv">$FULL_URL</span> <span class="o">=</span> <span class="nv">$API_URL</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// API 认证信息</span>
<span class="nv">$API_KEY</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$API_SECRET</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 请求方法</span>
<span class="nv">$METHOD</span> <span class="o">=</span> <span class="s2">"GET"</span><span class="p">;</span>

<span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="nv">$SIGN_PAYLOAD</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$METHOD</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>
<span class="nv">$SIGNATURE</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$SIGN_PAYLOAD</span><span class="p">,</span> <span class="nv">$API_SECRET</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="k">echo</span> <span class="s2">"==== 请求信息 ====</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Timestamp (X-CH-TS): "</span> <span class="mf">.</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Sign Payload (待签名字符串): "</span> <span class="mf">.</span> <span class="nv">$SIGN_PAYLOAD</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Signature (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$SIGNATURE</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Request URL: "</span> <span class="mf">.</span> <span class="nv">$FULL_URL</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"==================</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// 发送 GET 请求</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$API_KEY</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="p">];</span>

<span class="c1">// 使用 cURL 发送 GET 请求</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$FULL_URL</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// 执行请求并获取响应</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$http_code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 打印响应</span>
<span class="k">echo</span> <span class="s2">"Response Code: </span><span class="nv">$http_code</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Response Body: </span><span class="nv">$response</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="cp">?&gt;</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://openapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/sapi/v1/order</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">QUERY_STRING</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">?orderId=12&amp;symbol=ethusdt</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="nx">REQUEST_URL</span> <span class="o">+</span> <span class="nx">QUERY_STRING</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">FULL_URL</span> <span class="o">=</span> <span class="nx">API_URL</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// API 认证信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">();</span>

<span class="c1">// 请求方法</span>
<span class="kd">const</span> <span class="nx">METHOD</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="kd">const</span> <span class="nx">SIGN_PAYLOAD</span> <span class="o">=</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">METHOD</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">SIGNATURE</span> <span class="o">=</span> <span class="nx">crypto</span>
  <span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">"</span><span class="s2">sha256</span><span class="dl">"</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">SIGN_PAYLOAD</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="dl">"</span><span class="s2">hex</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==== 请求信息 ====</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Timestamp (X-CH-TS):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">timestamp</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Sign Payload (待签名字符串):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">SIGN_PAYLOAD</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Signature (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">SIGNATURE</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Request URL:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">FULL_URL</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==================</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// 发送 GET 请求</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">SIGNATURE</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">axios</span>
  <span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">FULL_URL</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Code:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<blockquote>
<p>HMAC-SHA256 签名示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">// 切换 Node.js 查看 『JavaScript 代码（归类在 HTTP 下）』
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="nv">SIGN_PAYLOAD</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">METHOD</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">SIGNATURE</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$API_SECRET</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="c1">// HMAC-SHA256 签名计算</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSha256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
    <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
    <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
    <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>

    <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="c">// 计算 HMAC-SHA256 签名</span>
<span class="k">func</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># 生成签名 (X-CH-SIGN) - GET 请求没有 body
</span><span class="n">SIGN_PAYLOAD</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">METHOD</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">SIGNATURE</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">SIGN_PAYLOAD</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="nv">$SIGN_PAYLOAD</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$METHOD</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>
<span class="nv">$SIGNATURE</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$SIGN_PAYLOAD</span><span class="p">,</span> <span class="nv">$API_SECRET</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="kd">const</span> <span class="nx">SIGN_PAYLOAD</span> <span class="o">=</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">METHOD</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">SIGNATURE</span> <span class="o">=</span> <span class="nx">crypto</span>
  <span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">"</span><span class="s2">sha256</span><span class="dl">"</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">SIGN_PAYLOAD</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="dl">"</span><span class="s2">hex</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="c1">// JavaScript 代码（归类在 HTTP 下）</span>

<span class="kd">let</span> <span class="nx">secretKey</span> <span class="o">=</span> <span class="nx">pm</span><span class="p">.</span><span class="nx">environment</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">SecretKey</span><span class="dl">"</span><span class="p">);</span>  <span class="c1">// 从环境变量中获取 API 密钥</span>
<span class="kd">let</span> <span class="nx">timestampString</span> <span class="o">=</span> <span class="nb">String</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span> <span class="c1">// 生成时间戳（精确到毫秒）</span>
<span class="kd">let</span> <span class="nx">method</span> <span class="o">=</span> <span class="nx">pm</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">method</span><span class="p">;</span> <span class="c1">// 获取请求方法 (GET, POST, etc.)</span>

<span class="kd">let</span> <span class="nx">fullUrl</span> <span class="o">=</span> <span class="nx">pm</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">url</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>
<span class="kd">let</span> <span class="nx">requestPath</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="o">+</span><span class="nx">fullUrl</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">).</span><span class="nx">slice</span><span class="p">(</span><span class="mi">3</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// 获取 `example.com` 之后的部分</span>

<span class="c1">// X-CH-SIGN的请求头是以timestamp + method + requestPath + body字符串（+表示字符串连接）</span>
<span class="c1">// body是请求主体的字符串（post only），如果是GET请求则body可省略。</span>
<span class="kd">let</span> <span class="nx">signPayload</span> <span class="o">=</span> <span class="nx">timestampString</span> <span class="o">+</span> <span class="nx">method</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">requestPath</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">method</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">pm</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span> <span class="p">?</span> <span class="nx">pm</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">raw</span> <span class="p">:</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">// 获取请求体（如果有）</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nx">parsedBody</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span> <span class="c1">// 尝试解析 JSON</span>
            <span class="kd">let</span> <span class="nx">bodyString</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">parsedBody</span><span class="p">);</span>
            <span class="nx">signPayload</span> <span class="o">+=</span> <span class="nx">bodyString</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">signPayload</span> <span class="o">+=</span> <span class="nx">body</span><span class="p">;</span> <span class="c1">// 如果不是 JSON，则直接附加原始 body</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">POST 方法处理 Body 数据 失败</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 签名使用HMAC SHA256算法，API-KEY所对应的API-Secret作为 HMAC SHA256 的密钥。</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto-js</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 加载 CryptoJS 库</span>
<span class="c1">// 计算签名</span>
<span class="kd">let</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">HmacSHA256</span><span class="p">(</span><span class="nx">signPayload</span><span class="p">,</span> <span class="nx">secretKey</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="nx">crypto</span><span class="p">.</span><span class="nx">enc</span><span class="p">.</span><span class="nx">Hex</span><span class="p">);</span>

<span class="c1">// 设定 Headers</span>
<span class="nx">pm</span><span class="p">.</span><span class="nx">variables</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">xChTs</span><span class="dl">'</span><span class="p">,</span> <span class="nx">timestampString</span><span class="p">);</span>
<span class="nx">pm</span><span class="p">.</span><span class="nx">variables</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">xChSign</span><span class="dl">'</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre></div><h4 id='post'>POST示例  创建测试订单</h4>
<p><code>POST https://openapi.fameex.com/sapi/v1/order/test</code></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">示例</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">symbol</td>
<td style="text-align: left">BTCUSDT</td>
</tr>
<tr>
<td style="text-align: left">side</td>
<td style="text-align: left">BUY</td>
</tr>
<tr>
<td style="text-align: left">type</td>
<td style="text-align: left">LIMIT</td>
</tr>
<tr>
<td style="text-align: left">volume</td>
<td style="text-align: left">1</td>
</tr>
<tr>
<td style="text-align: left">price</td>
<td style="text-align: left">9300</td>
</tr>
</tbody></table>

<p><strong>API数据</strong></p>

<table><thead>
<tr>
<th style="text-align: left">Key</th>
<th style="text-align: left">Value</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><code>apiKey</code></td>
<td style="text-align: left">您的API-KEY</td>
</tr>
<tr>
<td style="text-align: left"><code>secretKey</code></td>
<td style="text-align: left">您的API-SECRET</td>
</tr>
</tbody></table>

<p>以下是在 linux bash 环境下使用 echo，openssl 和 curl 工具实现的一个调用接口下单的示例。<font color="red">（其中以上的 <code>apikey</code>、<code>secretKey</code> 仅供示范，请将其替换为您的真实 <code>apiKey</code> 和 <code>secretKey</code>）</font></p>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">POST https://openapi.fameex.com/sapi/v1/order/test

// request headers
Content-Type: application/json
X-CH-TS: 1739503617552
X-CH-APIKEY: 您的API-KEY
X-CH-SIGN: 325b02a8444da041c71fb6e3c35c6baf87e5cb48acc19e4cd312b8bf821bfc1b
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># 设置 API 相关信息</span>
<span class="nv">URL</span><span class="o">=</span><span class="s2">"https://openapi.fameex.com"</span>
<span class="nv">REQUEST_PATH</span><span class="o">=</span><span class="s2">"/sapi/v1/order/test"</span>
<span class="nv">API_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">URL</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">API_KEY</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">API_SECRET</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 生成当前毫秒级时间戳</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="si">$(</span><span class="nb">date</span> +%s | <span class="nb">awk</span> <span class="s1">'{print $1 * 1000}'</span><span class="si">)</span>

<span class="c"># 定义请求方法</span>
<span class="nv">METHOD</span><span class="o">=</span><span class="s2">"POST"</span>

<span class="c"># 定义请求体 (JSON 格式)</span>
<span class="nv">BODY_JSON</span><span class="o">=</span><span class="s1">'{"symbol":"BTCUSDT","price":"9300","volume":"1","side":"BUY","type":"LIMIT"}'</span>

<span class="c"># 生成签名 (X-CH-SIGN)</span>
<span class="nv">SIGN_PAYLOAD</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">METHOD</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}${</span><span class="nv">BODY_JSON</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">SIGNATURE</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$API_SECRET</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>

<span class="c"># **打印调试信息**</span>
<span class="nb">echo</span> <span class="s2">"==== 请求信息 ===="</span>
<span class="nb">echo</span> <span class="s2">"Timestamp (X-CH-TS): </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Sign Payload (待签名字符串): </span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Signature (X-CH-SIGN): </span><span class="nv">$SIGNATURE</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Request Body: </span><span class="nv">$BODY_JSON</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"=================="</span>

<span class="c"># 发送请求</span>
curl <span class="nt">-X</span> POST <span class="s2">"</span><span class="nv">$API_URL</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$API_KEY</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$BODY_JSON</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.Instant</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Base64</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FameexApiRequest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// API 相关信息</span>
            <span class="nc">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">requestPath</span> <span class="o">=</span> <span class="s">"/sapi/v1/order/test"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiUrl</span> <span class="o">=</span> <span class="n">url</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span><span class="err">\</span>
            <span class="nc">String</span> <span class="n">apiKey</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiSecret</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>

            <span class="c1">// 获取当前毫秒级时间戳</span>
            <span class="nc">String</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">toEpochMilli</span><span class="o">());</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span><span class="o">;</span>

            <span class="c1">// 定义请求体 (JSON 格式)</span>
            <span class="nc">String</span> <span class="n">bodyJson</span> <span class="o">=</span> <span class="s">"{\"symbol\":\"BTCUSDT\",\"price\":\"9300\",\"volume\":\"1\",\"side\":\"BUY\",\"type\":\"LIMIT\"}"</span><span class="o">;</span>

            <span class="c1">// 生成签名 (X-CH-SIGN)</span>
            <span class="nc">String</span> <span class="n">signPayload</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span> <span class="o">+</span> <span class="n">bodyJson</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSha256</span><span class="o">(</span><span class="n">signPayload</span><span class="o">,</span> <span class="n">apiSecret</span><span class="o">);</span>

            <span class="c1">// **打印调试信息**</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"==== 请求信息 ===="</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Timestamp (X-CH-TS): "</span> <span class="o">+</span> <span class="n">timestamp</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Sign Payload (待签名字符串): "</span> <span class="o">+</span> <span class="n">signPayload</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Signature (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request Body: "</span> <span class="o">+</span> <span class="n">bodyJson</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"=================="</span><span class="o">);</span>

            <span class="c1">// 发送请求</span>
            <span class="n">sendPostRequest</span><span class="o">(</span><span class="n">apiUrl</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">,</span> <span class="n">signature</span><span class="o">,</span> <span class="n">bodyJson</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// HMAC-SHA256 签名计算</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSha256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">// 发送 HTTP POST 请求</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendPostRequest</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiUrl</span><span class="o">,</span> <span class="nc">String</span> <span class="n">apiKey</span><span class="o">,</span> <span class="nc">String</span> <span class="n">timestamp</span><span class="o">,</span> <span class="nc">String</span> <span class="n">signature</span><span class="o">,</span> <span class="nc">String</span> <span class="n">bodyJson</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="n">apiUrl</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// 发送请求体</span>
            <span class="k">try</span> <span class="o">(</span><span class="nc">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">())</span> <span class="o">{</span>
                <span class="kt">byte</span><span class="o">[]</span> <span class="n">input</span> <span class="o">=</span> <span class="n">bodyJson</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">);</span>
                <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">input</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">input</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="c1">// 读取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response Code: "</span> <span class="o">+</span> <span class="n">responseCode</span><span class="o">);</span>

            <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNextLine</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">());</span>
            <span class="o">}</span>
            <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"bytes"</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"strconv"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// API 相关信息</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com"</span>
    <span class="n">requestPath</span> <span class="o">:=</span> <span class="s">"/sapi/v1/order/test"</span>
    <span class="n">apiURL</span> <span class="o">:=</span> <span class="n">url</span> <span class="o">+</span> <span class="n">requestPath</span>
    <span class="n">apiKey</span> <span class="o">:=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">apiSecret</span> <span class="o">:=</span> <span class="s">"您的API-SECRET"</span>

    <span class="c">// 生成当前毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">strconv</span><span class="o">.</span><span class="n">FormatInt</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span><span class="o">/</span><span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">),</span> <span class="m">10</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

    <span class="c">// 定义请求体 (JSON 格式)</span>
    <span class="n">bodyJSON</span> <span class="o">:=</span> <span class="s">`{"symbol":"BTCUSDT","price":"9300","volume":"1","side":"BUY","type":"LIMIT"}`</span>

    <span class="c">// 生成签名 (X-CH-SIGN)</span>
    <span class="n">signPayload</span> <span class="o">:=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span> <span class="o">+</span> <span class="n">bodyJSON</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">signPayload</span><span class="p">,</span> <span class="n">apiSecret</span><span class="p">)</span>

    <span class="c">// **打印调试信息**</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">signPayload</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Request Body:"</span><span class="p">,</span> <span class="n">bodyJSON</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">sendPostRequest</span><span class="p">(</span><span class="n">apiURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">bodyJSON</span><span class="p">)</span>
<span class="p">}</span>

<span class="c">// HMAC-SHA256 签名计算</span>
<span class="k">func</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 发送 HTTP POST 请求</span>
<span class="k">func</span> <span class="n">sendPostRequest</span><span class="p">(</span><span class="n">apiURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">bodyJSON</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>

    <span class="c">// 创建请求</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">apiURL</span><span class="p">,</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">bodyJSON</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error creating request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置 Headers</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error sending request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># API 相关信息
</span><span class="n">URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
<span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/sapi/v1/order/test"</span>
<span class="n">API_URL</span> <span class="o">=</span> <span class="n">URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>

<span class="c1"># 生成当前毫秒级时间戳
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="c1"># 请求方法
</span><span class="n">METHOD</span> <span class="o">=</span> <span class="s">"POST"</span>

<span class="c1"># 定义请求体 (JSON 格式)
</span><span class="n">body_json</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"symbol"</span><span class="p">:</span> <span class="s">"BTCUSDT"</span><span class="p">,</span>
    <span class="s">"price"</span><span class="p">:</span> <span class="s">"9300"</span><span class="p">,</span>
    <span class="s">"volume"</span><span class="p">:</span> <span class="s">"1"</span><span class="p">,</span>
    <span class="s">"side"</span><span class="p">:</span> <span class="s">"BUY"</span><span class="p">,</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"LIMIT"</span>
<span class="p">}</span>
<span class="n">body_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body_json</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>  <span class="c1"># 确保 JSON 字符串格式正确
</span>
<span class="c1"># 生成签名 (X-CH-SIGN)
</span><span class="n">sign_payload</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">METHOD</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span> <span class="o">+</span> <span class="n">body_str</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">sign_payload</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c1"># **打印调试信息**
</span><span class="k">print</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">sign_payload</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Request Body:"</span><span class="p">,</span> <span class="n">body_str</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

<span class="c1"># 发送请求
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">API_URL</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 打印响应
</span><span class="k">print</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>

<span class="c1">// API 相关信息</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$request_path</span> <span class="o">=</span> <span class="s2">"/sapi/v1/order/test"</span><span class="p">;</span>
<span class="nv">$api_url</span> <span class="o">=</span> <span class="nv">$url</span> <span class="mf">.</span> <span class="nv">$request_path</span><span class="p">;</span>
<span class="nv">$api_key</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$api_secret</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 请求方法</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="s2">"POST"</span><span class="p">;</span>

<span class="c1">// 定义请求体 (JSON 格式)</span>
<span class="nv">$body_json</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">([</span>
    <span class="s2">"symbol"</span> <span class="o">=&gt;</span> <span class="s2">"BTCUSDT"</span><span class="p">,</span>
    <span class="s2">"price"</span> <span class="o">=&gt;</span> <span class="s2">"9300"</span><span class="p">,</span>
    <span class="s2">"volume"</span> <span class="o">=&gt;</span> <span class="s2">"1"</span><span class="p">,</span>
    <span class="s2">"side"</span> <span class="o">=&gt;</span> <span class="s2">"BUY"</span><span class="p">,</span>
    <span class="s2">"type"</span> <span class="o">=&gt;</span> <span class="s2">"LIMIT"</span>
<span class="p">],</span> <span class="no">JSON_UNESCAPED_SLASHES</span><span class="p">);</span> <span class="c1">// 确保 JSON 格式正确</span>

<span class="c1">// 生成签名 (X-CH-SIGN)</span>
<span class="nv">$sign_payload</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$method</span> <span class="mf">.</span> <span class="nv">$request_path</span> <span class="mf">.</span> <span class="nv">$body_json</span><span class="p">;</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$sign_payload</span><span class="p">,</span> <span class="nv">$api_secret</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="k">echo</span> <span class="s2">"==== 请求信息 ====</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Timestamp (X-CH-TS): "</span> <span class="mf">.</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Sign Payload (待签名字符串): "</span> <span class="mf">.</span> <span class="nv">$sign_payload</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Signature (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$signature</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Request Body: "</span> <span class="mf">.</span> <span class="nv">$body_json</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"==================</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// 发送请求</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$api_key</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="p">];</span>

<span class="c1">// 使用 cURL 发送 POST 请求</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$api_url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$body_json</span><span class="p">);</span>

<span class="c1">// 执行请求并获取响应</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$http_code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 打印响应</span>
<span class="k">echo</span> <span class="s2">"Response Code: </span><span class="nv">$http_code</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Response Body: </span><span class="nv">$response</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://openapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/sapi/v1/order/test</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_URL</span> <span class="o">=</span> <span class="nx">URL</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">();</span>

<span class="c1">// 请求方法</span>
<span class="kd">const</span> <span class="nx">METHOD</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 定义请求体 (JSON 格式)</span>
<span class="kd">const</span> <span class="nx">bodyJson</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="na">symbol</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BTCUSDT</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">price</span><span class="p">:</span> <span class="dl">"</span><span class="s2">9300</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">volume</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">side</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BUY</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">LIMIT</span><span class="dl">"</span><span class="p">,</span>
<span class="p">});</span>

<span class="c1">// 生成签名 (X-CH-SIGN)</span>
<span class="kd">const</span> <span class="nx">signPayload</span> <span class="o">=</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">METHOD</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span> <span class="o">+</span> <span class="nx">bodyJson</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span>
  <span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">"</span><span class="s2">sha256</span><span class="dl">"</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">signPayload</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="dl">"</span><span class="s2">hex</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==== 请求信息 ====</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Timestamp (X-CH-TS):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">timestamp</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Sign Payload (待签名字符串):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signPayload</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Signature (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Request Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">bodyJson</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==================</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// 发送请求</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">axios</span>
  <span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">API_URL</span><span class="p">,</span> <span class="nx">bodyJson</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Code:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">});</span>

</code></pre></div>
<blockquote>
<p>body</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="nl">"symbol"</span><span class="p">:</span><span class="s2">"BTCUSDT"</span><span class="p">,</span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"9300"</span><span class="p">,</span><span class="nl">"volume"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="nl">"side"</span><span class="p">:</span><span class="s2">"BUY"</span><span class="p">,</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"LIMIT"</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>HMAC-SHA256 签名示例</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># 生成 X-CH-SIGN 签名指令</span>
<span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"1739520816000POST/sapi/v1/order/test{</span><span class="se">\"</span><span class="s2">symbol</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">BTCUSDT</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">price</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">9300</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">volume</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">1</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">side</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">BUY</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">LIMIT</span><span class="se">\"</span><span class="s2">}"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"709f1e13068f5e51123252d1e6851117"</span>

<span class="c"># 生成 X-CH-SIGN 签名数据</span>
<span class="o">(</span>stdin<span class="o">)=</span> e496db94ec168f23d836d7c7be7223135e6fe6d9593e9c985a9e4017ed78a3f3
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="c1">// HMAC-SHA256 签名计算</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSha256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
    <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
    <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
    <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
    <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="c">// HMAC-SHA256 签名计算</span>
<span class="k">func</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># 生成签名 (X-CH-SIGN)
</span><span class="n">sign_payload</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">METHOD</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span> <span class="o">+</span> <span class="n">body_str</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">sign_payload</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// 生成签名 (X-CH-SIGN)</span>
<span class="nv">$sign_payload</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$method</span> <span class="mf">.</span> <span class="nv">$request_path</span> <span class="mf">.</span> <span class="nv">$body_json</span><span class="p">;</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$sign_payload</span><span class="p">,</span> <span class="nv">$api_secret</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="c1">// 生成签名 (X-CH-SIGN)</span>
<span class="kd">const</span> <span class="nx">signPayload</span> <span class="o">=</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">METHOD</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span> <span class="o">+</span> <span class="nx">bodyJson</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span>
  <span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">"</span><span class="s2">sha256</span><span class="dl">"</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">signPayload</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="dl">"</span><span class="s2">hex</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="c1">// JavaScript 代码（归类在 HTTP 下）</span>

<span class="kd">let</span> <span class="nx">secretKey</span> <span class="o">=</span> <span class="nx">pm</span><span class="p">.</span><span class="nx">environment</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">SecretKey</span><span class="dl">"</span><span class="p">);</span>  <span class="c1">// 从环境变量中获取 API 密钥</span>
<span class="kd">let</span> <span class="nx">timestampString</span> <span class="o">=</span> <span class="nb">String</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span> <span class="c1">// 生成时间戳（精确到毫秒）</span>
<span class="kd">let</span> <span class="nx">method</span> <span class="o">=</span> <span class="nx">pm</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">method</span><span class="p">;</span> <span class="c1">// 获取请求方法 (GET, POST, etc.)</span>

<span class="kd">let</span> <span class="nx">fullUrl</span> <span class="o">=</span> <span class="nx">pm</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">url</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>
<span class="kd">let</span> <span class="nx">requestPath</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="o">+</span><span class="nx">fullUrl</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">).</span><span class="nx">slice</span><span class="p">(</span><span class="mi">3</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// 获取 `example.com` 之后的部分</span>

<span class="c1">// X-CH-SIGN的请求头是以timestamp + method + requestPath + body字符串（+表示字符串连接）</span>
<span class="c1">// body是请求主体的字符串（post only），如果是GET请求则body可省略。</span>
<span class="kd">let</span> <span class="nx">signPayload</span> <span class="o">=</span> <span class="nx">timestampString</span> <span class="o">+</span> <span class="nx">method</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">requestPath</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">method</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">pm</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span> <span class="p">?</span> <span class="nx">pm</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">raw</span> <span class="p">:</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">// 获取请求体（如果有）</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nx">parsedBody</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span> <span class="c1">// 尝试解析 JSON</span>
            <span class="kd">let</span> <span class="nx">bodyString</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">parsedBody</span><span class="p">);</span>
            <span class="nx">signPayload</span> <span class="o">+=</span> <span class="nx">bodyString</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">signPayload</span> <span class="o">+=</span> <span class="nx">body</span><span class="p">;</span> <span class="c1">// 如果不是 JSON，则直接附加原始 body</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">POST 方法处理 Body 数据 失败</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 签名使用HMAC SHA256算法，API-KEY所对应的API-Secret作为 HMAC SHA256 的密钥。</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto-js</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// 加载 CryptoJS 库</span>
<span class="c1">// 计算签名</span>
<span class="kd">let</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">HmacSHA256</span><span class="p">(</span><span class="nx">signPayload</span><span class="p">,</span> <span class="nx">secretKey</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="nx">crypto</span><span class="p">.</span><span class="nx">enc</span><span class="p">.</span><span class="nx">Hex</span><span class="p">);</span>

<span class="c1">// 设定 Headers</span>
<span class="nx">pm</span><span class="p">.</span><span class="nx">variables</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">xChTs</span><span class="dl">'</span><span class="p">,</span> <span class="nx">timestampString</span><span class="p">);</span>
<span class="nx">pm</span><span class="p">.</span><span class="nx">variables</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">xChSign</span><span class="dl">'</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre></div><h2 id='http'>HTTP返回代码的类型</h2>
<ul>
<li>  <code>HTTP 4XX</code> 错误码用于指示错误的请求内容、行为、格式。</li>
<li>  <code>HTTP 429</code> 错误码表示警告访问频次超限，即将被封IP。</li>
<li>  <code>HTTP 418</code> 表示收到 <code>429</code> 后继续访问，于是被封了。</li>
<li>  <code>HTTP 5XX</code> 返回错误码是内部系统错误；这说明这个问题是在服务器这边。在对待这个错误时，<strong>千万</strong>不要把它当成一个失败的任务，因为执行状态未知，有可能是成功也有可能是失败。</li>
<li>  <code>HTTP 504</code> 表示 API 服务端已经向业务核心提交了请求但未能获取响应，特别需要注意的是 <code>504</code> 代码不代表请求失败，而是未知。很可能已经得到了执行，也有可能执行失败，需要做进一步确认。</li>
<li>  任何接口都可能返回 ERROR（错误）；错误的返回 <code>payload</code> 如下：</li>
</ul>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1121</span><span class="p">,</span><span class="w">
    </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid symbol."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>其馀详见 <a href="#返回码类型">返回码类型</a></p>
<h2 id='12907e94be'>访问限制</h2>
<ul>
<li>  在每个接口下面会有限频的说明。</li>
<li>  违反频率限制都会收到 <code>HTTP 429</code>，这是一个警告。</li>
<li>  当收到 <code>HTTP 429</code> 告警时，调用者应当降低访问频率或者停止访问。</li>
</ul>
<h2 id='a3d140c825'>时间同步安全</h2>
<ul>
<li>  签名接口均需要在HTTP头中以 <code>X-CH-TS</code> 字段传递时间戳，其值应当是请求发送时刻的Unix时间戳（毫秒），E.g. <code>1528394129373</code>。</li>
<li>  服务器收到请求时会判断请求中的时间戳，如果是 <code>5000</code> 毫秒之前发出的，则请求会被认为无效。这个时间窗口值可以通过发送可选参数 <code>recvWindow</code> 来自定义。</li>
<li>  另外，如果服务器计算得出客户端时间戳在服务器时间的 <code>未来</code> 一秒以上，也会拒绝请求。</li>
</ul>

<blockquote>
<p>Java 逻辑伪代码：</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>if (timestamp &lt; (serverTime + 1000) &amp;&amp; (serverTime - timestamp) &lt;= recvWindow) {
  // process request
} else {
  // reject request
}
</code></pre></div>
<aside class="notice">关于交易时效性：互联网状况并不100%可靠，不可完全依赖，因此你的程序本地到交易所服务器的时延会有抖动。这是我们设置<code>recvWindow</code>的目的所在，如果你从事高频交易，对交易时效性有较高的要求，可以灵活设置<code>recvWindow</code>以达到你的要求。不推荐使用5秒以上的<code>recvWindow</code>。</aside>

<p><a name="返回码类型"></a></p>
<h1 id='8ec82582cd'>返回码类型</h1>
<p>异常码和错误码的描述和原因</p>

<aside class="warning">以下返回内容均为基本参数校验，若返回码不包含在以下列出的返回码类型中，则为业务层以外的错误提示返回，需要联系技术人员进行处理。</aside>
<h2 id='10xx'>10XX - 通用服务器和网络错误</h2><h3 id='code-1000-unknown'>Code:-1000 UNKNOWN</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1000</td>
<td style="text-align: left">UNKNOWN</td>
<td style="text-align: left">处理请求时发生未知错误</td>
<td style="text-align: left">处理请求时发生未知错误</td>
</tr>
</tbody></table>
<h3 id='code-1001-disconnected'>Code:-1001 DISCONNECTED</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1001</td>
<td style="text-align: left">DISCONNECTED</td>
<td style="text-align: left">内部错误；无法处理您的请求。请再试一次</td>
<td style="text-align: left">内部错误；无法处理您的请求</td>
</tr>
</tbody></table>
<h3 id='code-1002-unauthorized'>Code:-1002 UNAUTHORIZED</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1002</td>
<td style="text-align: left">UNAUTHORIZED</td>
<td style="text-align: left">您无权执行此请求。请求需要发送 API Key，我们建议在所有的请求头附加 <code>X-CH-APIKEY</code></td>
<td style="text-align: left">请求头中缺少 <code>X-CH-APIKEY</code></td>
</tr>
</tbody></table>
<h3 id='code-1003-too_many_requests'>Code:-1003 TOO_MANY_REQUESTS</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1003</td>
<td style="text-align: left">TOO_MANY_REQUESTS</td>
<td style="text-align: left">请求过于频繁超过限制</td>
<td style="text-align: left">请求过于频繁超过限制</td>
</tr>
</tbody></table>
<h3 id='code-1004-no_this_company'>Code:-1004 NO_THIS_COMPANY</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1004</td>
<td style="text-align: left">NO_THIS_COMPANY</td>
<td style="text-align: left">您无权执行此请求 user not exit</td>
<td style="text-align: left">您无权执行此请求 user not exit</td>
</tr>
</tbody></table>
<h3 id='code-1006-unexpected_resp'>Code:-1006 UNEXPECTED_RESP</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1006</td>
<td style="text-align: left">UNEXPECTED_RESP</td>
<td style="text-align: left">接收到了不符合预设格式的消息，下单状态未知</td>
<td style="text-align: left">接收到了不符合预设格式的消息，下单状态未知</td>
</tr>
</tbody></table>
<h3 id='code-1007-timeout'>Code:-1007 TIMEOUT</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1007</td>
<td style="text-align: left">TIMEOUT</td>
<td style="text-align: left">等待后端服务器响应超时。发送状态未知；执行状态未知</td>
<td style="text-align: left">请求超时</td>
</tr>
</tbody></table>
<h3 id='code-1014-unknown_order_composition'>Code:-1014 UNKNOWN_ORDER_COMPOSITION</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1014</td>
<td style="text-align: left">UNKNOWN_ORDER_COMPOSITION</td>
<td style="text-align: left">不支持的订单组合</td>
<td style="text-align: left">订单组合不存在或输入了错误的订单组合</td>
</tr>
</tbody></table>
<h3 id='code-1015-too_many_orders'>Code:-1015 TOO_MANY_ORDERS</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1015</td>
<td style="text-align: left">TOO_MANY_ORDERS</td>
<td style="text-align: left">订单太多。请减少你的订单数量</td>
<td style="text-align: left">下单数量超过最大数量限制</td>
</tr>
</tbody></table>
<h3 id='code-1016-service_shutting_down'>Code:-1016 SERVICE_SHUTTING_DOWN</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1016</td>
<td style="text-align: left">SERVICE_SHUTTING_DOWN</td>
<td style="text-align: left">服务器下线</td>
<td style="text-align: left">服务器已下线，无法访问该接口</td>
</tr>
</tbody></table>
<h3 id='code-1017-no_content_type'>Code:-1017 NO_CONTENT_TYPE</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1017</td>
<td style="text-align: left">NO_CONTENT_TYPE</td>
<td style="text-align: left">我们建议在所有的请求头附加Content-Type，并设置成application/json</td>
<td style="text-align: left">请求头中缺少Content-Type</td>
</tr>
</tbody></table>
<h3 id='code-1020-unsupported_operation'>Code:-1020 UNSUPPORTED_OPERATION</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1020</td>
<td style="text-align: left">UNSUPPORTED_OPERATION</td>
<td style="text-align: left">不支持此操作</td>
<td style="text-align: left">进行了错误的请求操作，需要同技术团队进行对接解决</td>
</tr>
</tbody></table>
<h3 id='code-1021-invalid_timestamp'>Code:-1021 INVALID_TIMESTAMP</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1021</td>
<td style="text-align: left">INVALID_TIMESTAMP</td>
<td style="text-align: left">无效的时间戳，时间偏移过大</td>
<td style="text-align: left">时间戳偏移偏大，服务器根据请求中的时间戳判定客户端时间比服务器时间提前了1秒钟以上</td>
</tr>
</tbody></table>
<h3 id='code-1022-invalid_signature'>Code:-1022 INVALID_SIGNATURE</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1022</td>
<td style="text-align: left">INVALID_SIGNATURE</td>
<td style="text-align: left">无效的签名</td>
<td style="text-align: left">签名验证失败</td>
</tr>
</tbody></table>
<h3 id='code-1023-unauthorized'>Code:-1023 UNAUTHORIZED</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1023</td>
<td style="text-align: left">UNAUTHORIZED</td>
<td style="text-align: left">您无权执行此请求。请求需要发送 timestamp，我们建议在所有的请求头附加 <code>X-CH-TS</code></td>
<td style="text-align: left">请求头中缺少 <code>X-CH-TS</code></td>
</tr>
</tbody></table>
<h3 id='code-1024-unauthorized'>Code:-1024 UNAUTHORIZED</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1024</td>
<td style="text-align: left">UNAUTHORIZED</td>
<td style="text-align: left">您无权执行此请求。请求需要发送 sign，我们建议在所有的请求头附加 <code>X-CH-SIGN</code></td>
<td style="text-align: left">请求头中缺少 <code>X-CH-SIGN</code></td>
</tr>
</tbody></table>
<h2 id='11xx'>11XX - 请求内容中的问题</h2><h3 id='code-1100-illegal_chars'>Code:-1100 ILLEGAL_CHARS</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1100</td>
<td style="text-align: left">ILLEGAL_CHARS</td>
<td style="text-align: left">请求中存在非法字符</td>
<td style="text-align: left">请求中存在非法字符</td>
</tr>
</tbody></table>
<h3 id='code-1101-too_many_parameters'>Code:-1101 TOO_MANY_PARAMETERS</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1101</td>
<td style="text-align: left">TOO_MANY_PARAMETERS</td>
<td style="text-align: left">发送的参数太多</td>
<td style="text-align: left">参数内容过多或检测到的参数值重复</td>
</tr>
</tbody></table>
<h3 id='code-1102-mandatory_param_empty_or_malformed'>Code:-1102 MANDATORY_PARAM_EMPTY_OR_MALFORMED</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1102</td>
<td style="text-align: left">MANDATORY_PARAM_EMPTY_OR_MALFORMED</td>
<td style="text-align: left">强制参数{0}未发送，为空/或格式错误</td>
<td style="text-align: left">参数为空，必传参数未传或不正确的入参格式</td>
</tr>
</tbody></table>
<h3 id='code-1103-unknown_param'>Code:-1103 UNKNOWN_PARAM</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1103</td>
<td style="text-align: left">UNKNOWN_PARAM</td>
<td style="text-align: left">发送了未知参数</td>
<td style="text-align: left">请求参数中的参数内容或者格式错误，请检查是否字段中包含空格</td>
</tr>
</tbody></table>
<h3 id='code-1104-unread_parameters'>Code:-1104 UNREAD_PARAMETERS</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1104</td>
<td style="text-align: left">UNREAD_PARAMETERS</td>
<td style="text-align: left">并非所有发送的参数都被读取</td>
<td style="text-align: left">并非所有发送的参数都被读取；读取了&#39;％s&#39;参数，但被发送了&#39;％s&#39;</td>
</tr>
</tbody></table>
<h3 id='code-1105-param_empty'>Code:-1105 PARAM_EMPTY</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1105</td>
<td style="text-align: left">PARAM_EMPTY</td>
<td style="text-align: left">参数{0}为空</td>
<td style="text-align: left">必传参数为空</td>
</tr>
</tbody></table>
<h3 id='code-1106-param_not_required'>Code:-1106 PARAM_NOT_REQUIRED</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1106</td>
<td style="text-align: left">PARAM_NOT_REQUIRED</td>
<td style="text-align: left">不需要发送此参数</td>
<td style="text-align: left">不需要发送参数&#39;％s&#39;</td>
</tr>
</tbody></table>
<h3 id='code-1111-bad_precision'>Code:-1111 BAD_PRECISION</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1111</td>
<td style="text-align: left">BAD_PRECISION</td>
<td style="text-align: left">精度超过此资产定义的最大值</td>
<td style="text-align: left">精度超过此资产定义的最大值</td>
</tr>
</tbody></table>
<h3 id='code-1112-no_depth'>Code:-1112 NO_DEPTH</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1112</td>
<td style="text-align: left">NO_DEPTH</td>
<td style="text-align: left">交易对没有挂单</td>
<td style="text-align: left">需要取消的该订单不存在</td>
</tr>
</tbody></table>
<h3 id='code-1116-invalid_order_type'>Code:-1116 INVALID_ORDER_TYPE</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1116</td>
<td style="text-align: left">INVALID_ORDER_TYPE</td>
<td style="text-align: left">无效订单类型</td>
<td style="text-align: left">无效订单类型</td>
</tr>
</tbody></table>
<h3 id='code-1117-invalid_side'>Code:-1117 INVALID_SIDE</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1117</td>
<td style="text-align: left">INVALID_SIDE</td>
<td style="text-align: left">无效买卖方向</td>
<td style="text-align: left">无效买卖方向</td>
</tr>
</tbody></table>
<h3 id='code-1121-bad_symbol'>Code:-1121 BAD_SYMBOL</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1121</td>
<td style="text-align: left">BAD_SYMBOL</td>
<td style="text-align: left">无效的合约</td>
<td style="text-align: left">币对名称输入错误或合约名称输入错误</td>
</tr>
</tbody></table>
<h3 id='code-1136-order_quantity_too_small'>Code:-1136 ORDER_QUANTITY_TOO_SMALL</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1136</td>
<td style="text-align: left">ORDER_QUANTITY_TOO_SMALL</td>
<td style="text-align: left">订单数量小于最小值</td>
<td style="text-align: left">订单quantity小于最小值</td>
</tr>
</tbody></table>
<h3 id='code-1138-order_price_wave_exceed'>Code:-1138 ORDER_PRICE_WAVE_EXCEED</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1138</td>
<td style="text-align: left">ORDER_PRICE_WAVE_EXCEED</td>
<td style="text-align: left">订单价格超出允许范围</td>
<td style="text-align: left">订单价格超出允许范围</td>
</tr>
</tbody></table>
<h3 id='code-1139-order_not_support_market'>Code:-1139 ORDER_NOT_SUPPORT_MARKET</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1139</td>
<td style="text-align: left">ORDER_NOT_SUPPORT_MARKET</td>
<td style="text-align: left">该币对不支持市价交易</td>
<td style="text-align: left">该交易对不支持市价交易</td>
</tr>
</tbody></table>
<h3 id='code-1145-order_not_support_cancellation'>Code:-1145 ORDER_NOT_SUPPORT_CANCELLATION</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1145</td>
<td style="text-align: left">ORDER_NOT_SUPPORT_CANCELLATION</td>
<td style="text-align: left">该订单状态不允许撤销</td>
<td style="text-align: left">订单不能够被取消</td>
</tr>
</tbody></table>
<h3 id='code-1147-price_volume_presion_error'>Code:-1147 PRICE_VOLUME_PRESION_ERROR</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">1147</td>
<td style="text-align: left">PRICE_VOLUME_PRESION_ERROR</td>
<td style="text-align: left">价格或数量精度超过最大限制</td>
<td style="text-align: left">订单的价格或数量超过最大限制</td>
</tr>
</tbody></table>
<h2 id='2xxx'>2XXX - 其他相关返回码</h2><h3 id='code-2013-no_such_order'>Code:-2013 NO_SUCH_ORDER</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">2013</td>
<td style="text-align: left">NO_SUCH_ORDER</td>
<td style="text-align: left">订单不存在</td>
<td style="text-align: left">订单不存在</td>
</tr>
</tbody></table>
<h3 id='code-2015-rejected_api_key'>Code:-2015 REJECTED_API_KEY</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">2015</td>
<td style="text-align: left">REJECTED_API_KEY</td>
<td style="text-align: left">无效的API密钥，IP或操作权限</td>
<td style="text-align: left">签名或IP不通过</td>
</tr>
</tbody></table>
<h3 id='code-2016-exchange_lock'>Code:-2016 EXCHANGE_LOCK</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">2016</td>
<td style="text-align: left">EXCHANGE_LOCK</td>
<td style="text-align: left">交易被冻结</td>
<td style="text-align: left">该用户交易被冻结</td>
</tr>
</tbody></table>
<h3 id='code-2017-balance_not_enough'>Code:-2017 BALANCE_NOT_ENOUGH</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">2017</td>
<td style="text-align: left">BALANCE_NOT_ENOUGH</td>
<td style="text-align: left">余额不足</td>
<td style="text-align: left">用户该账户中余额不足</td>
</tr>
</tbody></table>
<h3 id='code-2100-param_error'>Code:-2100 PARAM_ERROR</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">2100</td>
<td style="text-align: left">PARAM_ERROR</td>
<td style="text-align: left">参数问题</td>
<td style="text-align: left">参数输入错误</td>
</tr>
</tbody></table>
<h3 id='code-2200-order_create_fails'>Code:-2200 ORDER_CREATE_FAILS</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">2200</td>
<td style="text-align: left">ORDER_CREATE_FAILS</td>
<td style="text-align: left">Illegal IP</td>
<td style="text-align: left">不是信任的IP</td>
</tr>
</tbody></table>
<h3 id='code-35'>Code:35</h3>
<table><thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Tag</th>
<th style="text-align: left">msg</th>
<th style="text-align: left">原因</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">35</td>
<td style="text-align: left"></td>
<td style="text-align: left">禁止下单</td>
<td style="text-align: left">用户交易可能被限制</td>
</tr>
</tbody></table>
<h1 id='aec581acff'>枚举类型</h1><h2 id='b79e080266'>交易对</h2>
<table><thead>
<tr>
<th style="text-align: left">值</th>
<th style="text-align: left">说明</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><code>base</code></td>
<td style="text-align: left">指一个交易对的交易对象，即写在靠前部分的资产名</td>
</tr>
<tr>
<td style="text-align: left"><code>quote</code></td>
<td style="text-align: left">指一个交易对的定价资产，即写在靠后部分资产名</td>
</tr>
</tbody></table>
<h2 id='4e4ca9ca80'>订单状态</h2>
<table><thead>
<tr>
<th style="text-align: left">值</th>
<th style="text-align: left">说明</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><code>New Order</code></td>
<td style="text-align: left">新建订单</td>
</tr>
<tr>
<td style="text-align: left"><code>Partially Filled</code></td>
<td style="text-align: left">部分成交</td>
</tr>
<tr>
<td style="text-align: left"><code>Filled</code></td>
<td style="text-align: left">全部成交</td>
</tr>
<tr>
<td style="text-align: left"><code>Cancelled</code></td>
<td style="text-align: left">已撤销</td>
</tr>
<tr>
<td style="text-align: left"><code>To be Cancelled</code></td>
<td style="text-align: left">正在撤销中</td>
</tr>
<tr>
<td style="text-align: left"><code>Partially Filled/Cancelled</code></td>
<td style="text-align: left">部分成交/已取消</td>
</tr>
<tr>
<td style="text-align: left"><code>REJECTED</code></td>
<td style="text-align: left">订单被拒绝</td>
</tr>
</tbody></table>
<h2 id='8a2949b872'>订单种类</h2>
<table><thead>
<tr>
<th style="text-align: left">值</th>
<th style="text-align: left">说明</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><code>LIMIT</code></td>
<td style="text-align: left">限价单</td>
</tr>
<tr>
<td style="text-align: left"><code>MARKET</code></td>
<td style="text-align: left">市价单</td>
</tr>
</tbody></table>
<h2 id='ba0138f8ea'>订单方向</h2>
<table><thead>
<tr>
<th style="text-align: left">值</th>
<th style="text-align: left">说明</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><code>BUY</code></td>
<td style="text-align: left">买单</td>
</tr>
<tr>
<td style="text-align: left"><code>SELL</code></td>
<td style="text-align: left">卖单</td>
</tr>
</tbody></table>
<h2 id='k'>K线间隔</h2>
<table><thead>
<tr>
<th style="text-align: left">值</th>
<th style="text-align: left">说明</th>
<th style="text-align: left">示例</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><code>min</code></td>
<td style="text-align: left">分钟</td>
<td style="text-align: left"><code>1min</code>, <code>5min</code>, <code>15min</code>, <code>30min</code>, <code>60min</code></td>
</tr>
<tr>
<td style="text-align: left"><code>h</code></td>
<td style="text-align: left">小时</td>
<td style="text-align: left"><code>1h</code>, <code>4h</code></td>
</tr>
<tr>
<td style="text-align: left"><code>day</code></td>
<td style="text-align: left">天</td>
<td style="text-align: left"><code>1day</code></td>
</tr>
<tr>
<td style="text-align: left"><code>week</code></td>
<td style="text-align: left">周</td>
<td style="text-align: left"><code>1week</code></td>
</tr>
<tr>
<td style="text-align: left"><code>month</code></td>
<td style="text-align: left">月</td>
<td style="text-align: left"></td>
</tr>
</tbody></table>
<h1 id='57aa173947'>现货交易</h1><h2 id='4f270f1396'>公共</h2><h3 id='none'>安全类型: None</h3>
<aside class='notice'>公共类型接口不需要API-key或者签名就能自由访问。</aside>
<h3 id='10b7d8eccc'>测试连接</h3>
<p><code>GET https://openapi.fameex.com/sapi/v1/ping</code></p>

<p>测试REST API的连通性</p>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://openapi.fameex.com/sapi/v1/ping

// request headers
Content-Type:application/json
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://openapi.fameex.com/sapi/v1/ping"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="c1">// 使用 URI 创建 URL</span>
      <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="s">"https://openapi.fameex.com/sapi/v1/ping"</span><span class="o">);</span>
      <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>

      <span class="c1">// 读取响应</span>
      <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
      <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
      <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
      <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

      <span class="c1">// 输出结果</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response: "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com/sapi/v1/ping"</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应体</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"读取响应失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 打印响应</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"服务器返回:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com/sapi/v1/ping"</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>  <span class="c1"># 检查请求是否成功
</span>    <span class="k">print</span><span class="p">(</span><span class="s">"Response:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
<span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"请求错误:"</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com/sapi/v1/ping"</span><span class="p">;</span>

<span class="c1">// 初始化 cURL</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>

<span class="c1">// 设置 cURL 选项</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 跳过 SSL 证书验证（如果 API 需要）</span>

<span class="c1">// 执行请求</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 检查是否有错误</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"cURL 错误："</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Response: "</span> <span class="mf">.</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 关闭 cURL</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">https</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://openapi.fameex.com/sapi/v1/ping</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">https</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>

  <span class="c1">// A chunk of data has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">data</span> <span class="o">+=</span> <span class="nx">chunk</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="c1">// The whole response has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">end</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>

<span class="p">}).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">请求错误:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre></div><h3 id='e76ff2af0c'>服务器时间</h3>
<p><code>GET https://openapi.fameex.com/sapi/v1/time</code></p>

<p>获取服务器时间</p>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://openapi.fameex.com/sapi/v1/time

// request headers
Content-Type:application/json
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://openapi.fameex.com/sapi/v1/time"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="c1">// 使用 URI 创建 URL</span>
      <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="s">"https://openapi.fameex.com/sapi/v1/time"</span><span class="o">);</span>
      <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>

      <span class="c1">// 读取响应</span>
      <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
      <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
      <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
      <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

      <span class="c1">// 输出结果</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response: "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com/sapi/v1/time"</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应体</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"读取响应失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 打印响应</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"服务器返回:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com/sapi/v1/time"</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>  <span class="c1"># 检查请求是否成功
</span>    <span class="k">print</span><span class="p">(</span><span class="s">"Response:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
<span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"请求错误:"</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com/sapi/v1/time"</span><span class="p">;</span>

<span class="c1">// 初始化 cURL</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>

<span class="c1">// 设置 cURL 选项</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 跳过 SSL 证书验证（如果 API 需要）</span>

<span class="c1">// 执行请求</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 检查是否有错误</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"cURL 错误："</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Response: "</span> <span class="mf">.</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 关闭 cURL</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">https</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://openapi.fameex.com/sapi/v1/time</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">https</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>

  <span class="c1">// A chunk of data has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">data</span> <span class="o">+=</span> <span class="nx">chunk</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="c1">// The whole response has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">end</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>

<span class="p">}).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">请求错误:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"China Standard Time"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"serverTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1705039779880</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">timezone</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>China Standard Time</code></td>
<td style="text-align: left">服务器时区</td>
</tr>
<tr>
<td style="text-align: left">serverTime</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>1705039779880</code></td>
<td style="text-align: left">服务器时间戳</td>
</tr>
</tbody></table>

<p><a name="现货交易-公共-币对列表"></a></p>
<h3 id='df6185ef0f'>币对列表</h3>
<p><code>GET https://openapi.fameex.com/sapi/v1/symbols</code></p>

<p>获取市场支持的币对集合</p>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://openapi.fameex.com/sapi/v1/symbols

// request headers
Content-Type:application/json
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://openapi.fameex.com/sapi/v1/symbols"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="c1">// 使用 URI 创建 URL</span>
      <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="s">"https://openapi.fameex.com/sapi/v1/symbols"</span><span class="o">);</span>
      <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>

      <span class="c1">// 读取响应</span>
      <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
      <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
      <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
      <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

      <span class="c1">// 输出结果</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response: "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com/sapi/v1/symbols"</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应体</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"读取响应失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 打印响应</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"服务器返回:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com/sapi/v1/symbols"</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>  <span class="c1"># 检查请求是否成功
</span>    <span class="k">print</span><span class="p">(</span><span class="s">"Response:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
<span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"请求错误:"</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com/sapi/v1/symbols"</span><span class="p">;</span>

<span class="c1">// 初始化 cURL</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>

<span class="c1">// 设置 cURL 选项</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 跳过 SSL 证书验证（如果 API 需要）</span>

<span class="c1">// 执行请求</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 检查是否有错误</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"cURL 错误："</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Response: "</span> <span class="mf">.</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 关闭 cURL</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">https</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://openapi.fameex.com/sapi/v1/symbols</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">https</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>

  <span class="c1">// A chunk of data has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">data</span> <span class="o">+=</span> <span class="nx">chunk</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="c1">// The whole response has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">end</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>

<span class="p">}).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">请求错误:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"symbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"quantityPrecision"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
            </span><span class="nl">"limitVolumeMin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sccadai"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pricePrecision"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketBuyMin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketSellMin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"baseAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SCCA"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"limitPriceMin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quoteAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DAI"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"quantityPrecision"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
            </span><span class="nl">"limitVolumeMin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btcusdt"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pricePrecision"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketBuyMin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketSellMin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"baseAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"limitPriceMin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quoteAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"quantityPrecision"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
            </span><span class="nl">"limitVolumeMin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bchusdt"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pricePrecision"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketBuyMin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketSellMin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"baseAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BCH"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"limitPriceMin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quoteAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"quantityPrecision"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"limitVolumeMin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"etcusdt"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pricePrecision"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketBuyMin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketSellMin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"baseAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"limitPriceMin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quoteAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"quantityPrecision"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"limitVolumeMin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ltcbtc"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"pricePrecision"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketBuyMin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"marketSellMin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"baseAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"limitPriceMin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quoteAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">symbol</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>btcusdt</code></td>
<td style="text-align: left"><code>小写</code>币对名称</td>
</tr>
<tr>
<td style="text-align: left">baseAsset</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>BTC</code></td>
<td style="text-align: left"><code>基准货币</code></td>
</tr>
<tr>
<td style="text-align: left">quoteAsset</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>USDT</code></td>
<td style="text-align: left"><code>计价货币</code></td>
</tr>
<tr>
<td style="text-align: left">pricePrecision</td>
<td style="text-align: left">integer</td>
<td style="text-align: left"><code>6</code></td>
<td style="text-align: left">价格精度</td>
</tr>
<tr>
<td style="text-align: left">quantityPrecision</td>
<td style="text-align: left">integer</td>
<td style="text-align: left"><code>3</code></td>
<td style="text-align: left">数量精度</td>
</tr>
<tr>
<td style="text-align: left">limitVolumeMin</td>
<td style="text-align: left">BigDecimal</td>
<td style="text-align: left"><code>0.0001</code></td>
<td style="text-align: left">限价单最小数量限制</td>
</tr>
<tr>
<td style="text-align: left">marketBuyMin</td>
<td style="text-align: left">BigDecimal</td>
<td style="text-align: left"><code>0.0001</code></td>
<td style="text-align: left">市价单最小购买数量</td>
</tr>
<tr>
<td style="text-align: left">marketSellMin</td>
<td style="text-align: left">BigDecimal</td>
<td style="text-align: left"><code>0.0001</code></td>
<td style="text-align: left">市价单最小卖出数量</td>
</tr>
<tr>
<td style="text-align: left">limitPriceMin</td>
<td style="text-align: left">BigDecimal</td>
<td style="text-align: left"><code>0.001</code></td>
<td style="text-align: left">限价单最小价格限制</td>
</tr>
</tbody></table>
<h2 id='8e4b902c12'>行情</h2><h3 id='none-2'>安全类型: None</h3>
<aside class='notice'>行情下方的接口不需要API-Key或者签名就能自由访问。</aside>
<h3 id='b754edd9d5'>订单薄</h3>
<p><code>GET https://openapi.fameex.com/sapi/v1/depth</code></p>

<p>获取市场订单薄深度信息</p>

<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">symbol<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>大写</code>币对名称，例如：<code>BTCUSDT</code></td>
</tr>
<tr>
<td style="text-align: left">limit</td>
<td style="text-align: left">integer</td>
<td style="text-align: left">默认：100；最大：100</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://openapi.fameex.com/sapi/v1/depth?symbol=BTCUSDT&amp;limit=100

// request headers
Content-Type: application/json
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># 设置 API 相关信息</span>
<span class="nv">API_URL</span><span class="o">=</span><span class="s2">"https://openapi.fameex.com"</span>
<span class="nv">REQUEST_URL</span><span class="o">=</span><span class="s2">"/sapi/v1/depth"</span>
<span class="nv">QUERY_STRING</span><span class="o">=</span><span class="s2">"?symbol=BTCUSDT&amp;limit=100"</span>

<span class="c"># 计算完整的请求路径</span>
<span class="nv">REQUEST_PATH</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">REQUEST_URL</span><span class="k">}${</span><span class="nv">QUERY_STRING</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">FULL_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">API_URL</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>

<span class="c"># 定义请求方法</span>
<span class="nv">METHOD</span><span class="o">=</span><span class="s2">"GET"</span>

<span class="c"># **打印调试信息**</span>
<span class="nb">echo</span> <span class="s2">"==== 请求信息 ===="</span>
<span class="nb">echo</span> <span class="s2">"Request URL: </span><span class="k">${</span><span class="nv">FULL_URL</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"=================="</span>

<span class="c"># 发送 GET 请求</span>
curl <span class="nt">-X</span> GET <span class="s2">"</span><span class="nv">$FULL_URL</span><span class="s2">"</span> 
<span class="se">\ </span><span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.Instant</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FameexApiRequest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// API 相关信息</span>
            <span class="nc">String</span> <span class="n">apiUrl</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">requestUrl</span> <span class="o">=</span> <span class="s">"/sapi/v1/depth"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">queryString</span> <span class="o">=</span> <span class="s">"?symbol=BTCUSDT&amp;limit=100"</span><span class="o">;</span>

            <span class="c1">// 计算完整的请求路径</span>
            <span class="nc">String</span> <span class="n">requestPath</span> <span class="o">=</span> <span class="n">requestUrl</span> <span class="o">+</span> <span class="n">queryString</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">fullUrl</span> <span class="o">=</span> <span class="n">apiUrl</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"GET"</span><span class="o">;</span>

            <span class="c1">// **打印调试信息**</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"==== 请求信息 ===="</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request URL: "</span> <span class="o">+</span> <span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"=================="</span><span class="o">);</span>

            <span class="c1">// 发送 GET 请求</span>
            <span class="n">sendGetRequest</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// 发送 HTTP GET 请求</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendGetRequest</span><span class="o">(</span><span class="nc">String</span> <span class="n">fullUrl</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>

            <span class="c1">// 设置请求头</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>

            <span class="c1">// 发送请求并获取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response Code: "</span> <span class="o">+</span> <span class="n">responseCode</span><span class="o">);</span>

            <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNextLine</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">());</span>
            <span class="o">}</span>
            <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// API 相关信息</span>
    <span class="n">apiURL</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com"</span>
    <span class="n">requestURL</span> <span class="o">:=</span> <span class="s">"/sapi/v1/depth"</span>
    <span class="n">queryString</span> <span class="o">:=</span> <span class="s">"?symbol=BTCUSDT&amp;limit=100"</span>

    <span class="c">// 计算完整的请求路径</span>
    <span class="n">requestPath</span> <span class="o">:=</span> <span class="n">requestURL</span> <span class="o">+</span> <span class="n">queryString</span>
    <span class="n">fullURL</span> <span class="o">:=</span> <span class="n">apiURL</span> <span class="o">+</span> <span class="n">requestPath</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"GET"</span>

    <span class="c">// **打印调试信息**</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">method</span><span class="p">)</span>
<span class="p">}</span>

<span class="c">// 发送 HTTP GET 请求</span>
<span class="k">func</span> <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">method</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>

    <span class="c">// 创建请求</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">,</span> <span class="no">nil</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error creating request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置 Headers</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error sending request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">resp</span><span class="o">.</span><span class="n">StatusCode</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
<span class="n">REQUEST_URL</span> <span class="o">=</span> <span class="s">"/sapi/v1/depth"</span>
<span class="n">QUERY_STRING</span> <span class="o">=</span> <span class="s">"?symbol=BTCUSDT&amp;limit=100"</span>

<span class="c1"># 计算完整的请求路径
</span><span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="n">REQUEST_URL</span> <span class="o">+</span> <span class="n">QUERY_STRING</span>
<span class="n">FULL_URL</span> <span class="o">=</span> <span class="n">API_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>

<span class="c1"># **打印调试信息**
</span><span class="k">print</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">FULL_URL</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

<span class="c1"># 发送 GET 请求
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">FULL_URL</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="c1"># 打印响应
</span><span class="k">print</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>

<span class="c1">// API 相关信息</span>
<span class="nv">$API_URL</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$REQUEST_URL</span> <span class="o">=</span> <span class="s2">"/sapi/v1/depth"</span><span class="p">;</span>
<span class="nv">$QUERY_STRING</span> <span class="o">=</span> <span class="s2">"?symbol=BTCUSDT&amp;limit=100"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="nv">$REQUEST_PATH</span> <span class="o">=</span> <span class="nv">$REQUEST_URL</span> <span class="mf">.</span> <span class="nv">$QUERY_STRING</span><span class="p">;</span>
<span class="nv">$FULL_URL</span> <span class="o">=</span> <span class="nv">$API_URL</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// **打印调试信息**</span>
<span class="k">echo</span> <span class="s2">"==== 请求信息 ====</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Request URL: "</span> <span class="mf">.</span> <span class="nv">$FULL_URL</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"==================</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// 发送 GET 请求</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
<span class="p">];</span>

<span class="c1">// 使用 cURL 发送 GET 请求</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$FULL_URL</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// 执行请求并获取响应</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$http_code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 打印响应</span>
<span class="k">echo</span> <span class="s2">"Response Code: </span><span class="nv">$http_code</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Response Body: </span><span class="nv">$response</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="cp">?&gt;</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://openapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/sapi/v1/depth</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">QUERY_STRING</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">?symbol=BTCUSDT&amp;limit=100</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="nx">REQUEST_URL</span> <span class="o">+</span> <span class="nx">QUERY_STRING</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">FULL_URL</span> <span class="o">=</span> <span class="nx">API_URL</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// **打印调试信息**</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==== 请求信息 ====</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Request URL:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">FULL_URL</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==================</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// 发送 GET 请求</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">axios</span>
  <span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">FULL_URL</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Code:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">});</span>

</code></pre></div>
<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1701658276000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">[</span><span class="w">
            </span><span class="mf">3.90000000</span><span class="p">,</span><span class="w">     </span><span class="err">//</span><span class="w"> </span><span class="err">价格</span><span class="w">
            </span><span class="mf">43.10000000</span><span class="w">    </span><span class="err">//</span><span class="w"> </span><span class="err">数量</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="p">[</span><span class="w">
            </span><span class="mf">4.00000000</span><span class="p">,</span><span class="w">
            </span><span class="mf">19.20000000</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"asks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">[</span><span class="w">
            </span><span class="mf">4.00000200</span><span class="p">,</span><span class="w">     </span><span class="err">//</span><span class="w"> </span><span class="err">价格</span><span class="w">
            </span><span class="mf">12.00000000</span><span class="w">     </span><span class="err">//</span><span class="w"> </span><span class="err">数量</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="p">[</span><span class="w">
            </span><span class="mf">5.10000000</span><span class="p">,</span><span class="w">
            </span><span class="mf">28.00000000</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">time</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>1595563624731</code></td>
<td style="text-align: left">当前时间戳</td>
</tr>
<tr>
<td style="text-align: left">bids</td>
<td style="text-align: left">array</td>
<td style="text-align: left"><code>[[3.9,43.1],[4.0,19.2]]</code></td>
<td style="text-align: left">订单薄买盘信息，数组长度为2，角标1为价格，类型为float；角标2为当前价格对应的数量，类型为float</td>
</tr>
<tr>
<td style="text-align: left">asks</td>
<td style="text-align: left">array</td>
<td style="text-align: left"><code>[[4.0,12.0],[5.1,28.0]]</code></td>
<td style="text-align: left">订单薄卖盘信息，数组长度为2，角标1为价格，类型为float；角标2为当前价格对应的数量，类型为float</td>
</tr>
</tbody></table>

<p>bids和asks所对应的信息代表了订单薄的所有价格以及价格对应的数量的信息, 由最优价格从上到下排列</p>
<h3 id='ticker'>行情Ticker</h3>
<p><code>GET https://openapi.fameex.com/sapi/v1/ticker</code></p>

<p>获取24小时价格变化数据</p>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://openapi.fameex.com/sapi/v1/ticker?symbol=BTCUSDT

// request headers
Content-Type: application/json
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># 设置 API 相关信息</span>
<span class="nv">API_URL</span><span class="o">=</span><span class="s2">"https://openapi.fameex.com"</span>
<span class="nv">REQUEST_URL</span><span class="o">=</span><span class="s2">"/sapi/v1/ticker"</span>
<span class="nv">QUERY_STRING</span><span class="o">=</span><span class="s2">"?symbol=BTCUSDT"</span>

<span class="c"># 计算完整的请求路径</span>
<span class="nv">REQUEST_PATH</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">REQUEST_URL</span><span class="k">}${</span><span class="nv">QUERY_STRING</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">FULL_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">API_URL</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>

<span class="c"># 定义请求方法</span>
<span class="nv">METHOD</span><span class="o">=</span><span class="s2">"GET"</span>

<span class="c"># **打印调试信息**</span>
<span class="nb">echo</span> <span class="s2">"==== 请求信息 ===="</span>
<span class="nb">echo</span> <span class="s2">"Request URL: </span><span class="k">${</span><span class="nv">FULL_URL</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"=================="</span>

<span class="c"># 发送 GET 请求</span>
curl <span class="nt">-X</span> GET <span class="s2">"</span><span class="nv">$FULL_URL</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.Instant</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FameexApiRequest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// API 相关信息</span>
            <span class="nc">String</span> <span class="n">apiUrl</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">requestUrl</span> <span class="o">=</span> <span class="s">"/sapi/v1/ticker"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">queryString</span> <span class="o">=</span> <span class="s">"?symbol=BTCUSDT"</span><span class="o">;</span>

            <span class="c1">// 计算完整的请求路径</span>
            <span class="nc">String</span> <span class="n">requestPath</span> <span class="o">=</span> <span class="n">requestUrl</span> <span class="o">+</span> <span class="n">queryString</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">fullUrl</span> <span class="o">=</span> <span class="n">apiUrl</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"GET"</span><span class="o">;</span>

            <span class="c1">// **打印调试信息**</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"==== 请求信息 ===="</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request URL: "</span> <span class="o">+</span> <span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"=================="</span><span class="o">);</span>

            <span class="c1">// 发送 GET 请求</span>
            <span class="n">sendGetRequest</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// 发送 HTTP GET 请求</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendGetRequest</span><span class="o">(</span><span class="nc">String</span> <span class="n">fullUrl</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>

            <span class="c1">// 设置请求头</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>

            <span class="c1">// 发送请求并获取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response Code: "</span> <span class="o">+</span> <span class="n">responseCode</span><span class="o">);</span>

            <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNextLine</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">());</span>
            <span class="o">}</span>
            <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// API 相关信息</span>
    <span class="n">apiURL</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com"</span>
    <span class="n">requestURL</span> <span class="o">:=</span> <span class="s">"/sapi/v1/ticker"</span>
    <span class="n">queryString</span> <span class="o">:=</span> <span class="s">"?symbol=BTCUSDT"</span>

    <span class="c">// 计算完整的请求路径</span>
    <span class="n">requestPath</span> <span class="o">:=</span> <span class="n">requestURL</span> <span class="o">+</span> <span class="n">queryString</span>
    <span class="n">fullURL</span> <span class="o">:=</span> <span class="n">apiURL</span> <span class="o">+</span> <span class="n">requestPath</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"GET"</span>

    <span class="c">// **打印调试信息**</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">method</span><span class="p">)</span>
<span class="p">}</span>

<span class="c">// 发送 HTTP GET 请求</span>
<span class="k">func</span> <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">method</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>

    <span class="c">// 创建请求</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">,</span> <span class="no">nil</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error creating request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置 Headers</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error sending request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">resp</span><span class="o">.</span><span class="n">StatusCode</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
<span class="n">REQUEST_URL</span> <span class="o">=</span> <span class="s">"/sapi/v1/ticker"</span>
<span class="n">QUERY_STRING</span> <span class="o">=</span> <span class="s">"?symbol=BTCUSDT"</span>

<span class="c1"># 计算完整的请求路径
</span><span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="n">REQUEST_URL</span> <span class="o">+</span> <span class="n">QUERY_STRING</span>
<span class="n">FULL_URL</span> <span class="o">=</span> <span class="n">API_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>

<span class="c1"># **打印调试信息**
</span><span class="k">print</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">FULL_URL</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

<span class="c1"># 发送 GET 请求
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">FULL_URL</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="c1"># 打印响应
</span><span class="k">print</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>

<span class="c1">// API 相关信息</span>
<span class="nv">$API_URL</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$REQUEST_URL</span> <span class="o">=</span> <span class="s2">"/sapi/v1/ticker"</span><span class="p">;</span>
<span class="nv">$QUERY_STRING</span> <span class="o">=</span> <span class="s2">"?symbol=BTCUSDT"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="nv">$REQUEST_PATH</span> <span class="o">=</span> <span class="nv">$REQUEST_URL</span> <span class="mf">.</span> <span class="nv">$QUERY_STRING</span><span class="p">;</span>
<span class="nv">$FULL_URL</span> <span class="o">=</span> <span class="nv">$API_URL</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// **打印调试信息**</span>
<span class="k">echo</span> <span class="s2">"==== 请求信息 ====</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Request URL: "</span> <span class="mf">.</span> <span class="nv">$FULL_URL</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"==================</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// 发送 GET 请求</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
<span class="p">];</span>

<span class="c1">// 使用 cURL 发送 GET 请求</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$FULL_URL</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// 执行请求并获取响应</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$http_code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 打印响应</span>
<span class="k">echo</span> <span class="s2">"Response Code: </span><span class="nv">$http_code</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Response Body: </span><span class="nv">$response</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="cp">?&gt;</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://openapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/sapi/v1/ticker</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">QUERY_STRING</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">?symbol=BTCUSDT</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="nx">REQUEST_URL</span> <span class="o">+</span> <span class="nx">QUERY_STRING</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">FULL_URL</span> <span class="o">=</span> <span class="nx">API_URL</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// **打印调试信息**</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==== 请求信息 ====</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Request URL:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">FULL_URL</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==================</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// 发送 GET 请求</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">axios</span>
  <span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">FULL_URL</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Code:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">symbol<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">大写币对名称，例如：<code>BTCUSDT</code></td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">22400.0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="mf">9900.51</span><span class="p">,</span><span class="w">
    </span><span class="nl">"vol"</span><span class="p">:</span><span class="w"> </span><span class="mf">4691.0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="mf">9211.60</span><span class="p">,</span><span class="w">
    </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="mf">9100.34</span><span class="p">,</span><span class="w">
    </span><span class="nl">"buy"</span><span class="p">:</span><span class="w"> </span><span class="mf">9210.0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sell"</span><span class="p">:</span><span class="w"> </span><span class="mf">9213.0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rose"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+0.05"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1595563624731</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">time</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>1595563624731</code></td>
<td style="text-align: left">当前时间戳</td>
</tr>
<tr>
<td style="text-align: left">high</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>9900.51</code></td>
<td style="text-align: left">最高价</td>
</tr>
<tr>
<td style="text-align: left">low</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>9100.34</code></td>
<td style="text-align: left">最低价</td>
</tr>
<tr>
<td style="text-align: left">last</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>9211.60</code></td>
<td style="text-align: left">最新成交价</td>
</tr>
<tr>
<td style="text-align: left">vol</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>4691.0</code></td>
<td style="text-align: left">交易量</td>
</tr>
<tr>
<td style="text-align: left">amount</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>22400.0</code></td>
<td style="text-align: left">交易额</td>
</tr>
<tr>
<td style="text-align: left">buy</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>9210.0</code></td>
<td style="text-align: left">买一价格</td>
</tr>
<tr>
<td style="text-align: left">sell</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>9213.0</code></td>
<td style="text-align: left">卖一价格</td>
</tr>
<tr>
<td style="text-align: left">rose</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>+0.05</code></td>
<td style="text-align: left">涨跌幅，<code>+</code>为涨，<code>-</code>为跌，<code>+0.05</code>为涨<code>5%</code></td>
</tr>
</tbody></table>
<h3 id='ticker-v2'>行情Ticker-V2</h3>
<p><code>GET https://openapi.fameex.com/v2/public/ticker</code></p>

<p>获取24小时价格变化数据</p>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://openapi.fameex.com/v2/public/ticker

// request headers
Content-Type: application/json
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># 设置 API 相关信息</span>
<span class="nv">API_URL</span><span class="o">=</span><span class="s2">"https://openapi.fameex.com"</span>
<span class="nv">REQUEST_URL</span><span class="o">=</span><span class="s2">"/v2/public/ticker"</span>

<span class="c"># 计算完整的请求路径</span>
<span class="nv">REQUEST_PATH</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">REQUEST_URL</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">FULL_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">API_URL</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>

<span class="c"># 定义请求方法</span>
<span class="nv">METHOD</span><span class="o">=</span><span class="s2">"GET"</span>

<span class="c"># **打印调试信息**</span>
<span class="nb">echo</span> <span class="s2">"==== 请求信息 ===="</span>
<span class="nb">echo</span> <span class="s2">"Request URL: </span><span class="k">${</span><span class="nv">FULL_URL</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"=================="</span>

<span class="c"># 发送 GET 请求</span>
curl <span class="nt">-X</span> GET <span class="s2">"</span><span class="nv">$FULL_URL</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.Instant</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FameexApiRequest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// API 相关信息</span>
            <span class="nc">String</span> <span class="n">apiUrl</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">requestUrl</span> <span class="o">=</span> <span class="s">"/v2/public/ticker"</span><span class="o">;</span>

            <span class="c1">// 计算完整的请求路径</span>
            <span class="nc">String</span> <span class="n">requestPath</span> <span class="o">=</span> <span class="n">requestUrl</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">fullUrl</span> <span class="o">=</span> <span class="n">apiUrl</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"GET"</span><span class="o">;</span>

            <span class="c1">// **打印调试信息**</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"==== 请求信息 ===="</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request URL: "</span> <span class="o">+</span> <span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"=================="</span><span class="o">);</span>

            <span class="c1">// 发送 GET 请求</span>
            <span class="n">sendGetRequest</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// 发送 HTTP GET 请求</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendGetRequest</span><span class="o">(</span><span class="nc">String</span> <span class="n">fullUrl</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>

            <span class="c1">// 设置请求头</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>

            <span class="c1">// 发送请求并获取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response Code: "</span> <span class="o">+</span> <span class="n">responseCode</span><span class="o">);</span>

            <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNextLine</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">());</span>
            <span class="o">}</span>
            <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// API 相关信息</span>
    <span class="n">apiURL</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com"</span>
    <span class="n">requestURL</span> <span class="o">:=</span> <span class="s">"/v2/public/ticker"</span>

    <span class="c">// 计算完整的请求路径</span>
    <span class="n">requestPath</span> <span class="o">:=</span> <span class="n">requestURL</span>
    <span class="n">fullURL</span> <span class="o">:=</span> <span class="n">apiURL</span> <span class="o">+</span> <span class="n">requestPath</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"GET"</span>

    <span class="c">// **打印调试信息**</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">method</span><span class="p">)</span>
<span class="p">}</span>

<span class="c">// 发送 HTTP GET 请求</span>
<span class="k">func</span> <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">method</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>

    <span class="c">// 创建请求</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">,</span> <span class="no">nil</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error creating request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置 Headers</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error sending request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">resp</span><span class="o">.</span><span class="n">StatusCode</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
<span class="n">REQUEST_URL</span> <span class="o">=</span> <span class="s">"/v2/public/ticker"</span>

<span class="c1"># 计算完整的请求路径
</span><span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="n">REQUEST_URL</span>
<span class="n">FULL_URL</span> <span class="o">=</span> <span class="n">API_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>

<span class="c1"># **打印调试信息**
</span><span class="k">print</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">FULL_URL</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

<span class="c1"># 发送 GET 请求
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">FULL_URL</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="c1"># 打印响应
</span><span class="k">print</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>

<span class="c1">// API 相关信息</span>
<span class="nv">$API_URL</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$REQUEST_URL</span> <span class="o">=</span> <span class="s2">"/v2/public/ticker"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="nv">$REQUEST_PATH</span> <span class="o">=</span> <span class="nv">$REQUEST_URL</span><span class="p">;</span>
<span class="nv">$FULL_URL</span> <span class="o">=</span> <span class="nv">$API_URL</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// **打印调试信息**</span>
<span class="k">echo</span> <span class="s2">"==== 请求信息 ====</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Request URL: "</span> <span class="mf">.</span> <span class="nv">$FULL_URL</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"==================</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// 发送 GET 请求</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
<span class="p">];</span>

<span class="c1">// 使用 cURL 发送 GET 请求</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$FULL_URL</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// 执行请求并获取响应</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$http_code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 打印响应</span>
<span class="k">echo</span> <span class="s2">"Response Code: </span><span class="nv">$http_code</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Response Body: </span><span class="nv">$response</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="cp">?&gt;</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://openapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/v2/public/ticker</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="nx">REQUEST_URL</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">FULL_URL</span> <span class="o">=</span> <span class="nx">API_URL</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// **打印调试信息**</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==== 请求信息 ====</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Request URL:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">FULL_URL</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==================</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// 发送 GET 请求</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">axios</span>
  <span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">FULL_URL</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Code:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Succeed"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"MNT_USDT"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"base_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MNT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quote_volume"</span><span class="p">:</span><span class="w"> </span><span class="mf">3049025.662482</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quote_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"base_volume"</span><span class="p">:</span><span class="w"> </span><span class="mf">4123162.07</span><span class="p">,</span><span class="w">
            </span><span class="nl">"isFrozen"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"last_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7491</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"PEPE_USDT"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"base_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PEPE"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quote_volume"</span><span class="p">:</span><span class="w"> </span><span class="mf">19215044.55550406</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quote_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"base_volume"</span><span class="p">:</span><span class="w"> </span><span class="mi">2733395751472</span><span class="p">,</span><span class="w">
            </span><span class="nl">"isFrozen"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"last_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00000731</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"succ"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">code</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>0</code></td>
<td style="text-align: left">返回码</td>
</tr>
<tr>
<td style="text-align: left">msg</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>Succeed</code></td>
<td style="text-align: left">返回信息</td>
</tr>
<tr>
<td style="text-align: left">message</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>null</code></td>
<td style="text-align: left">错误信息</td>
</tr>
<tr>
<td style="text-align: left">succ</td>
<td style="text-align: left">boolean</td>
<td style="text-align: left">true</td>
<td style="text-align: left">操作标识</td>
</tr>
<tr>
<td style="text-align: left">data</td>
<td style="text-align: left">object</td>
<td style="text-align: left"></td>
<td style="text-align: left"></td>
</tr>
<tr>
<td style="text-align: left">base_id</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>MNT</code></td>
<td style="text-align: left">交易币种</td>
</tr>
<tr>
<td style="text-align: left">quote_id</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>USDT</code></td>
<td style="text-align: left">计价币种</td>
</tr>
<tr>
<td style="text-align: left">base_volume</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>4123162.07</code></td>
<td style="text-align: left">交易量</td>
</tr>
<tr>
<td style="text-align: left">quote_volume</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>3049025.662482</code></td>
<td style="text-align: left">交易额</td>
</tr>
<tr>
<td style="text-align: left">last_price</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>0.7491</code></td>
<td style="text-align: left">最新成交价</td>
</tr>
<tr>
<td style="text-align: left">isFrozen</td>
<td style="text-align: left">number</td>
<td style="text-align: left"><code>1</code></td>
<td style="text-align: left">冻结标识</td>
</tr>
</tbody></table>

<p><a name="现货交易-行情-最近成交"></a></p>
<h3 id='fceaf3d0b6'>最近成交</h3>
<p><code>GET https://openapi.fameex.com/sapi/v1/trades</code></p>

<p>获取最近成交数据</p>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://openapi.fameex.com/sapi/v1/trades?symbol=BTCUSDT&amp;limit=10

// request headers
Content-Type: application/json
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># 设置 API 相关信息</span>
<span class="nv">API_URL</span><span class="o">=</span><span class="s2">"https://openapi.fameex.com"</span>
<span class="nv">REQUEST_URL</span><span class="o">=</span><span class="s2">"/sapi/v1/trades"</span>
<span class="nv">QUERY_STRING</span><span class="o">=</span><span class="s2">"?symbol=BTCUSDT&amp;limit=10"</span>

<span class="c"># 计算完整的请求路径</span>
<span class="nv">REQUEST_PATH</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">REQUEST_URL</span><span class="k">}${</span><span class="nv">QUERY_STRING</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">FULL_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">API_URL</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>

<span class="c"># 定义请求方法</span>
<span class="nv">METHOD</span><span class="o">=</span><span class="s2">"GET"</span>

<span class="c"># **打印调试信息**</span>
<span class="nb">echo</span> <span class="s2">"==== 请求信息 ===="</span>
<span class="nb">echo</span> <span class="s2">"Request URL: </span><span class="k">${</span><span class="nv">FULL_URL</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"=================="</span>

<span class="c"># 发送 GET 请求</span>
curl <span class="nt">-X</span> GET <span class="s2">"</span><span class="nv">$FULL_URL</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.Instant</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FameexApiRequest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// API 相关信息</span>
            <span class="nc">String</span> <span class="n">apiUrl</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">requestUrl</span> <span class="o">=</span> <span class="s">"/sapi/v1/trades"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">queryString</span> <span class="o">=</span> <span class="s">"?symbol=BTCUSDT&amp;limit=10"</span><span class="o">;</span>

            <span class="c1">// 计算完整的请求路径</span>
            <span class="nc">String</span> <span class="n">requestPath</span> <span class="o">=</span> <span class="n">requestUrl</span> <span class="o">+</span> <span class="n">queryString</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">fullUrl</span> <span class="o">=</span> <span class="n">apiUrl</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"GET"</span><span class="o">;</span>

            <span class="c1">// **打印调试信息**</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"==== 请求信息 ===="</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request URL: "</span> <span class="o">+</span> <span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"=================="</span><span class="o">);</span>

            <span class="c1">// 发送 GET 请求</span>
            <span class="n">sendGetRequest</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// 发送 HTTP GET 请求</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendGetRequest</span><span class="o">(</span><span class="nc">String</span> <span class="n">fullUrl</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>

            <span class="c1">// 设置请求头</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>

            <span class="c1">// 发送请求并获取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response Code: "</span> <span class="o">+</span> <span class="n">responseCode</span><span class="o">);</span>

            <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNextLine</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">());</span>
            <span class="o">}</span>
            <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// API 相关信息</span>
    <span class="n">apiURL</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com"</span>
    <span class="n">requestURL</span> <span class="o">:=</span> <span class="s">"/sapi/v1/trades"</span>
    <span class="n">queryString</span> <span class="o">:=</span> <span class="s">"?symbol=BTCUSDT&amp;limit=10"</span>

    <span class="c">// 计算完整的请求路径</span>
    <span class="n">requestPath</span> <span class="o">:=</span> <span class="n">requestURL</span> <span class="o">+</span> <span class="n">queryString</span>
    <span class="n">fullURL</span> <span class="o">:=</span> <span class="n">apiURL</span> <span class="o">+</span> <span class="n">requestPath</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"GET"</span>

    <span class="c">// **打印调试信息**</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">method</span><span class="p">)</span>
<span class="p">}</span>

<span class="c">// 发送 HTTP GET 请求</span>
<span class="k">func</span> <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">method</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>

    <span class="c">// 创建请求</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">,</span> <span class="no">nil</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error creating request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置 Headers</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error sending request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">resp</span><span class="o">.</span><span class="n">StatusCode</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
<span class="n">REQUEST_URL</span> <span class="o">=</span> <span class="s">"/sapi/v1/trades"</span>
<span class="n">QUERY_STRING</span> <span class="o">=</span> <span class="s">"?symbol=BTCUSDT&amp;limit=10"</span>

<span class="c1"># 计算完整的请求路径
</span><span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="n">REQUEST_URL</span> <span class="o">+</span> <span class="n">QUERY_STRING</span>
<span class="n">FULL_URL</span> <span class="o">=</span> <span class="n">API_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>

<span class="c1"># **打印调试信息**
</span><span class="k">print</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">FULL_URL</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

<span class="c1"># 发送 GET 请求
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">FULL_URL</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="c1"># 打印响应
</span><span class="k">print</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>

<span class="c1">// API 相关信息</span>
<span class="nv">$API_URL</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$REQUEST_URL</span> <span class="o">=</span> <span class="s2">"/sapi/v1/trades"</span><span class="p">;</span>
<span class="nv">$QUERY_STRING</span> <span class="o">=</span> <span class="s2">"?symbol=BTCUSDT&amp;limit=10"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="nv">$REQUEST_PATH</span> <span class="o">=</span> <span class="nv">$REQUEST_URL</span> <span class="mf">.</span> <span class="nv">$QUERY_STRING</span><span class="p">;</span>
<span class="nv">$FULL_URL</span> <span class="o">=</span> <span class="nv">$API_URL</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// **打印调试信息**</span>
<span class="k">echo</span> <span class="s2">"==== 请求信息 ====</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Request URL: "</span> <span class="mf">.</span> <span class="nv">$FULL_URL</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"==================</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// 发送 GET 请求</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
<span class="p">];</span>

<span class="c1">// 使用 cURL 发送 GET 请求</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$FULL_URL</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// 执行请求并获取响应</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$http_code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 打印响应</span>
<span class="k">echo</span> <span class="s2">"Response Code: </span><span class="nv">$http_code</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Response Body: </span><span class="nv">$response</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="cp">?&gt;</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://openapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/sapi/v1/trades</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">QUERY_STRING</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">?symbol=BTCUSDT&amp;limit=10</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="nx">REQUEST_URL</span> <span class="o">+</span> <span class="nx">QUERY_STRING</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">FULL_URL</span> <span class="o">=</span> <span class="nx">API_URL</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// **打印调试信息**</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==== 请求信息 ====</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Request URL:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">FULL_URL</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==================</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// 发送 GET 请求</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">axios</span>
  <span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">FULL_URL</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Code:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">symbol<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>大写</code>币对名称，例如：<code>BTCUSDT</code></td>
</tr>
<tr>
<td style="text-align: left">limit</td>
<td style="text-align: left">string</td>
<td style="text-align: left">默认：100；最大：1000</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">131.0000000000000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"qty"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1000000000000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1704788645416</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">132.0000000000000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"qty"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2000000000000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1704788282332</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">price</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>131.0000000000000000</code></td>
<td style="text-align: left">交易价格</td>
</tr>
<tr>
<td style="text-align: left">time</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>1704788645416</code></td>
<td style="text-align: left">当前时间戳</td>
</tr>
<tr>
<td style="text-align: left">qty</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>0.1000000000000000</code></td>
<td style="text-align: left">数量（张数）</td>
</tr>
<tr>
<td style="text-align: left">side</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>buy/sell</code></td>
<td style="text-align: left">主动单方向</td>
</tr>
</tbody></table>
<h3 id='k-2'>K线/蜡烛图数据</h3>
<p><code>GET https://openapi.fameex.com/sapi/v1/klines</code></p>

<p>获取K线数据</p>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://openapi.fameex.com/sapi/v1/klines?symbol=BTCUSDT&amp;interval=1min&amp;limit=5

// request headers
Content-Type: application/json
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># 设置 API 相关信息</span>
<span class="nv">API_URL</span><span class="o">=</span><span class="s2">"https://openapi.fameex.com"</span>
<span class="nv">REQUEST_URL</span><span class="o">=</span><span class="s2">"/sapi/v1/klines"</span>
<span class="nv">QUERY_STRING</span><span class="o">=</span><span class="s2">"?symbol=BTCUSDT&amp;interval=1min&amp;limit=5"</span>

<span class="c"># 计算完整的请求路径</span>
<span class="nv">REQUEST_PATH</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">REQUEST_URL</span><span class="k">}${</span><span class="nv">QUERY_STRING</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">FULL_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">API_URL</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>

<span class="c"># 定义请求方法</span>
<span class="nv">METHOD</span><span class="o">=</span><span class="s2">"GET"</span>

<span class="c"># **打印调试信息**</span>
<span class="nb">echo</span> <span class="s2">"==== 请求信息 ===="</span>
<span class="nb">echo</span> <span class="s2">"Request URL: </span><span class="k">${</span><span class="nv">FULL_URL</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"=================="</span>

<span class="c"># 发送 GET 请求</span>
curl <span class="nt">-X</span> GET <span class="s2">"</span><span class="nv">$FULL_URL</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.Instant</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FameexApiRequest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// API 相关信息</span>
            <span class="nc">String</span> <span class="n">apiUrl</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">requestUrl</span> <span class="o">=</span> <span class="s">"/sapi/v1/klines"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">queryString</span> <span class="o">=</span> <span class="s">"?symbol=BTCUSDT&amp;interval=1min&amp;limit=5"</span><span class="o">;</span>

            <span class="c1">// 计算完整的请求路径</span>
            <span class="nc">String</span> <span class="n">requestPath</span> <span class="o">=</span> <span class="n">requestUrl</span> <span class="o">+</span> <span class="n">queryString</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">fullUrl</span> <span class="o">=</span> <span class="n">apiUrl</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"GET"</span><span class="o">;</span>

            <span class="c1">// **打印调试信息**</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"==== 请求信息 ===="</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request URL: "</span> <span class="o">+</span> <span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"=================="</span><span class="o">);</span>

            <span class="c1">// 发送 GET 请求</span>
            <span class="n">sendGetRequest</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// 发送 HTTP GET 请求</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendGetRequest</span><span class="o">(</span><span class="nc">String</span> <span class="n">fullUrl</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>

            <span class="c1">// 设置请求头</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>

            <span class="c1">// 发送请求并获取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response Code: "</span> <span class="o">+</span> <span class="n">responseCode</span><span class="o">);</span>

            <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNextLine</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">());</span>
            <span class="o">}</span>
            <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// API 相关信息</span>
    <span class="n">apiURL</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com"</span>
    <span class="n">requestURL</span> <span class="o">:=</span> <span class="s">"/sapi/v1/klines"</span>
    <span class="n">queryString</span> <span class="o">:=</span> <span class="s">"?symbol=BTCUSDT&amp;interval=1min&amp;limit=5"</span>

    <span class="c">// 计算完整的请求路径</span>
    <span class="n">requestPath</span> <span class="o">:=</span> <span class="n">requestURL</span> <span class="o">+</span> <span class="n">queryString</span>
    <span class="n">fullURL</span> <span class="o">:=</span> <span class="n">apiURL</span> <span class="o">+</span> <span class="n">requestPath</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"GET"</span>

    <span class="c">// **打印调试信息**</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">method</span><span class="p">)</span>
<span class="p">}</span>

<span class="c">// 发送 HTTP GET 请求</span>
<span class="k">func</span> <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">method</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>

    <span class="c">// 创建请求</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">,</span> <span class="no">nil</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error creating request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置 Headers</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error sending request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">resp</span><span class="o">.</span><span class="n">StatusCode</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
<span class="n">REQUEST_URL</span> <span class="o">=</span> <span class="s">"/sapi/v1/klines"</span>
<span class="n">QUERY_STRING</span> <span class="o">=</span> <span class="s">"?symbol=BTCUSDT&amp;interval=1min&amp;limit=5"</span>

<span class="c1"># 计算完整的请求路径
</span><span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="n">REQUEST_URL</span> <span class="o">+</span> <span class="n">QUERY_STRING</span>
<span class="n">FULL_URL</span> <span class="o">=</span> <span class="n">API_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>

<span class="c1"># **打印调试信息**
</span><span class="k">print</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">FULL_URL</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

<span class="c1"># 发送 GET 请求
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">FULL_URL</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="c1"># 打印响应
</span><span class="k">print</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>

<span class="c1">// API 相关信息</span>
<span class="nv">$API_URL</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$REQUEST_URL</span> <span class="o">=</span> <span class="s2">"/sapi/v1/klines"</span><span class="p">;</span>
<span class="nv">$QUERY_STRING</span> <span class="o">=</span> <span class="s2">"?symbol=BTCUSDT&amp;interval=1min&amp;limit=5"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="nv">$REQUEST_PATH</span> <span class="o">=</span> <span class="nv">$REQUEST_URL</span> <span class="mf">.</span> <span class="nv">$QUERY_STRING</span><span class="p">;</span>
<span class="nv">$FULL_URL</span> <span class="o">=</span> <span class="nv">$API_URL</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// **打印调试信息**</span>
<span class="k">echo</span> <span class="s2">"==== 请求信息 ====</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Request URL: "</span> <span class="mf">.</span> <span class="nv">$FULL_URL</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"==================</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// 发送 GET 请求</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
<span class="p">];</span>

<span class="c1">// 使用 cURL 发送 GET 请求</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$FULL_URL</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// 执行请求并获取响应</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$http_code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 打印响应</span>
<span class="k">echo</span> <span class="s2">"Response Code: </span><span class="nv">$http_code</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Response Body: </span><span class="nv">$response</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="cp">?&gt;</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://openapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/sapi/v1/klines</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">QUERY_STRING</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">?symbol=BTCUSDT&amp;interval=1min&amp;limit=5</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="nx">REQUEST_URL</span> <span class="o">+</span> <span class="nx">QUERY_STRING</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">FULL_URL</span> <span class="o">=</span> <span class="nx">API_URL</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// **打印调试信息**</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==== 请求信息 ====</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Request URL:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">FULL_URL</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==================</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// 发送 GET 请求</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">axios</span>
  <span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">FULL_URL</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Code:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">symbol<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>大写</code>币对名称，例如：<code>BTCUSDT</code></td>
</tr>
<tr>
<td style="text-align: left">interval<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">K线图区间，可识别发送的值为：<code>1min</code>，<code>5min</code>，<code>15min</code>，<code>30min</code>，<code>60min</code>，<code>1day</code>，<code>1week</code>，<code>1month</code>（min=分钟，day=天，week=星期，month=月）</td>
</tr>
<tr>
<td style="text-align: left">limit</td>
<td style="text-align: left">integer</td>
<td style="text-align: left">默认：100；最大：300</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="mf">6228.77</span><span class="p">,</span><span class="w">
        </span><span class="nl">"vol"</span><span class="p">:</span><span class="w"> </span><span class="mf">2456.11</span><span class="p">,</span><span class="w">
        </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="mf">6220.13</span><span class="p">,</span><span class="w">
        </span><span class="nl">"idx"</span><span class="p">:</span><span class="w"> </span><span class="mi">1594640340000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"close"</span><span class="p">:</span><span class="w"> </span><span class="mf">6225.63</span><span class="p">,</span><span class="w">
        </span><span class="nl">"open"</span><span class="p">:</span><span class="w"> </span><span class="mf">6129.41</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="mf">6228.77</span><span class="p">,</span><span class="w">
        </span><span class="nl">"vol"</span><span class="p">:</span><span class="w"> </span><span class="mf">1700.21</span><span class="p">,</span><span class="w">
        </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="mf">6228.77</span><span class="p">,</span><span class="w">
        </span><span class="nl">"idx"</span><span class="p">:</span><span class="w"> </span><span class="mi">1587632160000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"close"</span><span class="p">:</span><span class="w"> </span><span class="mf">6228.77</span><span class="p">,</span><span class="w">
        </span><span class="nl">"open"</span><span class="p">:</span><span class="w"> </span><span class="mf">6228.77</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="mf">6228.77</span><span class="p">,</span><span class="w">
        </span><span class="nl">"vol"</span><span class="p">:</span><span class="w"> </span><span class="mf">1908.52</span><span class="p">,</span><span class="w">
        </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="mf">6228.77</span><span class="p">,</span><span class="w">
        </span><span class="nl">"idx"</span><span class="p">:</span><span class="w"> </span><span class="mi">1587632100000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"close"</span><span class="p">:</span><span class="w"> </span><span class="mf">6228.77</span><span class="p">,</span><span class="w">
        </span><span class="nl">"open"</span><span class="p">:</span><span class="w"> </span><span class="mf">6228.77</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">idx</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>1538728740000</code></td>
<td style="text-align: left">开始时间戳</td>
</tr>
<tr>
<td style="text-align: left">open</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>6129.41</code></td>
<td style="text-align: left">开盘价</td>
</tr>
<tr>
<td style="text-align: left">close</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>6225.63</code></td>
<td style="text-align: left">收盘价</td>
</tr>
<tr>
<td style="text-align: left">high</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>6228.77</code></td>
<td style="text-align: left">最高价</td>
</tr>
<tr>
<td style="text-align: left">low</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>6220.13</code></td>
<td style="text-align: left">最低价</td>
</tr>
<tr>
<td style="text-align: left">vol</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>2456.11</code></td>
<td style="text-align: left">成交量</td>
</tr>
</tbody></table>
<h2 id='dfe799947f'>交易</h2><h3 id='trade'>安全类型: TRADE</h3>
<aside class='notice'>交易下方的接口都需要签名和API-key验证。</aside>
<h3 id='8be954be0d'>创建新订单</h3>
<p><code>POST https://openapi.fameex.com/sapi/v1/order</code></p>

<p><strong>限速规则: 100次/2s</strong></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">POST https://openapi.fameex.com/sapi/v1/order

// request headers
Content-Type: application/json
X-CH-TS: 1739503617552
X-CH-APIKEY: 您的API-KEY
X-CH-SIGN: 325b02a8444da041c71fb6e3c35c6baf87e5cb48acc19e4cd312b8bf821bfc1b
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># 设置 API 相关信息</span>
<span class="nv">URL</span><span class="o">=</span><span class="s2">"https://openapi.fameex.com"</span>
<span class="nv">REQUEST_PATH</span><span class="o">=</span><span class="s2">"/sapi/v1/order"</span>
<span class="nv">API_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">URL</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">API_KEY</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">API_SECRET</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 生成当前毫秒级时间戳</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="si">$(</span><span class="nb">date</span> +%s | <span class="nb">awk</span> <span class="s1">'{print $1 * 1000}'</span><span class="si">)</span>

<span class="c"># 定义请求方法</span>
<span class="nv">METHOD</span><span class="o">=</span><span class="s2">"POST"</span>

<span class="c"># 定义请求体 (JSON 格式)</span>
<span class="nv">BODY_JSON</span><span class="o">=</span><span class="s1">'{"symbol":"BTCUSDT","volume":0.00001,"side":"BUY","type":"LIMIT","price":97081.19,"newClientOrderId":"111000000111"}'</span>

<span class="c"># 生成签名 (X-CH-SIGN)</span>
<span class="nv">SIGN_PAYLOAD</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">METHOD</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}${</span><span class="nv">BODY_JSON</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">SIGNATURE</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$API_SECRET</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>

<span class="c"># **打印调试信息**</span>
<span class="nb">echo</span> <span class="s2">"==== 请求信息 ===="</span>
<span class="nb">echo</span> <span class="s2">"Timestamp (X-CH-TS): </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Sign Payload (待签名字符串): </span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Signature (X-CH-SIGN): </span><span class="nv">$SIGNATURE</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Request Body: </span><span class="nv">$BODY_JSON</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"=================="</span>

<span class="c"># 发送请求</span>
curl <span class="nt">-X</span> POST <span class="s2">"</span><span class="nv">$API_URL</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$API_KEY</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$BODY_JSON</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.Instant</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Base64</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FameexApiRequest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// API 相关信息</span>
            <span class="nc">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">requestPath</span> <span class="o">=</span> <span class="s">"/sapi/v1/order"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiUrl</span> <span class="o">=</span> <span class="n">url</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiKey</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiSecret</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>

            <span class="c1">// 获取当前毫秒级时间戳</span>
            <span class="nc">String</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">toEpochMilli</span><span class="o">());</span>

            <span class="c1">// 请求方法和路径</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span><span class="o">;</span>

            <span class="c1">// 定义请求体 (JSON 格式)</span>
            <span class="nc">String</span> <span class="n">bodyJson</span> <span class="o">=</span> <span class="s">"{\"symbol\":\"BTCUSDT\",\"volume\":\"0.00001\",\"side\":\"BUY\",\"type\":\"LIMIT\",\"price\":\"97081.19\",\"newClientOrderId\":\"111000000111\"}"</span><span class="o">;</span>

            <span class="c1">// 生成签名 (X-CH-SIGN)</span>
            <span class="nc">String</span> <span class="n">signPayload</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span> <span class="o">+</span> <span class="n">bodyJson</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSha256</span><span class="o">(</span><span class="n">signPayload</span><span class="o">,</span> <span class="n">apiSecret</span><span class="o">);</span>

            <span class="c1">// **打印调试信息**</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"==== 请求信息 ===="</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Timestamp (X-CH-TS): "</span> <span class="o">+</span> <span class="n">timestamp</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Sign Payload (待签名字符串): "</span> <span class="o">+</span> <span class="n">signPayload</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Signature (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request Body: "</span> <span class="o">+</span> <span class="n">bodyJson</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"=================="</span><span class="o">);</span>

            <span class="c1">// 发送请求</span>
            <span class="n">sendPostRequest</span><span class="o">(</span><span class="n">apiUrl</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">,</span> <span class="n">signature</span><span class="o">,</span> <span class="n">bodyJson</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// HMAC-SHA256 签名计算</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSha256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">// 发送 HTTP POST 请求</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendPostRequest</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiUrl</span><span class="o">,</span> <span class="nc">String</span> <span class="n">apiKey</span><span class="o">,</span> <span class="nc">String</span> <span class="n">timestamp</span><span class="o">,</span> <span class="nc">String</span> <span class="n">signature</span><span class="o">,</span> <span class="nc">String</span> <span class="n">bodyJson</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="n">apiUrl</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// 发送请求体</span>
            <span class="k">try</span> <span class="o">(</span><span class="nc">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">())</span> <span class="o">{</span>
                <span class="kt">byte</span><span class="o">[]</span> <span class="n">input</span> <span class="o">=</span> <span class="n">bodyJson</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">);</span>
                <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">input</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">input</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="c1">// 读取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response Code: "</span> <span class="o">+</span> <span class="n">responseCode</span><span class="o">);</span>

            <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNextLine</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">());</span>
            <span class="o">}</span>
            <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"bytes"</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"strconv"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// API 相关信息</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com"</span>
    <span class="n">requestPath</span> <span class="o">:=</span> <span class="s">"/sapi/v1/order"</span>
    <span class="n">apiURL</span> <span class="o">:=</span> <span class="n">url</span> <span class="o">+</span> <span class="n">requestPath</span>
    <span class="n">apiKey</span> <span class="o">:=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">apiSecret</span> <span class="o">:=</span> <span class="s">"您的API-SECRET"</span>

    <span class="c">// 生成当前毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">strconv</span><span class="o">.</span><span class="n">FormatInt</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span><span class="o">/</span><span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">),</span> <span class="m">10</span><span class="p">)</span>

    <span class="c">// 请求方法和路径</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

    <span class="c">// 定义请求体 (JSON 格式)</span>
    <span class="n">bodyJSON</span> <span class="o">:=</span> <span class="s">`{"symbol":"BTCUSDT","volume":"0.00001","side":"BUY","type":"LIMIT","price":"97081.19","newClientOrderId":"111000000111"}`</span>

    <span class="c">// 生成签名 (X-CH-SIGN)</span>
    <span class="n">signPayload</span> <span class="o">:=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span> <span class="o">+</span> <span class="n">bodyJSON</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">signPayload</span><span class="p">,</span> <span class="n">apiSecret</span><span class="p">)</span>

    <span class="c">// **打印调试信息**</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">signPayload</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Request Body:"</span><span class="p">,</span> <span class="n">bodyJSON</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">sendPostRequest</span><span class="p">(</span><span class="n">apiURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">bodyJSON</span><span class="p">)</span>
<span class="p">}</span>

<span class="c">// HMAC-SHA256 签名计算</span>
<span class="k">func</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 发送 HTTP POST 请求</span>
<span class="k">func</span> <span class="n">sendPostRequest</span><span class="p">(</span><span class="n">apiURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">bodyJSON</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>

    <span class="c">// 创建请求</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">apiURL</span><span class="p">,</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">bodyJSON</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error creating request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置 Headers</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error sending request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># API 相关信息
</span><span class="n">URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
<span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/sapi/v1/order"</span>
<span class="n">API_URL</span> <span class="o">=</span> <span class="n">URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>

<span class="c1"># 生成当前毫秒级时间戳
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="c1"># 请求方法和路径
</span><span class="n">METHOD</span> <span class="o">=</span> <span class="s">"POST"</span>


<span class="c1"># 定义请求体 (JSON 格式)
</span><span class="n">body_json</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"symbol"</span><span class="p">:</span> <span class="s">"BTCUSDT"</span><span class="p">,</span>
    <span class="s">"volume"</span><span class="p">:</span> <span class="s">"0.00001"</span><span class="p">,</span>
    <span class="s">"side"</span><span class="p">:</span> <span class="s">"BUY"</span><span class="p">,</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"LIMIT"</span><span class="p">,</span>
    <span class="s">"price"</span><span class="p">:</span> <span class="s">"97081.19"</span><span class="p">,</span>
    <span class="s">"newClientOrderId"</span><span class="p">:</span> <span class="s">"111000000111"</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">body_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body_json</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>  <span class="c1"># 确保 JSON 字符串格式正确
</span>
<span class="c1"># 生成签名 (X-CH-SIGN)
</span><span class="n">sign_payload</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">METHOD</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span> <span class="o">+</span> <span class="n">body_str</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">sign_payload</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c1"># **打印调试信息**
</span><span class="k">print</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">sign_payload</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Request Body:"</span><span class="p">,</span> <span class="n">body_str</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

<span class="c1"># 发送请求
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">API_URL</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 打印响应
</span><span class="k">print</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>

<span class="c1">// API 相关信息</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$request_path</span> <span class="o">=</span> <span class="s2">"/sapi/v1/order"</span><span class="p">;</span>
<span class="nv">$api_url</span> <span class="o">=</span> <span class="nv">$url</span> <span class="mf">.</span> <span class="nv">$request_path</span><span class="p">;</span>
<span class="nv">$api_key</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$api_secret</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 请求方法</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="s2">"POST"</span><span class="p">;</span>

<span class="c1">// 定义请求体 (JSON 格式)</span>
<span class="nv">$body_json</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">([</span>
    <span class="s2">"symbol"</span> <span class="o">=&gt;</span> <span class="s2">"BTCUSDT"</span><span class="p">,</span>
    <span class="s2">"price"</span> <span class="o">=&gt;</span> <span class="s2">"9300"</span><span class="p">,</span>
    <span class="s2">"volume"</span> <span class="o">=&gt;</span> <span class="s2">"1"</span><span class="p">,</span>
    <span class="s2">"side"</span> <span class="o">=&gt;</span> <span class="s2">"BUY"</span><span class="p">,</span>
    <span class="s2">"type"</span> <span class="o">=&gt;</span> <span class="s2">"LIMIT"</span>
<span class="p">],</span> <span class="no">JSON_UNESCAPED_SLASHES</span><span class="p">);</span> <span class="c1">// 确保 JSON 格式正确</span>

<span class="c1">// 生成签名 (X-CH-SIGN)</span>
<span class="nv">$sign_payload</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$method</span> <span class="mf">.</span> <span class="nv">$request_path</span> <span class="mf">.</span> <span class="nv">$body_json</span><span class="p">;</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$sign_payload</span><span class="p">,</span> <span class="nv">$api_secret</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="k">echo</span> <span class="s2">"==== 请求信息 ====</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Timestamp (X-CH-TS): "</span> <span class="mf">.</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Sign Payload (待签名字符串): "</span> <span class="mf">.</span> <span class="nv">$sign_payload</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Signature (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$signature</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Request Body: "</span> <span class="mf">.</span> <span class="nv">$body_json</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"==================</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// 发送请求</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$api_key</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="p">];</span>

<span class="c1">// 使用 cURL 发送 POST 请求</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$api_url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$body_json</span><span class="p">);</span>

<span class="c1">// 执行请求并获取响应</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$http_code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 打印响应</span>
<span class="k">echo</span> <span class="s2">"Response Code: </span><span class="nv">$http_code</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Response Body: </span><span class="nv">$response</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://openapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/sapi/v1/order</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_URL</span> <span class="o">=</span> <span class="nx">URL</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">();</span>

<span class="c1">// 请求方法</span>
<span class="kd">const</span> <span class="nx">METHOD</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 定义请求体 (JSON 格式)</span>
<span class="kd">const</span> <span class="nx">bodyJson</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="na">symbol</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BTCUSDT</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">price</span><span class="p">:</span> <span class="dl">"</span><span class="s2">9300</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">volume</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">side</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BUY</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">LIMIT</span><span class="dl">"</span><span class="p">,</span>
<span class="p">});</span>

<span class="c1">// 生成签名 (X-CH-SIGN)</span>
<span class="kd">const</span> <span class="nx">signPayload</span> <span class="o">=</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">METHOD</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span> <span class="o">+</span> <span class="nx">bodyJson</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span>
  <span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">"</span><span class="s2">sha256</span><span class="dl">"</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">signPayload</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="dl">"</span><span class="s2">hex</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==== 请求信息 ====</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Timestamp (X-CH-TS):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">timestamp</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Sign Payload (待签名字符串):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signPayload</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Signature (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Request Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">bodyJson</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==================</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// 发送请求</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">axios</span>
  <span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">API_URL</span><span class="p">,</span> <span class="nx">bodyJson</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Code:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">});</span>

</code></pre></div>
<blockquote>
<p>body</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="nl">"symbol"</span><span class="p">:</span><span class="s2">"BTCUSDT"</span><span class="p">,</span><span class="nl">"volume"</span><span class="p">:</span><span class="mf">1.00</span><span class="p">,</span><span class="nl">"side"</span><span class="p">:</span><span class="s2">"BUY"</span><span class="p">,</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="nl">"price"</span><span class="p">:</span><span class="mf">65000.00</span><span class="p">,</span><span class="nl">"newClientOrderId"</span><span class="p">:</span><span class="s2">"111000000111"</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">symbol<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>大写</code>币对名称，例如：<code>BTCUSDT</code> (参考 <a href="#现货交易-公共-币对列表">币对列表</a> 的 <code>symbol</code> )</td>
</tr>
<tr>
<td style="text-align: left">volume<font color="red">*</font></td>
<td style="text-align: left">number</td>
<td style="text-align: left">订单数量，有精度限制，精度由管理员配置 (参考 <a href="#现货交易-公共-币对列表">币对列表</a> 的 <code>limitVolumeMin</code> )</td>
</tr>
<tr>
<td style="text-align: left">side<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">订单方向，<code>BUY/SELL</code></td>
</tr>
<tr>
<td style="text-align: left">type<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">订单类型，<code>LIMIT/MARKET</code></td>
</tr>
<tr>
<td style="text-align: left">price</td>
<td style="text-align: left">number</td>
<td style="text-align: left">订单价格，对于<code>LIMIT</code>订单必须发送，有精度限制，精度由管理员配置 (参考 <a href="#现货交易-行情-最近成交">最近成交</a> 的 <code>price</code> )</td>
</tr>
<tr>
<td style="text-align: left">newClientOrderId</td>
<td style="text-align: left">string</td>
<td style="text-align: left">客户端订单标识</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTCUSDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"executedQty"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"2618039663715064005"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">97081.19</span><span class="p">,</span><span class="w">
    </span><span class="nl">"origQty"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00001</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"111000000111"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"transactTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1739867150800</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NEW"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">orderId</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>2012274607240433332</code></td>
<td style="text-align: left">订单ID（系统生成）</td>
</tr>
<tr>
<td style="text-align: left">clientOrderId</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>213443</code></td>
<td style="text-align: left">订单ID（用户生成）</td>
</tr>
<tr>
<td style="text-align: left">symbol</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>BTCUSDT</code></td>
<td style="text-align: left"><code>大写</code>币对名称</td>
</tr>
<tr>
<td style="text-align: left">transactTime</td>
<td style="text-align: left">integer</td>
<td style="text-align: left"><code>1704959985403</code></td>
<td style="text-align: left">订单创建时间戳</td>
</tr>
<tr>
<td style="text-align: left">price</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>47651.29</code></td>
<td style="text-align: left">订单价格</td>
</tr>
<tr>
<td style="text-align: left">origQty</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>0.01</code></td>
<td style="text-align: left">订单数量</td>
</tr>
<tr>
<td style="text-align: left">executedQty</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>0</code></td>
<td style="text-align: left">已经成交订单数量</td>
</tr>
<tr>
<td style="text-align: left">type</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>LIMIT</code></td>
<td style="text-align: left">订单类型。可能出现的值只能为：<code>LIMIT</code>(限价)和<code>MARKET</code>（市价）</td>
</tr>
<tr>
<td style="text-align: left">side</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>BUY</code></td>
<td style="text-align: left">订单方向。可能出现的值只能为：<code>BUY</code>（买入做多）和<code>SELL</code>（卖出做空）</td>
</tr>
<tr>
<td style="text-align: left">status</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>NEW</code></td>
<td style="text-align: left">订单状态。可能出现的值为：<code>New Order</code>（新订单，无成交）、<code>Partially Filled</code>（部分成交）、<code>Filled</code>（全部成交）</td>
</tr>
</tbody></table>
<h3 id='v2'>创建新订单-V2</h3>
<p><code>POST https://openapi.fameex.com/sapi/v2/order</code></p>

<p><strong>限速规则: 100次/2s</strong></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">POST https://openapi.fameex.com/sapi/v2/order

body
{"symbol":"BTCUSDT","volume":"1.00","side":"BUY","type":"LIMIT","price":"65000.00","newClientOrderId":"111000000111"}
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># API 相关信息</span>
<span class="nv">api_key</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">api_secret</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 请求信息</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="k">$((</span><span class="si">$(</span><span class="nb">date</span> +%s%N<span class="si">)</span><span class="o">/</span><span class="m">1000000</span><span class="k">))</span>  <span class="c"># 毫秒级时间戳</span>
<span class="nv">method</span><span class="o">=</span><span class="s2">"POST"</span>
<span class="nv">request_path</span><span class="o">=</span><span class="s2">"/sapi/v2/order"</span>

<span class="c"># 请求主体 (JSON 格式)</span>
<span class="nv">body</span><span class="o">=</span><span class="s1">'{"symbol":"BTCUSDT","volume":"1.00","side":"BUY","type":"LIMIT","price":"65000.00","newClientOrderId":"111000000111"}'</span>

<span class="c"># 删除 body 中的空白字符，保证签名的一致性</span>
<span class="nv">body</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span> | jq <span class="nt">-c</span><span class="si">)</span>

<span class="c"># 拼接签名字符串</span>
<span class="nv">sign_str</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">method</span><span class="k">}${</span><span class="nv">request_path</span><span class="k">}${</span><span class="nv">body</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"签名字符串: </span><span class="nv">$sign_str</span><span class="s2">"</span>

<span class="c"># 生成 HMAC SHA256 签名</span>
<span class="nv">signature</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$sign_str</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$api_secret</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>
<span class="nb">echo</span> <span class="s2">"签名 (X-CH-SIGN): </span><span class="nv">$signature</span><span class="s2">"</span>

<span class="c"># 发送 POST 请求</span>
<span class="nv">response</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="nt">-X</span> POST <span class="s2">"https://openapi.fameex.com</span><span class="k">${</span><span class="nv">request_path</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span><span class="si">)</span>

<span class="c"># 输出响应结果</span>
<span class="nb">echo</span> <span class="s2">"响应: </span><span class="nv">$response</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.TimeUnit</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SendOrder</span> <span class="o">{</span>

    <span class="c1">// API 相关信息</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">BASE_URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/sapi/v2/order"</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// 获取时间戳 (毫秒)</span>
            <span class="kt">long</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">.</span><span class="na">convert</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">(),</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span><span class="o">;</span>

            <span class="c1">// 请求主体 (JSON 格式，注意使用紧凑格式)</span>
            <span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{\"symbol\":\"BTCUSDT\",\"volume\":\"1.00\",\"side\":\"BUY\",\"type\":\"LIMIT\",\"price\":\"65000.00\",\"newClientOrderId\":\"111000000111\"}"</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"请求主体 (body): "</span> <span class="o">+</span> <span class="n">body</span><span class="o">);</span>

            <span class="c1">// 拼接签名字符串</span>
            <span class="nc">String</span> <span class="n">signStr</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span> <span class="o">+</span> <span class="n">body</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名字符串: "</span> <span class="o">+</span> <span class="n">signStr</span><span class="o">);</span>

            <span class="c1">// 生成 HMAC SHA256 签名</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSHA256</span><span class="o">(</span><span class="n">signStr</span><span class="o">,</span> <span class="no">API_SECRET</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名 (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>

            <span class="c1">// 使用 URI 创建 URL</span>
            <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="no">BASE_URL</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">timestamp</span><span class="o">));</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="no">API_KEY</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// 发送请求主体</span>
            <span class="k">try</span> <span class="o">(</span><span class="nc">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">body</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
                <span class="n">os</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
            <span class="o">}</span>

            <span class="c1">// 读取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span>
                    <span class="n">responseCode</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">responseCode</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="o">?</span> <span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()</span> <span class="o">:</span> <span class="n">conn</span><span class="o">.</span><span class="na">getErrorStream</span><span class="o">()));</span>
            <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
            <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

            <span class="c1">// 输出响应结果</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"响应 ("</span> <span class="o">+</span> <span class="n">responseCode</span> <span class="o">+</span> <span class="s">"): "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**
     * 生成 HMAC SHA256 签名
     *
     * @param data   要签名的字符串
     * @param secret 密钥
     * @return HMAC SHA256 签名
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSHA256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"bytes"</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="c">// API 相关信息</span>
<span class="k">const</span> <span class="p">(</span>
    <span class="n">APIKey</span>     <span class="o">=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">APISecret</span>  <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
    <span class="n">BaseURL</span>    <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
    <span class="n">RequestPath</span> <span class="o">=</span> <span class="s">"/sapi/v2/order"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// 获取毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span> <span class="o">/</span> <span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

    <span class="c">// 请求主体 (JSON 格式)</span>
    <span class="n">body</span> <span class="o">:=</span> <span class="s">`{"symbol":"BTCUSDT","volume":"1.00","side":"BUY","type":"LIMIT","price":"65000.00","newClientOrderId":"111000000111"}`</span>

    <span class="c">// 拼接签名字符串</span>
    <span class="n">signStr</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d%s%s%s"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">RequestPath</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">signStr</span><span class="p">)</span>

    <span class="c">// 生成 HMAC SHA256 签名</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">signStr</span><span class="p">,</span> <span class="n">APISecret</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 发送 POST 请求</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="n">BaseURL</span> <span class="o">+</span> <span class="n">RequestPath</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">body</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"创建请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置请求头</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">))</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">APIKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 执行请求</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">responseBody</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"响应:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">responseBody</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 生成 HMAC SHA256 签名</span>
<span class="k">func</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
<span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/sapi/v2/order"</span>

<span class="c1"># 请求方法和请求主体
</span><span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span>
<span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s">"symbol"</span><span class="p">:</span><span class="s">"BTCUSDT"</span><span class="p">,</span><span class="s">"volume"</span><span class="p">:</span><span class="s">"1.00"</span><span class="p">,</span><span class="s">"side"</span><span class="p">:</span><span class="s">"BUY"</span><span class="p">,</span><span class="s">"type"</span><span class="p">:</span><span class="s">"LIMIT"</span><span class="p">,</span><span class="s">"price"</span><span class="p">:</span><span class="s">"65000.00"</span><span class="p">,</span><span class="s">"newClientOrderId"</span><span class="p">:</span><span class="s">"111000000111"</span><span class="p">}</span>


<span class="c1"># 获取时间戳 (毫秒级)
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1"># 将请求主体转换为紧凑的 JSON 字符串
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="n">body_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"请求主体 (body):"</span><span class="p">,</span> <span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 拼接签名字符串
</span><span class="n">sign_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}{</span><span class="n">method</span><span class="si">}{</span><span class="n">REQUEST_PATH</span><span class="si">}{</span><span class="n">body_str</span><span class="si">}</span><span class="s">"</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">sign_str</span><span class="p">)</span>

<span class="c1"># 生成 HMAC SHA256 签名
</span><span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sign_str</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

<span class="c1"># 构建请求头
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="s">"User-Agent"</span><span class="p">:</span> <span class="s">"Python-Client"</span>
<span class="p">}</span>

<span class="c1"># 发送 POST 请求
</span><span class="n">url</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 输出响应结果
</span><span class="k">print</span><span class="p">(</span><span class="s">"响应状态码:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"响应内容:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// API 相关信息</span>
<span class="nv">$apiKey</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$apiSecret</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>
<span class="nv">$baseUrl</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$requestPath</span> <span class="o">=</span> <span class="s2">"/sapi/v2/order"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="s2">"POST"</span><span class="p">;</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">([</span>
    <span class="s2">"symbol"</span><span class="o">=&gt;</span> <span class="s2">"BTCUSDT"</span><span class="p">,</span>
    <span class="s2">"volume"</span><span class="o">=&gt;</span> <span class="mf">1.00</span><span class="p">,</span>
    <span class="s2">"side"</span><span class="o">=&gt;</span> <span class="s2">"BUY"</span><span class="p">,</span>
    <span class="s2">"type"</span><span class="o">=&gt;</span> <span class="s2">"LIMIT"</span><span class="p">,</span>
    <span class="s2">"price"</span><span class="o">=&gt;</span> <span class="mf">65000.00</span><span class="p">,</span>
    <span class="s2">"newClientOrderId"</span><span class="o">=&gt;</span> <span class="s2">"111000000111"</span>
<span class="p">],</span> <span class="no">JSON_UNESCAPED_SLASHES</span><span class="p">);</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 拼接签名字符串</span>
<span class="nv">$signStr</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$method</span> <span class="mf">.</span> <span class="nv">$requestPath</span> <span class="mf">.</span> <span class="nv">$body</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"签名字符串: "</span> <span class="mf">.</span> <span class="nv">$signStr</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$signStr</span><span class="p">,</span> <span class="nv">$apiSecret</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"签名 (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$signature</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 构建请求头</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$apiKey</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"User-Agent: PHP-Client"</span>
<span class="p">];</span>

<span class="c1">// 发送 POST 请求</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nv">$baseUrl</span> <span class="mf">.</span> <span class="nv">$requestPath</span><span class="p">;</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$body</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 仅在开发环境中使用，生产环境应启用 SSL 验证</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$httpCode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"请求失败: "</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"响应状态码: </span><span class="nv">$httpCode</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"响应内容: </span><span class="nv">$response</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span>

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">BASE_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://openapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/sapi/v2/order</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="kd">const</span> <span class="nx">method</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BTCUSDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">volume</span><span class="dl">"</span><span class="p">:</span> <span class="mf">1.00</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">side</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BUY</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">LIMIT</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span> <span class="mf">65000.00</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">newClientOrderId</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">111000000111</span><span class="dl">"</span>
<span class="p">});</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>

<span class="c1">// 拼接签名字符串</span>
<span class="kd">const</span> <span class="nx">signStr</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">timestamp</span><span class="p">}${</span><span class="nx">method</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}${</span><span class="nx">body</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名字符串:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signStr</span><span class="p">);</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">signStr</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名 (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>

<span class="c1">// 构建请求头</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span>
    <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">User-Agent</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Node.js-Client</span><span class="dl">"</span>
<span class="p">};</span>

<span class="c1">// 发送 POST 请求</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">sendOrder</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">BASE_URL</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">body</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">});</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应状态码:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应内容:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">请求失败:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 执行请求</span>
<span class="nx">sendOrder</span><span class="p">();</span>

</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">symbol<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>大写</code>币对名称，例如：<code>BTCUSDT</code></td>
</tr>
<tr>
<td style="text-align: left">volume<font color="red">*</font></td>
<td style="text-align: left">number</td>
<td style="text-align: left">订单数量，有精度限制，精度由管理员配置</td>
</tr>
<tr>
<td style="text-align: left">side<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">订单方向，<code>BUY/SELL</code></td>
</tr>
<tr>
<td style="text-align: left">type<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">订单类型，<code>LIMIT/MARKET</code></td>
</tr>
<tr>
<td style="text-align: left">price</td>
<td style="text-align: left">number</td>
<td style="text-align: left">订单价格，对于<code>LIMIT</code>订单必须发送，有精度限制，精度由管理员配置</td>
</tr>
<tr>
<td style="text-align: left">newClientOrderId</td>
<td style="text-align: left">string</td>
<td style="text-align: left">客户端订单标识</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETHUSDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"executedQty"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"2012274607240433332"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">47651.29</span><span class="p">,</span><span class="w">
    </span><span class="nl">"origQty"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"213443"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"transactTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1704959985403</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MARKET"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NEW"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">orderId</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>2012274607240433332</code></td>
<td style="text-align: left">订单ID（系统生成）</td>
</tr>
<tr>
<td style="text-align: left">clientOrderId</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>213443</code></td>
<td style="text-align: left">订单ID（用户生成）</td>
</tr>
<tr>
<td style="text-align: left">symbol</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>BTCUSDT</code></td>
<td style="text-align: left"><code>大写</code>币对名称</td>
</tr>
<tr>
<td style="text-align: left">transactTime</td>
<td style="text-align: left">integer</td>
<td style="text-align: left"><code>1704959985403</code></td>
<td style="text-align: left">订单创建时间戳</td>
</tr>
<tr>
<td style="text-align: left">price</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>47651.29</code></td>
<td style="text-align: left">订单价格</td>
</tr>
<tr>
<td style="text-align: left">origQty</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>0.01</code></td>
<td style="text-align: left">订单数量</td>
</tr>
<tr>
<td style="text-align: left">executedQty</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>0</code></td>
<td style="text-align: left">已经成交订单数量</td>
</tr>
<tr>
<td style="text-align: left">type</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>LIMIT</code></td>
<td style="text-align: left">订单类型。可能出现的值只能为：<code>LIMIT</code>(限价)和<code>MARKET</code>（市价）</td>
</tr>
<tr>
<td style="text-align: left">side</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>BUY</code></td>
<td style="text-align: left">订单方向。可能出现的值只能为：<code>BUY</code>（买入做多）和<code>SELL</code>（卖出做空）</td>
</tr>
<tr>
<td style="text-align: left">status</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>NEW</code></td>
<td style="text-align: left">订单状态。可能出现的值为：<code>New Order</code>（新订单，无成交）、<code>Partially Filled</code>（部分成交）、<code>Filled</code>（全部成交）</td>
</tr>
</tbody></table>
<h3 id='623198186c'>创建测试订单</h3>
<p><code>POST https://openapi.fameex.com/sapi/v1/order/test</code></p>

<p>创建和验证新订单, 但不会送入撮合引擎</p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">POST https://openapi.fameex.com/sapi/v1/order/test

// request headers
Content-Type: application/json
X-CH-TS: 1739503617552
X-CH-APIKEY: 您的API-KEY
X-CH-SIGN: 325b02a8444da041c71fb6e3c35c6baf87e5cb48acc19e4cd312b8bf821bfc1b
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># 设置 API 相关信息</span>
<span class="nv">URL</span><span class="o">=</span><span class="s2">"https://openapi.fameex.com"</span>
<span class="nv">REQUEST_PATH</span><span class="o">=</span><span class="s2">"/sapi/v1/order/test"</span>
<span class="nv">API_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">URL</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">API_KEY</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">API_SECRET</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 生成当前毫秒级时间戳</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="si">$(</span><span class="nb">date</span> +%s | <span class="nb">awk</span> <span class="s1">'{print $1 * 1000}'</span><span class="si">)</span>

<span class="c"># 定义请求方法</span>
<span class="nv">METHOD</span><span class="o">=</span><span class="s2">"POST"</span>

<span class="c"># 定义请求体 (JSON 格式)</span>
<span class="nv">BODY_JSON</span><span class="o">=</span><span class="s1">'{"symbol":"BTCUSDT","price":"9300","volume":"1","side":"BUY","type":"LIMIT"}'</span>

<span class="c"># 生成签名 (X-CH-SIGN)</span>
<span class="nv">SIGN_PAYLOAD</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">METHOD</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}${</span><span class="nv">BODY_JSON</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">SIGNATURE</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$API_SECRET</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>

<span class="c"># **打印调试信息**</span>
<span class="nb">echo</span> <span class="s2">"==== 请求信息 ===="</span>
<span class="nb">echo</span> <span class="s2">"Timestamp (X-CH-TS): </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Sign Payload (待签名字符串): </span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Signature (X-CH-SIGN): </span><span class="nv">$SIGNATURE</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Request Body: </span><span class="nv">$BODY_JSON</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"=================="</span>

<span class="c"># 发送请求</span>
curl <span class="nt">-X</span> POST <span class="s2">"</span><span class="nv">$API_URL</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$API_KEY</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$BODY_JSON</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.Instant</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Base64</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FameexApiRequest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// API 相关信息</span>
            <span class="nc">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">requestPath</span> <span class="o">=</span> <span class="s">"/sapi/v1/order/test"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiUrl</span> <span class="o">=</span> <span class="n">url</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiKey</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiSecret</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>

            <span class="c1">// 获取当前毫秒级时间戳</span>
            <span class="nc">String</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">toEpochMilli</span><span class="o">());</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span><span class="o">;</span>

            <span class="c1">// 定义请求体 (JSON 格式)</span>
            <span class="nc">String</span> <span class="n">bodyJson</span> <span class="o">=</span> <span class="s">"{\"symbol\":\"BTCUSDT\",\"price\":\"9300\",\"volume\":\"1\",\"side\":\"BUY\",\"type\":\"LIMIT\"}"</span><span class="o">;</span>

            <span class="c1">// 生成签名 (X-CH-SIGN)</span>
            <span class="nc">String</span> <span class="n">signPayload</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span> <span class="o">+</span> <span class="n">bodyJson</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSha256</span><span class="o">(</span><span class="n">signPayload</span><span class="o">,</span> <span class="n">apiSecret</span><span class="o">);</span>

            <span class="c1">// **打印调试信息**</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"==== 请求信息 ===="</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Timestamp (X-CH-TS): "</span> <span class="o">+</span> <span class="n">timestamp</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Sign Payload (待签名字符串): "</span> <span class="o">+</span> <span class="n">signPayload</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Signature (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request Body: "</span> <span class="o">+</span> <span class="n">bodyJson</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"=================="</span><span class="o">);</span>

            <span class="c1">// 发送请求</span>
            <span class="n">sendPostRequest</span><span class="o">(</span><span class="n">apiUrl</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">,</span> <span class="n">signature</span><span class="o">,</span> <span class="n">bodyJson</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// HMAC-SHA256 签名计算</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSha256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">// 发送 HTTP POST 请求</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendPostRequest</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiUrl</span><span class="o">,</span> <span class="nc">String</span> <span class="n">apiKey</span><span class="o">,</span> <span class="nc">String</span> <span class="n">timestamp</span><span class="o">,</span> <span class="nc">String</span> <span class="n">signature</span><span class="o">,</span> <span class="nc">String</span> <span class="n">bodyJson</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="n">apiUrl</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// 发送请求体</span>
            <span class="k">try</span> <span class="o">(</span><span class="nc">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">())</span> <span class="o">{</span>
                <span class="kt">byte</span><span class="o">[]</span> <span class="n">input</span> <span class="o">=</span> <span class="n">bodyJson</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">);</span>
                <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">input</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">input</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="c1">// 读取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response Code: "</span> <span class="o">+</span> <span class="n">responseCode</span><span class="o">);</span>

            <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNextLine</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">());</span>
            <span class="o">}</span>
            <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"bytes"</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"strconv"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// API 相关信息</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com"</span>
    <span class="n">requestPath</span> <span class="o">:=</span> <span class="s">"/sapi/v1/order/test"</span>
    <span class="n">apiURL</span> <span class="o">:=</span> <span class="n">url</span> <span class="o">+</span> <span class="n">requestPath</span>
    <span class="n">apiKey</span> <span class="o">:=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">apiSecret</span> <span class="o">:=</span> <span class="s">"您的API-SECRET"</span>

    <span class="c">// 生成当前毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">strconv</span><span class="o">.</span><span class="n">FormatInt</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span><span class="o">/</span><span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">),</span> <span class="m">10</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

    <span class="c">// 定义请求体 (JSON 格式)</span>
    <span class="n">bodyJSON</span> <span class="o">:=</span> <span class="s">`{"symbol":"BTCUSDT","price":"9300","volume":"1","side":"BUY","type":"LIMIT"}`</span>

    <span class="c">// 生成签名 (X-CH-SIGN)</span>
    <span class="n">signPayload</span> <span class="o">:=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span> <span class="o">+</span> <span class="n">bodyJSON</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">signPayload</span><span class="p">,</span> <span class="n">apiSecret</span><span class="p">)</span>

    <span class="c">// **打印调试信息**</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">signPayload</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Request Body:"</span><span class="p">,</span> <span class="n">bodyJSON</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">sendPostRequest</span><span class="p">(</span><span class="n">apiURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">bodyJSON</span><span class="p">)</span>
<span class="p">}</span>

<span class="c">// HMAC-SHA256 签名计算</span>
<span class="k">func</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 发送 HTTP POST 请求</span>
<span class="k">func</span> <span class="n">sendPostRequest</span><span class="p">(</span><span class="n">apiURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">bodyJSON</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>

    <span class="c">// 创建请求</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">apiURL</span><span class="p">,</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">bodyJSON</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error creating request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置 Headers</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error sending request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># API 相关信息
</span><span class="n">URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
<span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/sapi/v1/order/test"</span>
<span class="n">API_URL</span> <span class="o">=</span> <span class="n">URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>

<span class="c1"># 生成当前毫秒级时间戳
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="c1"># 请求方法
</span><span class="n">METHOD</span> <span class="o">=</span> <span class="s">"POST"</span>

<span class="c1"># 定义请求体 (JSON 格式)
</span><span class="n">body_json</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"symbol"</span><span class="p">:</span> <span class="s">"BTCUSDT"</span><span class="p">,</span>
    <span class="s">"price"</span><span class="p">:</span> <span class="s">"9300"</span><span class="p">,</span>
    <span class="s">"volume"</span><span class="p">:</span> <span class="s">"1"</span><span class="p">,</span>
    <span class="s">"side"</span><span class="p">:</span> <span class="s">"BUY"</span><span class="p">,</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"LIMIT"</span>
<span class="p">}</span>
<span class="n">body_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body_json</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>  <span class="c1"># 确保 JSON 字符串格式正确
</span>
<span class="c1"># 生成签名 (X-CH-SIGN)
</span><span class="n">sign_payload</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">METHOD</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span> <span class="o">+</span> <span class="n">body_str</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">sign_payload</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c1"># **打印调试信息**
</span><span class="k">print</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">sign_payload</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Request Body:"</span><span class="p">,</span> <span class="n">body_str</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

<span class="c1"># 发送请求
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">API_URL</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 打印响应
</span><span class="k">print</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>

<span class="c1">// API 相关信息</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$request_path</span> <span class="o">=</span> <span class="s2">"/sapi/v1/order/test"</span><span class="p">;</span>
<span class="nv">$api_url</span> <span class="o">=</span> <span class="nv">$url</span> <span class="mf">.</span> <span class="nv">$request_path</span><span class="p">;</span>
<span class="nv">$api_key</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$api_secret</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 请求方法</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="s2">"POST"</span><span class="p">;</span>

<span class="c1">// 定义请求体 (JSON 格式)</span>
<span class="nv">$body_json</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">([</span>
    <span class="s2">"symbol"</span> <span class="o">=&gt;</span> <span class="s2">"BTCUSDT"</span><span class="p">,</span>
    <span class="s2">"price"</span> <span class="o">=&gt;</span> <span class="s2">"9300"</span><span class="p">,</span>
    <span class="s2">"volume"</span> <span class="o">=&gt;</span> <span class="s2">"1"</span><span class="p">,</span>
    <span class="s2">"side"</span> <span class="o">=&gt;</span> <span class="s2">"BUY"</span><span class="p">,</span>
    <span class="s2">"type"</span> <span class="o">=&gt;</span> <span class="s2">"LIMIT"</span>
<span class="p">],</span> <span class="no">JSON_UNESCAPED_SLASHES</span><span class="p">);</span> <span class="c1">// 确保 JSON 格式正确</span>

<span class="c1">// 生成签名 (X-CH-SIGN)</span>
<span class="nv">$sign_payload</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$method</span> <span class="mf">.</span> <span class="nv">$request_path</span> <span class="mf">.</span> <span class="nv">$body_json</span><span class="p">;</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$sign_payload</span><span class="p">,</span> <span class="nv">$api_secret</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="k">echo</span> <span class="s2">"==== 请求信息 ====</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Timestamp (X-CH-TS): "</span> <span class="mf">.</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Sign Payload (待签名字符串): "</span> <span class="mf">.</span> <span class="nv">$sign_payload</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Signature (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$signature</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Request Body: "</span> <span class="mf">.</span> <span class="nv">$body_json</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"==================</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// 发送请求</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$api_key</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="p">];</span>

<span class="c1">// 使用 cURL 发送 POST 请求</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$api_url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$body_json</span><span class="p">);</span>

<span class="c1">// 执行请求并获取响应</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$http_code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 打印响应</span>
<span class="k">echo</span> <span class="s2">"Response Code: </span><span class="nv">$http_code</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Response Body: </span><span class="nv">$response</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://openapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/sapi/v1/order/test</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_URL</span> <span class="o">=</span> <span class="nx">URL</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">();</span>

<span class="c1">// 请求方法</span>
<span class="kd">const</span> <span class="nx">METHOD</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 定义请求体 (JSON 格式)</span>
<span class="kd">const</span> <span class="nx">bodyJson</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="na">symbol</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BTCUSDT</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">price</span><span class="p">:</span> <span class="dl">"</span><span class="s2">9300</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">volume</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">side</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BUY</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">LIMIT</span><span class="dl">"</span><span class="p">,</span>
<span class="p">});</span>

<span class="c1">// 生成签名 (X-CH-SIGN)</span>
<span class="kd">const</span> <span class="nx">signPayload</span> <span class="o">=</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">METHOD</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span> <span class="o">+</span> <span class="nx">bodyJson</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span>
  <span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">"</span><span class="s2">sha256</span><span class="dl">"</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">signPayload</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="dl">"</span><span class="s2">hex</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==== 请求信息 ====</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Timestamp (X-CH-TS):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">timestamp</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Sign Payload (待签名字符串):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signPayload</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Signature (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Request Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">bodyJson</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==================</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// 发送请求</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">axios</span>
  <span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">API_URL</span><span class="p">,</span> <span class="nx">bodyJson</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Code:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">});</span>

</code></pre></div>
<blockquote>
<p>body</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="nl">"symbol"</span><span class="p">:</span><span class="s2">"BTCUSDT"</span><span class="p">,</span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"9300"</span><span class="p">,</span><span class="nl">"volume"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="nl">"side"</span><span class="p">:</span><span class="s2">"BUY"</span><span class="p">,</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"LIMIT"</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">symbol<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>大写</code>币对名称，例如<code>BTCUSDT</code> (参考 <a href="#现货交易-公共-币对列表">币对列表</a> 的 <code>symbol</code> )</td>
</tr>
<tr>
<td style="text-align: left">volume<font color="red">*</font></td>
<td style="text-align: left">number</td>
<td style="text-align: left">订单数量，有精度限制，由管理员配置 (参考 <a href="#现货交易-公共-币对列表">币对列表</a> 的 <code>limitVolumeMin</code> )</td>
</tr>
<tr>
<td style="text-align: left">side<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">订单方向，<code>BUY/SELL</code></td>
</tr>
<tr>
<td style="text-align: left">type<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">订单类型，<code>LIMIT/MARKET</code></td>
</tr>
<tr>
<td style="text-align: left">price</td>
<td style="text-align: left">number</td>
<td style="text-align: left">订单价格，对于<code>LIMIT</code>订单必须发送，有精度限制，由管理员配置 (参考 <a href="#现货交易-行情-最近成交">最近成交</a> 的 <code>price</code> )</td>
</tr>
<tr>
<td style="text-align: left">newClientOrderId</td>
<td style="text-align: left">string</td>
<td style="text-align: left">客户端订单标识</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre></div>
<!--

### 批量下单

`POST https://openapi.fameex.com/sapi/v1/batchOrders`

**限速规则: 50次/2s 一个批量最多10个订单**

**请求头**

| 参数名                                 | 类型    | 描述        |
|:---------------------------------------|:--------|:------------|
| X-CH-SIGN<font color="red">\*</font>   | string  | 签名        |
| X-CH-APIKEY<font color="red">\*</font> | string  | 您的API-key |
| X-CH-TS<font color="red">\*</font>     | integer | 时间戳      |

> 请求示例

```http
POST https://openapi.fameex.com/sapi/v1/batchOrders

body
{
    "symbol": "ETHUSDT",
    "orders": [
        {
            "price": 2100.00,
            "volume": 1.00,
            "side": "BUY",
            "batchType": "LIMIT"
        },
        {
            "price": 2200.00,
            "volume": 2.00,
            "side": "SELL",
            "batchType": "LIMIT"
        }
    ]
}
```

**请求参数**

| 参数名    | 类型   | 示例           | 描述     |
|:----------|:-------|:---------------|:---------|
| symbol    | string | `ETHUSDT`      | 币对名称 |
| price     | float  | `2100.00`      | 价格     |
| volume    | float  | `1.00`         | 数量     |
| side      | string | `BUY/SELL`     | 方向     |
| batchType | string | `LIMIT/MARKET` | 类型     |

> 返回示例

```json
{
    "ids": [
        165964665990709251,
        165964665990709252,
        165964665990709253
    ]
}
```

**返回参数**

| 参数名 | 类型  | 示例 | 描述       |
|:-------|:------|:-----|:-----------|
| ids    | array |      | 订单id数组 |

-->
<h3 id='1285d91409'>订单查询</h3>
<p><code>GET https://openapi.fameex.com/sapi/v1/order</code></p>

<p><strong>限速规则: 20次/2s</strong></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://openapi.fameex.com/sapi/v1/order?orderId=2618039663715064005&amp;symbol=btcusdt

// request headers
Content-Type: application/json
X-CH-TS: 1739503617552
X-CH-APIKEY: 您的API-KEY
X-CH-SIGN: 325b02a8444da041c71fb6e3c35c6baf87e5cb48acc19e4cd312b8bf821bfc1b
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># 设置 API 相关信息</span>
<span class="nv">API_URL</span><span class="o">=</span><span class="s2">"https://openapi.fameex.com"</span>
<span class="nv">REQUEST_URL</span><span class="o">=</span><span class="s2">"/sapi/v1/order"</span>
<span class="nv">QUERY_STRING</span><span class="o">=</span><span class="s2">"?orderId=2618039663715064005&amp;symbol=btcusdt"</span>

<span class="c"># 计算完整的请求路径</span>
<span class="nv">REQUEST_PATH</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">REQUEST_URL</span><span class="k">}${</span><span class="nv">QUERY_STRING</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">FULL_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">API_URL</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>

<span class="c"># API 认证信息</span>
<span class="nv">API_KEY</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">API_SECRET</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 生成当前毫秒级时间戳</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="si">$(</span><span class="nb">date</span> +%s | <span class="nb">awk</span> <span class="s1">'{print $1 * 1000}'</span><span class="si">)</span>

<span class="c"># 定义请求方法</span>
<span class="nv">METHOD</span><span class="o">=</span><span class="s2">"GET"</span>

<span class="c"># 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="nv">SIGN_PAYLOAD</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">METHOD</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">SIGNATURE</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$API_SECRET</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>

<span class="c"># **打印调试信息**</span>
<span class="nb">echo</span> <span class="s2">"==== 请求信息 ===="</span>
<span class="nb">echo</span> <span class="s2">"Timestamp (X-CH-TS): </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Sign Payload (待签名字符串): </span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Signature (X-CH-SIGN): </span><span class="nv">$SIGNATURE</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Request URL: </span><span class="k">${</span><span class="nv">FULL_URL</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"=================="</span>

<span class="c"># 发送 GET 请求</span>
curl <span class="nt">-X</span> GET <span class="s2">"</span><span class="nv">$FULL_URL</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$API_KEY</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.Instant</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FameexApiRequest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// API 相关信息</span>
            <span class="nc">String</span> <span class="n">apiUrl</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">requestUrl</span> <span class="o">=</span> <span class="s">"/sapi/v1/order"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">queryString</span> <span class="o">=</span> <span class="s">"?orderId=2618039663715064005&amp;symbol=btcusdt"</span><span class="o">;</span>

            <span class="c1">// 计算完整的请求路径</span>
            <span class="nc">String</span> <span class="n">requestPath</span> <span class="o">=</span> <span class="n">requestUrl</span> <span class="o">+</span> <span class="n">queryString</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">fullUrl</span> <span class="o">=</span> <span class="n">apiUrl</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>

            <span class="c1">// API 认证信息</span>
            <span class="nc">String</span> <span class="n">apiKey</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiSecret</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>

            <span class="c1">// 生成当前毫秒级时间戳</span>
            <span class="nc">String</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">toEpochMilli</span><span class="o">());</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"GET"</span><span class="o">;</span>

            <span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
            <span class="nc">String</span> <span class="n">signPayload</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSha256</span><span class="o">(</span><span class="n">signPayload</span><span class="o">,</span> <span class="n">apiSecret</span><span class="o">);</span>

            <span class="c1">// **打印调试信息**</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"==== 请求信息 ===="</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Timestamp (X-CH-TS): "</span> <span class="o">+</span> <span class="n">timestamp</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Sign Payload (待签名字符串): "</span> <span class="o">+</span> <span class="n">signPayload</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Signature (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request URL: "</span> <span class="o">+</span> <span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"=================="</span><span class="o">);</span>

            <span class="c1">// 发送 GET 请求</span>
            <span class="n">sendGetRequest</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// HMAC-SHA256 签名计算</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSha256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>

        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">// 发送 HTTP GET 请求</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendGetRequest</span><span class="o">(</span><span class="nc">String</span> <span class="n">fullUrl</span><span class="o">,</span> <span class="nc">String</span> <span class="n">apiKey</span><span class="o">,</span> <span class="nc">String</span> <span class="n">timestamp</span><span class="o">,</span> <span class="nc">String</span> <span class="n">signature</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>

            <span class="c1">// 设置请求头</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">);</span>

            <span class="c1">// 发送请求并获取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response Code: "</span> <span class="o">+</span> <span class="n">responseCode</span><span class="o">);</span>

            <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNextLine</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">());</span>
            <span class="o">}</span>
            <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"strconv"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// API 相关信息</span>
    <span class="n">apiURL</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com"</span>
    <span class="n">requestURL</span> <span class="o">:=</span> <span class="s">"/sapi/v1/order"</span>
    <span class="n">queryString</span> <span class="o">:=</span> <span class="s">"?orderId=2618039663715064005&amp;symbol=btcusdt"</span>

    <span class="c">// 计算完整的请求路径</span>
    <span class="n">requestPath</span> <span class="o">:=</span> <span class="n">requestURL</span> <span class="o">+</span> <span class="n">queryString</span>
    <span class="n">fullURL</span> <span class="o">:=</span> <span class="n">apiURL</span> <span class="o">+</span> <span class="n">requestPath</span>

    <span class="c">// API 认证信息</span>
    <span class="n">apiKey</span> <span class="o">:=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">apiSecret</span> <span class="o">:=</span> <span class="s">"您的API-SECRET"</span>

    <span class="c">// 生成当前毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">strconv</span><span class="o">.</span><span class="n">FormatInt</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span><span class="o">/</span><span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">),</span> <span class="m">10</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"GET"</span>

    <span class="c">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
    <span class="n">signPayload</span> <span class="o">:=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">signPayload</span><span class="p">,</span> <span class="n">apiSecret</span><span class="p">)</span>

    <span class="c">// **打印调试信息**</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">signPayload</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
<span class="p">}</span>

<span class="c">// 计算 HMAC-SHA256 签名</span>
<span class="k">func</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 发送 HTTP GET 请求</span>
<span class="k">func</span> <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>

    <span class="c">// 创建请求</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">,</span> <span class="no">nil</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error creating request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置 Headers</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error sending request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">resp</span><span class="o">.</span><span class="n">StatusCode</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
<span class="n">REQUEST_URL</span> <span class="o">=</span> <span class="s">"/sapi/v1/order"</span>
<span class="n">QUERY_STRING</span> <span class="o">=</span> <span class="s">"?orderId=2618039663715064005&amp;symbol=btcusdt"</span>

<span class="c1"># 计算完整的请求路径
</span><span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="n">REQUEST_URL</span> <span class="o">+</span> <span class="n">QUERY_STRING</span>
<span class="n">FULL_URL</span> <span class="o">=</span> <span class="n">API_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>

<span class="c1"># API 认证信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>

<span class="c1"># 生成当前毫秒级时间戳
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="c1"># 请求方法
</span><span class="n">METHOD</span> <span class="o">=</span> <span class="s">"GET"</span>

<span class="c1"># 生成签名 (X-CH-SIGN) - GET 请求没有 body
</span><span class="n">SIGN_PAYLOAD</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">METHOD</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">SIGNATURE</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">SIGN_PAYLOAD</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c1"># **打印调试信息**
</span><span class="k">print</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">SIGN_PAYLOAD</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">SIGNATURE</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">FULL_URL</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

<span class="c1"># 发送 GET 请求
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">SIGNATURE</span><span class="p">,</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">FULL_URL</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="c1"># 打印响应
</span><span class="k">print</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>

<span class="c1">// API 相关信息</span>
<span class="nv">$API_URL</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$REQUEST_URL</span> <span class="o">=</span> <span class="s2">"/sapi/v1/order"</span><span class="p">;</span>
<span class="nv">$QUERY_STRING</span> <span class="o">=</span> <span class="s2">"?orderId=2618039663715064005&amp;symbol=btcusdt"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="nv">$REQUEST_PATH</span> <span class="o">=</span> <span class="nv">$REQUEST_URL</span> <span class="mf">.</span> <span class="nv">$QUERY_STRING</span><span class="p">;</span>
<span class="nv">$FULL_URL</span> <span class="o">=</span> <span class="nv">$API_URL</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// API 认证信息</span>
<span class="nv">$API_KEY</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$API_SECRET</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 请求方法</span>
<span class="nv">$METHOD</span> <span class="o">=</span> <span class="s2">"GET"</span><span class="p">;</span>

<span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="nv">$SIGN_PAYLOAD</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$METHOD</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>
<span class="nv">$SIGNATURE</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$SIGN_PAYLOAD</span><span class="p">,</span> <span class="nv">$API_SECRET</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="k">echo</span> <span class="s2">"==== 请求信息 ====</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Timestamp (X-CH-TS): "</span> <span class="mf">.</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Sign Payload (待签名字符串): "</span> <span class="mf">.</span> <span class="nv">$SIGN_PAYLOAD</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Signature (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$SIGNATURE</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Request URL: "</span> <span class="mf">.</span> <span class="nv">$FULL_URL</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"==================</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// 发送 GET 请求</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$API_KEY</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="p">];</span>

<span class="c1">// 使用 cURL 发送 GET 请求</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$FULL_URL</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// 执行请求并获取响应</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$http_code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 打印响应</span>
<span class="k">echo</span> <span class="s2">"Response Code: </span><span class="nv">$http_code</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Response Body: </span><span class="nv">$response</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="cp">?&gt;</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://openapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/sapi/v1/order</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">QUERY_STRING</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">?orderId=2618039663715064005&amp;symbol=btcusdt</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="nx">REQUEST_URL</span> <span class="o">+</span> <span class="nx">QUERY_STRING</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">FULL_URL</span> <span class="o">=</span> <span class="nx">API_URL</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// API 认证信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">();</span>

<span class="c1">// 请求方法</span>
<span class="kd">const</span> <span class="nx">METHOD</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="kd">const</span> <span class="nx">SIGN_PAYLOAD</span> <span class="o">=</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">METHOD</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">SIGNATURE</span> <span class="o">=</span> <span class="nx">crypto</span>
  <span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">"</span><span class="s2">sha256</span><span class="dl">"</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">SIGN_PAYLOAD</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="dl">"</span><span class="s2">hex</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==== 请求信息 ====</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Timestamp (X-CH-TS):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">timestamp</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Sign Payload (待签名字符串):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">SIGN_PAYLOAD</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Signature (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">SIGNATURE</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Request URL:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">FULL_URL</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==================</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// 发送 GET 请求</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">SIGNATURE</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">axios</span>
  <span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">FULL_URL</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Code:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">orderId<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">订单id（系统生成）</td>
</tr>
<tr>
<td style="text-align: left">symbol<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>小写</code>币对名称，例如：<code>ethusdt</code></td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btcusdt"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"executedQty"</span><span class="p">:</span><span class="w"> </span><span class="mi">0E-16</span><span class="p">,</span><span class="w">
    </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">2618039663715064005</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">97081.1900000000000000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"origQty"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0000100000000000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"avgPrice"</span><span class="p">:</span><span class="w"> </span><span class="mi">0E-16</span><span class="p">,</span><span class="w">
    </span><span class="nl">"transactTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1739867150753</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New Order"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">orderId</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>150695552109032492</code></td>
<td style="text-align: left">订单ID（系统生成）</td>
</tr>
<tr>
<td style="text-align: left">clientOrderId</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>213443</code></td>
<td style="text-align: left">订单ID（用户生成）</td>
</tr>
<tr>
<td style="text-align: left">symbol</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>ethusdt</code></td>
<td style="text-align: left"><code>小写</code>币对名称</td>
</tr>
<tr>
<td style="text-align: left">price</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>4765.29</code></td>
<td style="text-align: left">订单价格</td>
</tr>
<tr>
<td style="text-align: left">origQty</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>1.01</code></td>
<td style="text-align: left">订单数量</td>
</tr>
<tr>
<td style="text-align: left">executedQty</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>0</code></td>
<td style="text-align: left">已经成交订单数量</td>
</tr>
<tr>
<td style="text-align: left">avgPrice</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>4754.24</code></td>
<td style="text-align: left">订单已经成交的平均价格</td>
</tr>
<tr>
<td style="text-align: left">type</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>LIMIT</code></td>
<td style="text-align: left">订单类型。可能出现的值只能为：<code>LIMIT</code>(限价)和<code>MARKET</code>（市价）</td>
</tr>
<tr>
<td style="text-align: left">transactTime</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>1672274311107</code></td>
<td style="text-align: left">时间戳</td>
</tr>
<tr>
<td style="text-align: left">side</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>BUY</code></td>
<td style="text-align: left">订单方向。可能出现的值只能为：<code>BUY</code>（买入做多）和<code>SELL</code>（卖出做空）</td>
</tr>
<tr>
<td style="text-align: left">status</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>New Order</code></td>
<td style="text-align: left">订单状态。可能出现的值为：<code>New Order</code>(新订单，无成交)、<code>Partially Filled</code>（部分成交）、<code>Filled</code>（全部成交）</td>
</tr>
</tbody></table>
<h3 id='v2-2'>订单查询-V2</h3>
<p><code>GET https://openapi.fameex.com/sapi/v2/order</code></p>

<p><strong>限速规则: 20次/2s</strong></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://openapi.fameex.com/sapi/v2/order?orderId=2618039663715064005&amp;symbol=btcusdt

// request headers
Content-Type: application/json
X-CH-TS: 1739503617552
X-CH-APIKEY: 您的API-KEY
X-CH-SIGN: 325b02a8444da041c71fb6e3c35c6baf87e5cb48acc19e4cd312b8bf821bfc1b
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># 设置 API 相关信息</span>
<span class="nv">API_URL</span><span class="o">=</span><span class="s2">"https://openapi.fameex.com"</span>
<span class="nv">REQUEST_URL</span><span class="o">=</span><span class="s2">"/sapi/v2/order"</span>
<span class="nv">QUERY_STRING</span><span class="o">=</span><span class="s2">"?orderId=2618039663715064005&amp;symbol=btcusdt"</span>

<span class="c"># 计算完整的请求路径</span>
<span class="nv">REQUEST_PATH</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">REQUEST_URL</span><span class="k">}${</span><span class="nv">QUERY_STRING</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">FULL_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">API_URL</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>

<span class="c"># API 认证信息</span>
<span class="nv">API_KEY</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">API_SECRET</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 生成当前毫秒级时间戳</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="si">$(</span><span class="nb">date</span> +%s | <span class="nb">awk</span> <span class="s1">'{print $1 * 1000}'</span><span class="si">)</span>

<span class="c"># 定义请求方法</span>
<span class="nv">METHOD</span><span class="o">=</span><span class="s2">"GET"</span>

<span class="c"># 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="nv">SIGN_PAYLOAD</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">METHOD</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">SIGNATURE</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$API_SECRET</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>

<span class="c"># **打印调试信息**</span>
<span class="nb">echo</span> <span class="s2">"==== 请求信息 ===="</span>
<span class="nb">echo</span> <span class="s2">"Timestamp (X-CH-TS): </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Sign Payload (待签名字符串): </span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Signature (X-CH-SIGN): </span><span class="nv">$SIGNATURE</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Request URL: </span><span class="k">${</span><span class="nv">FULL_URL</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"=================="</span>

<span class="c"># 发送 GET 请求</span>
curl <span class="nt">-X</span> GET <span class="s2">"</span><span class="nv">$FULL_URL</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$API_KEY</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.Instant</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FameexApiRequest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// API 相关信息</span>
            <span class="nc">String</span> <span class="n">apiUrl</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">requestUrl</span> <span class="o">=</span> <span class="s">"/sapi/v2/order"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">queryString</span> <span class="o">=</span> <span class="s">"?orderId=2618039663715064005&amp;symbol=btcusdt"</span><span class="o">;</span>

            <span class="c1">// 计算完整的请求路径</span>
            <span class="nc">String</span> <span class="n">requestPath</span> <span class="o">=</span> <span class="n">requestUrl</span> <span class="o">+</span> <span class="n">queryString</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">fullUrl</span> <span class="o">=</span> <span class="n">apiUrl</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>

            <span class="c1">// API 认证信息</span>
            <span class="nc">String</span> <span class="n">apiKey</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiSecret</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>

            <span class="c1">// 生成当前毫秒级时间戳</span>
            <span class="nc">String</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">toEpochMilli</span><span class="o">());</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"GET"</span><span class="o">;</span>

            <span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
            <span class="nc">String</span> <span class="n">signPayload</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSha256</span><span class="o">(</span><span class="n">signPayload</span><span class="o">,</span> <span class="n">apiSecret</span><span class="o">);</span>

            <span class="c1">// **打印调试信息**</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"==== 请求信息 ===="</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Timestamp (X-CH-TS): "</span> <span class="o">+</span> <span class="n">timestamp</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Sign Payload (待签名字符串): "</span> <span class="o">+</span> <span class="n">signPayload</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Signature (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request URL: "</span> <span class="o">+</span> <span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"=================="</span><span class="o">);</span>

            <span class="c1">// 发送 GET 请求</span>
            <span class="n">sendGetRequest</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// HMAC-SHA256 签名计算</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSha256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>

        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">// 发送 HTTP GET 请求</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendGetRequest</span><span class="o">(</span><span class="nc">String</span> <span class="n">fullUrl</span><span class="o">,</span> <span class="nc">String</span> <span class="n">apiKey</span><span class="o">,</span> <span class="nc">String</span> <span class="n">timestamp</span><span class="o">,</span> <span class="nc">String</span> <span class="n">signature</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>

            <span class="c1">// 设置请求头</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">);</span>

            <span class="c1">// 发送请求并获取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response Code: "</span> <span class="o">+</span> <span class="n">responseCode</span><span class="o">);</span>

            <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNextLine</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">());</span>
            <span class="o">}</span>
            <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"strconv"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// API 相关信息</span>
    <span class="n">apiURL</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com"</span>
    <span class="n">requestURL</span> <span class="o">:=</span> <span class="s">"/sapi/v2/order"</span>
    <span class="n">queryString</span> <span class="o">:=</span> <span class="s">"?orderId=2618039663715064005&amp;symbol=btcusdt"</span>

    <span class="c">// 计算完整的请求路径</span>
    <span class="n">requestPath</span> <span class="o">:=</span> <span class="n">requestURL</span> <span class="o">+</span> <span class="n">queryString</span>
    <span class="n">fullURL</span> <span class="o">:=</span> <span class="n">apiURL</span> <span class="o">+</span> <span class="n">requestPath</span>

    <span class="c">// API 认证信息</span>
    <span class="n">apiKey</span> <span class="o">:=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">apiSecret</span> <span class="o">:=</span> <span class="s">"您的API-SECRET"</span>

    <span class="c">// 生成当前毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">strconv</span><span class="o">.</span><span class="n">FormatInt</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span><span class="o">/</span><span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">),</span> <span class="m">10</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"GET"</span>

    <span class="c">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
    <span class="n">signPayload</span> <span class="o">:=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">signPayload</span><span class="p">,</span> <span class="n">apiSecret</span><span class="p">)</span>

    <span class="c">// **打印调试信息**</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">signPayload</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
<span class="p">}</span>

<span class="c">// 计算 HMAC-SHA256 签名</span>
<span class="k">func</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 发送 HTTP GET 请求</span>
<span class="k">func</span> <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>

    <span class="c">// 创建请求</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">,</span> <span class="no">nil</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error creating request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置 Headers</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error sending request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">resp</span><span class="o">.</span><span class="n">StatusCode</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
<span class="n">REQUEST_URL</span> <span class="o">=</span> <span class="s">"/sapi/v2/order"</span>
<span class="n">QUERY_STRING</span> <span class="o">=</span> <span class="s">"?orderId=2618039663715064005&amp;symbol=btcusdt"</span>

<span class="c1"># 计算完整的请求路径
</span><span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="n">REQUEST_URL</span> <span class="o">+</span> <span class="n">QUERY_STRING</span>
<span class="n">FULL_URL</span> <span class="o">=</span> <span class="n">API_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>

<span class="c1"># API 认证信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>

<span class="c1"># 生成当前毫秒级时间戳
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="c1"># 请求方法
</span><span class="n">METHOD</span> <span class="o">=</span> <span class="s">"GET"</span>

<span class="c1"># 生成签名 (X-CH-SIGN) - GET 请求没有 body
</span><span class="n">SIGN_PAYLOAD</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">METHOD</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">SIGNATURE</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">SIGN_PAYLOAD</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c1"># **打印调试信息**
</span><span class="k">print</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">SIGN_PAYLOAD</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">SIGNATURE</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">FULL_URL</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

<span class="c1"># 发送 GET 请求
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">SIGNATURE</span><span class="p">,</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">FULL_URL</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="c1"># 打印响应
</span><span class="k">print</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>

<span class="c1">// API 相关信息</span>
<span class="nv">$API_URL</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$REQUEST_URL</span> <span class="o">=</span> <span class="s2">"/sapi/v2/order"</span><span class="p">;</span>
<span class="nv">$QUERY_STRING</span> <span class="o">=</span> <span class="s2">"?orderId=2618039663715064005&amp;symbol=btcusdt"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="nv">$REQUEST_PATH</span> <span class="o">=</span> <span class="nv">$REQUEST_URL</span> <span class="mf">.</span> <span class="nv">$QUERY_STRING</span><span class="p">;</span>
<span class="nv">$FULL_URL</span> <span class="o">=</span> <span class="nv">$API_URL</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// API 认证信息</span>
<span class="nv">$API_KEY</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$API_SECRET</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 请求方法</span>
<span class="nv">$METHOD</span> <span class="o">=</span> <span class="s2">"GET"</span><span class="p">;</span>

<span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="nv">$SIGN_PAYLOAD</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$METHOD</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>
<span class="nv">$SIGNATURE</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$SIGN_PAYLOAD</span><span class="p">,</span> <span class="nv">$API_SECRET</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="k">echo</span> <span class="s2">"==== 请求信息 ====</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Timestamp (X-CH-TS): "</span> <span class="mf">.</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Sign Payload (待签名字符串): "</span> <span class="mf">.</span> <span class="nv">$SIGN_PAYLOAD</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Signature (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$SIGNATURE</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Request URL: "</span> <span class="mf">.</span> <span class="nv">$FULL_URL</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"==================</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// 发送 GET 请求</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$API_KEY</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="p">];</span>

<span class="c1">// 使用 cURL 发送 GET 请求</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$FULL_URL</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// 执行请求并获取响应</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$http_code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 打印响应</span>
<span class="k">echo</span> <span class="s2">"Response Code: </span><span class="nv">$http_code</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Response Body: </span><span class="nv">$response</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="cp">?&gt;</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://openapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/sapi/v2/order</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">QUERY_STRING</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">?orderId=2618039663715064005&amp;symbol=btcusdt</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="nx">REQUEST_URL</span> <span class="o">+</span> <span class="nx">QUERY_STRING</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">FULL_URL</span> <span class="o">=</span> <span class="nx">API_URL</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// API 认证信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">();</span>

<span class="c1">// 请求方法</span>
<span class="kd">const</span> <span class="nx">METHOD</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="kd">const</span> <span class="nx">SIGN_PAYLOAD</span> <span class="o">=</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">METHOD</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">SIGNATURE</span> <span class="o">=</span> <span class="nx">crypto</span>
  <span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">"</span><span class="s2">sha256</span><span class="dl">"</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">SIGN_PAYLOAD</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="dl">"</span><span class="s2">hex</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==== 请求信息 ====</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Timestamp (X-CH-TS):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">timestamp</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Sign Payload (待签名字符串):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">SIGN_PAYLOAD</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Signature (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">SIGNATURE</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Request URL:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">FULL_URL</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==================</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// 发送 GET 请求</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">SIGNATURE</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">axios</span>
  <span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">FULL_URL</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Code:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">orderId<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">订单id</td>
</tr>
<tr>
<td style="text-align: left">symbol<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>小写</code>币对名称，例如：<code>ethusdt</code></td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ethusdt"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"executedQty"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150695552109032492"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">4765.29</span><span class="p">,</span><span class="w">
    </span><span class="nl">"origQty"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.01</span><span class="p">,</span><span class="w">
    </span><span class="nl">"avgPrice"</span><span class="p">:</span><span class="w"> </span><span class="mf">4754.24</span><span class="p">,</span><span class="w">
    </span><span class="nl">"transactTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1672274311107</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New Order"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">orderId</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>150695552109032492</code></td>
<td style="text-align: left">订单ID（系统生成）</td>
</tr>
<tr>
<td style="text-align: left">clientOrderId</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>213443</code></td>
<td style="text-align: left">订单ID（用户生成）</td>
</tr>
<tr>
<td style="text-align: left">symbol</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>ethusdt</code></td>
<td style="text-align: left"><code>小写</code>币对名称</td>
</tr>
<tr>
<td style="text-align: left">price</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>4765.29</code></td>
<td style="text-align: left">订单价格</td>
</tr>
<tr>
<td style="text-align: left">origQty</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>1.01</code></td>
<td style="text-align: left">订单数量</td>
</tr>
<tr>
<td style="text-align: left">executedQty</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>0</code></td>
<td style="text-align: left">已经成交订单数量</td>
</tr>
<tr>
<td style="text-align: left">avgPrice</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>4754.24</code></td>
<td style="text-align: left">订单已经成交的平均价格</td>
</tr>
<tr>
<td style="text-align: left">type</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>LIMIT</code></td>
<td style="text-align: left">订单类型。可能出现的值只能为：<code>LIMIT</code>(限价)和<code>MARKET</code>（市价）</td>
</tr>
<tr>
<td style="text-align: left">transactTime</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>1672274311107</code></td>
<td style="text-align: left">时间戳</td>
</tr>
<tr>
<td style="text-align: left">side</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>BUY</code></td>
<td style="text-align: left">订单方向。可能出现的值只能为：<code>BUY</code>（买入做多）和<code>SELL</code>（卖出做空）</td>
</tr>
<tr>
<td style="text-align: left">status</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>New Order</code></td>
<td style="text-align: left">订单状态。可能出现的值为：<code>New Order</code>(新订单，无成交)、<code>Partially Filled</code>（部分成交）、<code>Filled</code>（全部成交）</td>
</tr>
</tbody></table>
<h3 id='4e53c0fccd'>撤销订单</h3>
<p><code>POST https://openapi.fameex.com/sapi/v1/cancel</code></p>

<p><strong>限速规则: 100次/2s</strong></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">POST https://openapi.fameex.com/sapi/v1/cancel

// request headers
Content-Type: application/json
X-CH-TS: 1739945835000
X-CH-APIKEY: 您的API-KEY
X-CH-SIGN: 3c22ee3d2940df5e9dc5b7b862ba3d75e805e97a242f52f12fec9d16bc73e1c7
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># 设置 API 相关信息</span>
<span class="nv">URL</span><span class="o">=</span><span class="s2">"https://openapi.fameex.com"</span>
<span class="nv">REQUEST_PATH</span><span class="o">=</span><span class="s2">"/sapi/v1/cancel"</span>
<span class="nv">API_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">URL</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">API_KEY</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">API_SECRET</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 生成当前毫秒级时间戳</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="si">$(</span><span class="nb">date</span> +%s | <span class="nb">awk</span> <span class="s1">'{print $1 * 1000}'</span><span class="si">)</span>

<span class="c"># 定义请求方法</span>
<span class="nv">METHOD</span><span class="o">=</span><span class="s2">"POST"</span>

<span class="c"># 定义请求体 (JSON 格式)</span>
<span class="nv">BODY_JSON</span><span class="o">=</span><span class="s1">'{"symbol":"btcusdt","orderId":"2618039663715064005"}'</span>

<span class="c"># 生成签名 (X-CH-SIGN)</span>
<span class="nv">SIGN_PAYLOAD</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">METHOD</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}${</span><span class="nv">BODY_JSON</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">SIGNATURE</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$API_SECRET</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>

<span class="c"># **打印调试信息**</span>
<span class="nb">echo</span> <span class="s2">"==== 请求信息 ===="</span>
<span class="nb">echo</span> <span class="s2">"Timestamp (X-CH-TS): </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Sign Payload (待签名字符串): </span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Signature (X-CH-SIGN): </span><span class="nv">$SIGNATURE</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Request Body: </span><span class="nv">$BODY_JSON</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"=================="</span>

<span class="c"># 发送请求</span>
curl <span class="nt">-X</span> POST <span class="s2">"</span><span class="nv">$API_URL</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$API_KEY</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$BODY_JSON</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.Instant</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Base64</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FameexApiRequest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// API 相关信息</span>
            <span class="nc">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">requestPath</span> <span class="o">=</span> <span class="s">"/sapi/v1/cancel"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiUrl</span> <span class="o">=</span> <span class="n">url</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiKey</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiSecret</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>

            <span class="c1">// 获取当前毫秒级时间戳</span>
            <span class="nc">String</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">toEpochMilli</span><span class="o">());</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span><span class="o">;</span>

            <span class="c1">// 定义请求体 (JSON 格式)</span>
            <span class="nc">String</span> <span class="n">bodyJson</span> <span class="o">=</span> <span class="s">"{\"symbol\":\"btcusdt\",\"orderId\":\"2618039663715064005\""</span><span class="o">;</span>

            <span class="c1">// 生成签名 (X-CH-SIGN)</span>
            <span class="nc">String</span> <span class="n">signPayload</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span> <span class="o">+</span> <span class="n">bodyJson</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSha256</span><span class="o">(</span><span class="n">signPayload</span><span class="o">,</span> <span class="n">apiSecret</span><span class="o">);</span>

            <span class="c1">// **打印调试信息**</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"==== 请求信息 ===="</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Timestamp (X-CH-TS): "</span> <span class="o">+</span> <span class="n">timestamp</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Sign Payload (待签名字符串): "</span> <span class="o">+</span> <span class="n">signPayload</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Signature (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request Body: "</span> <span class="o">+</span> <span class="n">bodyJson</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"=================="</span><span class="o">);</span>

            <span class="c1">// 发送请求</span>
            <span class="n">sendPostRequest</span><span class="o">(</span><span class="n">apiUrl</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">,</span> <span class="n">signature</span><span class="o">,</span> <span class="n">bodyJson</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// HMAC-SHA256 签名计算</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSha256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">// 发送 HTTP POST 请求</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendPostRequest</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiUrl</span><span class="o">,</span> <span class="nc">String</span> <span class="n">apiKey</span><span class="o">,</span> <span class="nc">String</span> <span class="n">timestamp</span><span class="o">,</span> <span class="nc">String</span> <span class="n">signature</span><span class="o">,</span> <span class="nc">String</span> <span class="n">bodyJson</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="n">apiUrl</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// 发送请求体</span>
            <span class="k">try</span> <span class="o">(</span><span class="nc">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">())</span> <span class="o">{</span>
                <span class="kt">byte</span><span class="o">[]</span> <span class="n">input</span> <span class="o">=</span> <span class="n">bodyJson</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">);</span>
                <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">input</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">input</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="c1">// 读取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response Code: "</span> <span class="o">+</span> <span class="n">responseCode</span><span class="o">);</span>

            <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNextLine</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">());</span>
            <span class="o">}</span>
            <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"bytes"</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"strconv"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// API 相关信息</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com"</span>
    <span class="n">requestPath</span> <span class="o">:=</span> <span class="s">"/sapi/v1/cancel"</span>
    <span class="n">apiURL</span> <span class="o">:=</span> <span class="n">url</span> <span class="o">+</span> <span class="n">requestPath</span>
    <span class="n">apiKey</span> <span class="o">:=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">apiSecret</span> <span class="o">:=</span> <span class="s">"您的API-SECRET"</span>

    <span class="c">// 生成当前毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">strconv</span><span class="o">.</span><span class="n">FormatInt</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span><span class="o">/</span><span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">),</span> <span class="m">10</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

    <span class="c">// 定义请求体 (JSON 格式)</span>
    <span class="n">bodyJSON</span> <span class="o">:=</span> <span class="s">`{"symbol":"btcusdt","orderId":"2618039663715064005"}`</span>

    <span class="c">// 生成签名 (X-CH-SIGN)</span>
    <span class="n">signPayload</span> <span class="o">:=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span> <span class="o">+</span> <span class="n">bodyJSON</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">signPayload</span><span class="p">,</span> <span class="n">apiSecret</span><span class="p">)</span>

    <span class="c">// **打印调试信息**</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">signPayload</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Request Body:"</span><span class="p">,</span> <span class="n">bodyJSON</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">sendPostRequest</span><span class="p">(</span><span class="n">apiURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">bodyJSON</span><span class="p">)</span>
<span class="p">}</span>

<span class="c">// HMAC-SHA256 签名计算</span>
<span class="k">func</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 发送 HTTP POST 请求</span>
<span class="k">func</span> <span class="n">sendPostRequest</span><span class="p">(</span><span class="n">apiURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">bodyJSON</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>

    <span class="c">// 创建请求</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">apiURL</span><span class="p">,</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">bodyJSON</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error creating request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置 Headers</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error sending request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># API 相关信息
</span><span class="n">URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
<span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/sapi/v1/cancel"</span>
<span class="n">API_URL</span> <span class="o">=</span> <span class="n">URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>

<span class="c1"># 生成当前毫秒级时间戳
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="c1"># 请求方法
</span><span class="n">METHOD</span> <span class="o">=</span> <span class="s">"POST"</span>

<span class="c1"># 定义请求体 (JSON 格式)
</span><span class="n">body_json</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"symbol"</span><span class="p">:</span> <span class="s">"btcusdt"</span><span class="p">,</span>
    <span class="s">"orderId"</span><span class="p">:</span> <span class="s">"2618039663715064005"</span>
<span class="p">}</span>
<span class="n">body_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body_json</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>  <span class="c1"># 确保 JSON 字符串格式正确
</span>
<span class="c1"># 生成签名 (X-CH-SIGN)
</span><span class="n">sign_payload</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">METHOD</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span> <span class="o">+</span> <span class="n">body_str</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">sign_payload</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c1"># **打印调试信息**
</span><span class="k">print</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">sign_payload</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Request Body:"</span><span class="p">,</span> <span class="n">body_str</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

<span class="c1"># 发送请求
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">API_URL</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 打印响应
</span><span class="k">print</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>

<span class="c1">// API 相关信息</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$request_path</span> <span class="o">=</span> <span class="s2">"/sapi/v1/cancel"</span><span class="p">;</span>
<span class="nv">$api_url</span> <span class="o">=</span> <span class="nv">$url</span> <span class="mf">.</span> <span class="nv">$request_path</span><span class="p">;</span>
<span class="nv">$api_key</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$api_secret</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 请求方法</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="s2">"POST"</span><span class="p">;</span>

<span class="c1">// 定义请求体 (JSON 格式)</span>
<span class="nv">$body_json</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">([</span>
    <span class="s2">"symbol"</span> <span class="o">=&gt;</span> <span class="s2">"btcusdt"</span><span class="p">,</span>
    <span class="s2">"orderId"</span> <span class="o">=&gt;</span> <span class="s2">"2618039663715064005"</span>
<span class="p">],</span> <span class="no">JSON_UNESCAPED_SLASHES</span><span class="p">);</span> <span class="c1">// 确保 JSON 格式正确</span>

<span class="c1">// 生成签名 (X-CH-SIGN)</span>
<span class="nv">$sign_payload</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$method</span> <span class="mf">.</span> <span class="nv">$request_path</span> <span class="mf">.</span> <span class="nv">$body_json</span><span class="p">;</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$sign_payload</span><span class="p">,</span> <span class="nv">$api_secret</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="k">echo</span> <span class="s2">"==== 请求信息 ====</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Timestamp (X-CH-TS): "</span> <span class="mf">.</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Sign Payload (待签名字符串): "</span> <span class="mf">.</span> <span class="nv">$sign_payload</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Signature (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$signature</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Request Body: "</span> <span class="mf">.</span> <span class="nv">$body_json</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"==================</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// 发送请求</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$api_key</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="p">];</span>

<span class="c1">// 使用 cURL 发送 POST 请求</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$api_url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$body_json</span><span class="p">);</span>

<span class="c1">// 执行请求并获取响应</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$http_code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 打印响应</span>
<span class="k">echo</span> <span class="s2">"Response Code: </span><span class="nv">$http_code</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Response Body: </span><span class="nv">$response</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://openapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/sapi/v1/cancel</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_URL</span> <span class="o">=</span> <span class="nx">URL</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">();</span>

<span class="c1">// 请求方法</span>
<span class="kd">const</span> <span class="nx">METHOD</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 定义请求体 (JSON 格式)</span>
<span class="kd">const</span> <span class="nx">bodyJson</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="na">symbol</span><span class="p">:</span> <span class="dl">"</span><span class="s2">btcusdt</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">orderId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2618039663715064005</span><span class="dl">"</span><span class="p">,</span>
<span class="p">});</span>

<span class="c1">// 生成签名 (X-CH-SIGN)</span>
<span class="kd">const</span> <span class="nx">signPayload</span> <span class="o">=</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">METHOD</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span> <span class="o">+</span> <span class="nx">bodyJson</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span>
  <span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">"</span><span class="s2">sha256</span><span class="dl">"</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">signPayload</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="dl">"</span><span class="s2">hex</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==== 请求信息 ====</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Timestamp (X-CH-TS):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">timestamp</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Sign Payload (待签名字符串):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signPayload</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Signature (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Request Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">bodyJson</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==================</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// 发送请求</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">axios</span>
  <span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">API_URL</span><span class="p">,</span> <span class="nx">bodyJson</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Code:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">});</span>

</code></pre></div>
<blockquote>
<p>body</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="nl">"symbol"</span><span class="p">:</span><span class="s2">"btcusdt"</span><span class="p">,</span><span class="nl">"orderId"</span><span class="p">:</span><span class="s2">"2618039663715064005"</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">orderId<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">订单id（系统生成）</td>
</tr>
<tr>
<td style="text-align: left">symbol<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>小写</code>币对名称，例如：<code>ethusdt</code></td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btcusdt"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"2618039663715064005"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PENDING_CANCEL"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">orderId</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>1938321163093079425</code></td>
<td style="text-align: left">订单ID（系统生成）</td>
</tr>
<tr>
<td style="text-align: left">symbol</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>ethusdt</code></td>
<td style="text-align: left">币对名称</td>
</tr>
<tr>
<td style="text-align: left">status</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>PENDING_CANCEL</code></td>
<td style="text-align: left">订单状态：<code>PENDING_CANCEL</code></td>
</tr>
</tbody></table>
<h3 id='v2-3'>撤销订单-V2</h3>
<p><code>POST https://openapi.fameex.com/sapi/v2/cancel</code></p>

<p><strong>限速规则: 100次/2s</strong></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">POST https://openapi.fameex.com/sapi/v2/cancel

body
{"symbol": "ethusdt","orderId": "111000111"}
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># API 相关信息</span>
<span class="nv">api_key</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">api_secret</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 请求信息</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="k">$((</span><span class="si">$(</span><span class="nb">date</span> +%s%N<span class="si">)</span><span class="o">/</span><span class="m">1000000</span><span class="k">))</span>  <span class="c"># 毫秒级时间戳</span>
<span class="nv">method</span><span class="o">=</span><span class="s2">"POST"</span>
<span class="nv">request_path</span><span class="o">=</span><span class="s2">"/sapi/v2/cancel"</span>

<span class="c"># 请求主体 (JSON 格式)</span>
<span class="nv">body</span><span class="o">=</span><span class="s1">'{"symbol": "ethusdt","orderId": "111000111"}'</span>

<span class="c"># 删除 body 中的空白字符，保证签名的一致性</span>
<span class="nv">body</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span> | jq <span class="nt">-c</span><span class="si">)</span>

<span class="c"># 拼接签名字符串</span>
<span class="nv">sign_str</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">method</span><span class="k">}${</span><span class="nv">request_path</span><span class="k">}${</span><span class="nv">body</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"签名字符串: </span><span class="nv">$sign_str</span><span class="s2">"</span>

<span class="c"># 生成 HMAC SHA256 签名</span>
<span class="nv">signature</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$sign_str</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$api_secret</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>
<span class="nb">echo</span> <span class="s2">"签名 (X-CH-SIGN): </span><span class="nv">$signature</span><span class="s2">"</span>

<span class="c"># 发送 POST 请求</span>
<span class="nv">response</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="nt">-X</span> POST <span class="s2">"https://openapi.fameex.com</span><span class="k">${</span><span class="nv">request_path</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span><span class="si">)</span>

<span class="c"># 输出响应结果</span>
<span class="nb">echo</span> <span class="s2">"响应: </span><span class="nv">$response</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.TimeUnit</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SendOrder</span> <span class="o">{</span>

    <span class="c1">// API 相关信息</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">BASE_URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/sapi/v2/cancel"</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// 获取时间戳 (毫秒)</span>
            <span class="kt">long</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">.</span><span class="na">convert</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">(),</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span><span class="o">;</span>

            <span class="c1">// 请求主体 (JSON 格式，注意使用紧凑格式)</span>
            <span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{\"symbol\":\"ethusdt\",\"orderId\":\"111000111\"}"</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"请求主体 (body): "</span> <span class="o">+</span> <span class="n">body</span><span class="o">);</span>

            <span class="c1">// 拼接签名字符串</span>
            <span class="nc">String</span> <span class="n">signStr</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span> <span class="o">+</span> <span class="n">body</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名字符串: "</span> <span class="o">+</span> <span class="n">signStr</span><span class="o">);</span>

            <span class="c1">// 生成 HMAC SHA256 签名</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSHA256</span><span class="o">(</span><span class="n">signStr</span><span class="o">,</span> <span class="no">API_SECRET</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名 (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>

            <span class="c1">// 使用 URI 创建 URL</span>
            <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="no">BASE_URL</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">timestamp</span><span class="o">));</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="no">API_KEY</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// 发送请求主体</span>
            <span class="k">try</span> <span class="o">(</span><span class="nc">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">body</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
                <span class="n">os</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
            <span class="o">}</span>

            <span class="c1">// 读取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span>
                    <span class="n">responseCode</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">responseCode</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="o">?</span> <span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()</span> <span class="o">:</span> <span class="n">conn</span><span class="o">.</span><span class="na">getErrorStream</span><span class="o">()));</span>
            <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
            <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

            <span class="c1">// 输出响应结果</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"响应 ("</span> <span class="o">+</span> <span class="n">responseCode</span> <span class="o">+</span> <span class="s">"): "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**
     * 生成 HMAC SHA256 签名
     *
     * @param data   要签名的字符串
     * @param secret 密钥
     * @return HMAC SHA256 签名
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSHA256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"bytes"</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="c">// API 相关信息</span>
<span class="k">const</span> <span class="p">(</span>
    <span class="n">APIKey</span>     <span class="o">=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">APISecret</span>  <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
    <span class="n">BaseURL</span>    <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
    <span class="n">RequestPath</span> <span class="o">=</span> <span class="s">"/sapi/v2/cancel"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// 获取毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span> <span class="o">/</span> <span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

    <span class="c">// 请求主体 (JSON 格式)</span>
    <span class="n">body</span> <span class="o">:=</span> <span class="s">`{"symbol": "ethusdt","orderId": "111000111"}`</span>

    <span class="c">// 拼接签名字符串</span>
    <span class="n">signStr</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d%s%s%s"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">RequestPath</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">signStr</span><span class="p">)</span>

    <span class="c">// 生成 HMAC SHA256 签名</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">signStr</span><span class="p">,</span> <span class="n">APISecret</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 发送 POST 请求</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="n">BaseURL</span> <span class="o">+</span> <span class="n">RequestPath</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">body</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"创建请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置请求头</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">))</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">APIKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 执行请求</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">responseBody</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"响应:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">responseBody</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 生成 HMAC SHA256 签名</span>
<span class="k">func</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
<span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/sapi/v2/cancel"</span>

<span class="c1"># 请求方法和请求主体
</span><span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span>
<span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s">"symbol"</span><span class="p">:</span> <span class="s">"ethusdt"</span><span class="p">,</span><span class="s">"orderId"</span><span class="p">:</span> <span class="s">"111000111"</span><span class="p">}</span>


<span class="c1"># 获取时间戳 (毫秒级)
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1"># 将请求主体转换为紧凑的 JSON 字符串
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="n">body_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"请求主体 (body):"</span><span class="p">,</span> <span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 拼接签名字符串
</span><span class="n">sign_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}{</span><span class="n">method</span><span class="si">}{</span><span class="n">REQUEST_PATH</span><span class="si">}{</span><span class="n">body_str</span><span class="si">}</span><span class="s">"</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">sign_str</span><span class="p">)</span>

<span class="c1"># 生成 HMAC SHA256 签名
</span><span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sign_str</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

<span class="c1"># 构建请求头
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="s">"User-Agent"</span><span class="p">:</span> <span class="s">"Python-Client"</span>
<span class="p">}</span>

<span class="c1"># 发送 POST 请求
</span><span class="n">url</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 输出响应结果
</span><span class="k">print</span><span class="p">(</span><span class="s">"响应状态码:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"响应内容:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// API 相关信息</span>
<span class="nv">$apiKey</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$apiSecret</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>
<span class="nv">$baseUrl</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$requestPath</span> <span class="o">=</span> <span class="s2">"/sapi/v2/cancel"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="s2">"POST"</span><span class="p">;</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">([</span>
    <span class="s2">"symbol"</span><span class="o">=&gt;</span> <span class="s2">"ethusdt"</span><span class="p">,</span>
    <span class="s2">"orderId"</span><span class="o">=&gt;</span> <span class="s2">"111000111"</span>
<span class="p">],</span> <span class="no">JSON_UNESCAPED_SLASHES</span><span class="p">);</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 拼接签名字符串</span>
<span class="nv">$signStr</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$method</span> <span class="mf">.</span> <span class="nv">$requestPath</span> <span class="mf">.</span> <span class="nv">$body</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"签名字符串: "</span> <span class="mf">.</span> <span class="nv">$signStr</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$signStr</span><span class="p">,</span> <span class="nv">$apiSecret</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"签名 (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$signature</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 构建请求头</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$apiKey</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"User-Agent: PHP-Client"</span>
<span class="p">];</span>

<span class="c1">// 发送 POST 请求</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nv">$baseUrl</span> <span class="mf">.</span> <span class="nv">$requestPath</span><span class="p">;</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$body</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 仅在开发环境中使用，生产环境应启用 SSL 验证</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$httpCode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"请求失败: "</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"响应状态码: </span><span class="nv">$httpCode</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"响应内容: </span><span class="nv">$response</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span>

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">BASE_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://openapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/sapi/v2/cancel</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="kd">const</span> <span class="nx">method</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ethusdt</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">orderId</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">111000111</span><span class="dl">"</span>
<span class="p">});</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>

<span class="c1">// 拼接签名字符串</span>
<span class="kd">const</span> <span class="nx">signStr</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">timestamp</span><span class="p">}${</span><span class="nx">method</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}${</span><span class="nx">body</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名字符串:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signStr</span><span class="p">);</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">signStr</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名 (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>

<span class="c1">// 构建请求头</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span>
    <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">User-Agent</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Node.js-Client</span><span class="dl">"</span>
<span class="p">};</span>

<span class="c1">// 发送 POST 请求</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">sendOrder</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">BASE_URL</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">body</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">});</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应状态码:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应内容:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">请求失败:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 执行请求</span>
<span class="nx">sendOrder</span><span class="p">();</span>

</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">orderId<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">订单id</td>
</tr>
<tr>
<td style="text-align: left">symbol<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>小写</code>币对名称，例如：<code>ethusdt</code></td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ethusdt"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"1938321163093079425"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PENDING_CANCEL"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">orderId</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>1938321163093079425</code></td>
<td style="text-align: left">订单ID（系统生成）</td>
</tr>
<tr>
<td style="text-align: left">symbol</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>ethusdt</code></td>
<td style="text-align: left">币对名称</td>
</tr>
<tr>
<td style="text-align: left">status</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>PENDING_CANCEL</code></td>
<td style="text-align: left">订单状态：<code>PENDING_CANCEL</code></td>
</tr>
</tbody></table>
<h3 id='ad00632ed5'>批量撤销订单</h3>
<p><code>POST https://openapi.fameex.com/sapi/v1/batchCancel</code></p>

<p><strong>限速规则: 50次/2s 一次批量最多10个订单</strong></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">POST https://openapi.fameex.com/sapi/v1/batchCancel

// request headers
Content-Type: application/json
X-CH-TS: 1739945835000
X-CH-APIKEY: 您的API-KEY
X-CH-SIGN: 3c22ee3d2940df5e9dc5b7b862ba3d75e805e97a242f52f12fec9d16bc73e1c7
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># 设置 API 相关信息</span>
<span class="nv">URL</span><span class="o">=</span><span class="s2">"https://openapi.fameex.com"</span>
<span class="nv">REQUEST_PATH</span><span class="o">=</span><span class="s2">"/sapi/v1/batchCancel"</span>
<span class="nv">API_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">URL</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">API_KEY</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">API_SECRET</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 生成当前毫秒级时间戳</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="si">$(</span><span class="nb">date</span> +%s | <span class="nb">awk</span> <span class="s1">'{print $1 * 1000}'</span><span class="si">)</span>

<span class="c"># 定义请求方法</span>
<span class="nv">METHOD</span><span class="o">=</span><span class="s2">"POST"</span>

<span class="c"># 定义请求体 (JSON 格式)</span>
<span class="nv">BODY_JSON</span><span class="o">=</span><span class="s1">'{"symbol":"BTCUSDT","orderId":["111000111","111000112"]}'</span>

<span class="c"># 生成签名 (X-CH-SIGN)</span>
<span class="nv">SIGN_PAYLOAD</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">METHOD</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}${</span><span class="nv">BODY_JSON</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">SIGNATURE</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$API_SECRET</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>

<span class="c"># **打印调试信息**</span>
<span class="nb">echo</span> <span class="s2">"==== 请求信息 ===="</span>
<span class="nb">echo</span> <span class="s2">"Timestamp (X-CH-TS): </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Sign Payload (待签名字符串): </span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Signature (X-CH-SIGN): </span><span class="nv">$SIGNATURE</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Request Body: </span><span class="nv">$BODY_JSON</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"=================="</span>

<span class="c"># 发送请求</span>
curl <span class="nt">-X</span> POST <span class="s2">"</span><span class="nv">$API_URL</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$API_KEY</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$BODY_JSON</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.Instant</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Base64</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FameexApiRequest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// API 相关信息</span>
            <span class="nc">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">requestPath</span> <span class="o">=</span> <span class="s">"/sapi/v1/batchCancel"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiUrl</span> <span class="o">=</span> <span class="n">url</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiKey</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiSecret</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>

            <span class="c1">// 获取当前毫秒级时间戳</span>
            <span class="nc">String</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">toEpochMilli</span><span class="o">());</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span><span class="o">;</span>

            <span class="c1">// 定义请求体 (JSON 格式)</span>
            <span class="nc">String</span> <span class="n">bodyJson</span> <span class="o">=</span> <span class="s">"{\"symbol\":\"BTCUSDT\",\"orderId\":[\"111000111\",\"111000112\"]}"</span><span class="o">;</span>

            <span class="c1">// 生成签名 (X-CH-SIGN)</span>
            <span class="nc">String</span> <span class="n">signPayload</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span> <span class="o">+</span> <span class="n">bodyJson</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSha256</span><span class="o">(</span><span class="n">signPayload</span><span class="o">,</span> <span class="n">apiSecret</span><span class="o">);</span>

            <span class="c1">// **打印调试信息**</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"==== 请求信息 ===="</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Timestamp (X-CH-TS): "</span> <span class="o">+</span> <span class="n">timestamp</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Sign Payload (待签名字符串): "</span> <span class="o">+</span> <span class="n">signPayload</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Signature (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request Body: "</span> <span class="o">+</span> <span class="n">bodyJson</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"=================="</span><span class="o">);</span>

            <span class="c1">// 发送请求</span>
            <span class="n">sendPostRequest</span><span class="o">(</span><span class="n">apiUrl</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">,</span> <span class="n">signature</span><span class="o">,</span> <span class="n">bodyJson</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// HMAC-SHA256 签名计算</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSha256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">// 发送 HTTP POST 请求</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendPostRequest</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiUrl</span><span class="o">,</span> <span class="nc">String</span> <span class="n">apiKey</span><span class="o">,</span> <span class="nc">String</span> <span class="n">timestamp</span><span class="o">,</span> <span class="nc">String</span> <span class="n">signature</span><span class="o">,</span> <span class="nc">String</span> <span class="n">bodyJson</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="n">apiUrl</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// 发送请求体</span>
            <span class="k">try</span> <span class="o">(</span><span class="nc">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">())</span> <span class="o">{</span>
                <span class="kt">byte</span><span class="o">[]</span> <span class="n">input</span> <span class="o">=</span> <span class="n">bodyJson</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">);</span>
                <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">input</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">input</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="c1">// 读取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response Code: "</span> <span class="o">+</span> <span class="n">responseCode</span><span class="o">);</span>

            <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNextLine</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">());</span>
            <span class="o">}</span>
            <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"bytes"</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"strconv"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// API 相关信息</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com"</span>
    <span class="n">requestPath</span> <span class="o">:=</span> <span class="s">"/sapi/v1/batchCancel"</span>
    <span class="n">apiURL</span> <span class="o">:=</span> <span class="n">url</span> <span class="o">+</span> <span class="n">requestPath</span>
    <span class="n">apiKey</span> <span class="o">:=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">apiSecret</span> <span class="o">:=</span> <span class="s">"您的API-SECRET"</span>

    <span class="c">// 生成当前毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">strconv</span><span class="o">.</span><span class="n">FormatInt</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span><span class="o">/</span><span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">),</span> <span class="m">10</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

    <span class="c">// 定义请求体 (JSON 格式)</span>
    <span class="n">bodyJSON</span> <span class="o">:=</span> <span class="s">`{"symbol":"BTCUSDT","orderId":["111000111","111000112"]}`</span>

    <span class="c">// 生成签名 (X-CH-SIGN)</span>
    <span class="n">signPayload</span> <span class="o">:=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span> <span class="o">+</span> <span class="n">bodyJSON</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">signPayload</span><span class="p">,</span> <span class="n">apiSecret</span><span class="p">)</span>

    <span class="c">// **打印调试信息**</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">signPayload</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Request Body:"</span><span class="p">,</span> <span class="n">bodyJSON</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">sendPostRequest</span><span class="p">(</span><span class="n">apiURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">bodyJSON</span><span class="p">)</span>
<span class="p">}</span>

<span class="c">// HMAC-SHA256 签名计算</span>
<span class="k">func</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 发送 HTTP POST 请求</span>
<span class="k">func</span> <span class="n">sendPostRequest</span><span class="p">(</span><span class="n">apiURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">bodyJSON</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>

    <span class="c">// 创建请求</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">apiURL</span><span class="p">,</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">bodyJSON</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error creating request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置 Headers</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error sending request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># API 相关信息
</span><span class="n">URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
<span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/sapi/v1/batchCancel"</span>
<span class="n">API_URL</span> <span class="o">=</span> <span class="n">URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>

<span class="c1"># 生成当前毫秒级时间戳
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="c1"># 请求方法
</span><span class="n">METHOD</span> <span class="o">=</span> <span class="s">"POST"</span>

<span class="c1"># 定义请求体 (JSON 格式)
</span><span class="n">body_json</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"symbol"</span><span class="p">:</span> <span class="s">"BTCUSDT"</span><span class="p">,</span>
    <span class="s">"orderId"</span><span class="p">:</span> <span class="p">{</span>
        <span class="mi">111000111</span><span class="p">,</span>
        <span class="mi">111000112</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="n">body_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body_json</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>  <span class="c1"># 确保 JSON 字符串格式正确
</span>
<span class="c1"># 生成签名 (X-CH-SIGN)
</span><span class="n">sign_payload</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">METHOD</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span> <span class="o">+</span> <span class="n">body_str</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">sign_payload</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c1"># **打印调试信息**
</span><span class="k">print</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">sign_payload</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Request Body:"</span><span class="p">,</span> <span class="n">body_str</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

<span class="c1"># 发送请求
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">API_URL</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 打印响应
</span><span class="k">print</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://openapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/sapi/v1/batchCancel</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_URL</span> <span class="o">=</span> <span class="nx">URL</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">();</span>

<span class="c1">// 请求方法</span>
<span class="kd">const</span> <span class="nx">METHOD</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 定义请求体 (JSON 格式)</span>
<span class="kd">const</span> <span class="nx">bodyJson</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="na">symbol</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BTCUSDT</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">orderId</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">111000111</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">111000112</span><span class="dl">"</span><span class="p">],</span>
<span class="p">});</span>

<span class="c1">// 生成签名 (X-CH-SIGN)</span>
<span class="kd">const</span> <span class="nx">signPayload</span> <span class="o">=</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">METHOD</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span> <span class="o">+</span> <span class="nx">bodyJson</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span>
  <span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">"</span><span class="s2">sha256</span><span class="dl">"</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">signPayload</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="dl">"</span><span class="s2">hex</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==== 请求信息 ====</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Timestamp (X-CH-TS):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">timestamp</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Sign Payload (待签名字符串):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signPayload</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Signature (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Request Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">bodyJson</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==================</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// 发送请求</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">axios</span>
  <span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">API_URL</span><span class="p">,</span> <span class="nx">bodyJson</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Code:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">});</span>

</code></pre></div>
<blockquote>
<p>body</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="nl">"symbol"</span><span class="p">:</span><span class="s2">"BTCUSDT"</span><span class="p">,</span><span class="nl">"oderIds"</span><span class="p">:[</span><span class="mi">111000111</span><span class="p">,</span><span class="w"> </span><span class="mi">111000112</span><span class="p">]}</span><span class="w">
</span></code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">symbol<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>大写</code>币对名称，例如：<code>BTCUSDT</code></td>
</tr>
<tr>
<td style="text-align: left">orderIds<font color="red">*</font></td>
<td style="text-align: left">array</td>
<td style="text-align: left">要取消的订单id集合，id值以数字格式输入<code>[123,456]</code></td>
</tr>
</tbody></table>

<blockquote>
<p>成功返回数据</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="mi">165964665990709251</span><span class="p">,</span><span class="w">
        </span><span class="mi">165964665990709252</span><span class="p">,</span><span class="w">
        </span><span class="mi">165964665990709253</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"failed"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">取消失败一般是因为订单不存在或订单状态已经到终态</span><span class="w">
        </span><span class="mi">165964665990709250</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>失败返回数据</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w"> </span><span class="err">//通常是因为订单号错误，需要检查orderIds里的内容是否正确</span><span class="w">
</span></code></pre></div><h3 id='936545ae3e'>当前订单</h3>
<p><code>GET https://openapi.fameex.com/sapi/v1/openOrders</code></p>

<p><strong>限速规则: 20次/2s</strong></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://openapi.fameex.com/sapi/v1/openOrders?symbol=btcusdt&amp;limit=10

// request headers
Content-Type: application/json
X-CH-TS: 1739503617552
X-CH-APIKEY: 您的API-KEY
X-CH-SIGN: 325b02a8444da041c71fb6e3c35c6baf87e5cb48acc19e4cd312b8bf821bfc1b
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># 设置 API 相关信息</span>
<span class="nv">API_URL</span><span class="o">=</span><span class="s2">"https://openapi.fameex.com"</span>
<span class="nv">REQUEST_URL</span><span class="o">=</span><span class="s2">"/sapi/v1/openOrders"</span>
<span class="nv">QUERY_STRING</span><span class="o">=</span><span class="s2">"?symbol=btcusdt&amp;limit=10"</span>

<span class="c"># 计算完整的请求路径</span>
<span class="nv">REQUEST_PATH</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">REQUEST_URL</span><span class="k">}${</span><span class="nv">QUERY_STRING</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">FULL_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">API_URL</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>

<span class="c"># API 认证信息</span>
<span class="nv">API_KEY</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">API_SECRET</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 生成当前毫秒级时间戳</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="si">$(</span><span class="nb">date</span> +%s | <span class="nb">awk</span> <span class="s1">'{print $1 * 1000}'</span><span class="si">)</span>

<span class="c"># 定义请求方法</span>
<span class="nv">METHOD</span><span class="o">=</span><span class="s2">"GET"</span>

<span class="c"># 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="nv">SIGN_PAYLOAD</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">METHOD</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">SIGNATURE</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$API_SECRET</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>

<span class="c"># **打印调试信息**</span>
<span class="nb">echo</span> <span class="s2">"==== 请求信息 ===="</span>
<span class="nb">echo</span> <span class="s2">"Timestamp (X-CH-TS): </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Sign Payload (待签名字符串): </span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Signature (X-CH-SIGN): </span><span class="nv">$SIGNATURE</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Request URL: </span><span class="k">${</span><span class="nv">FULL_URL</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"=================="</span>

<span class="c"># 发送 GET 请求</span>
curl <span class="nt">-X</span> GET <span class="s2">"</span><span class="nv">$FULL_URL</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$API_KEY</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.Instant</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FameexApiRequest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// API 相关信息</span>
            <span class="nc">String</span> <span class="n">apiUrl</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">requestUrl</span> <span class="o">=</span> <span class="s">"/sapi/v1/openOrders"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">queryString</span> <span class="o">=</span> <span class="s">"?symbol=btcusdt&amp;limit=10"</span><span class="o">;</span>

            <span class="c1">// 计算完整的请求路径</span>
            <span class="nc">String</span> <span class="n">requestPath</span> <span class="o">=</span> <span class="n">requestUrl</span> <span class="o">+</span> <span class="n">queryString</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">fullUrl</span> <span class="o">=</span> <span class="n">apiUrl</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>

            <span class="c1">// API 认证信息</span>
            <span class="nc">String</span> <span class="n">apiKey</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiSecret</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>

            <span class="c1">// 生成当前毫秒级时间戳</span>
            <span class="nc">String</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">toEpochMilli</span><span class="o">());</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"GET"</span><span class="o">;</span>

            <span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
            <span class="nc">String</span> <span class="n">signPayload</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSha256</span><span class="o">(</span><span class="n">signPayload</span><span class="o">,</span> <span class="n">apiSecret</span><span class="o">);</span>

            <span class="c1">// **打印调试信息**</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"==== 请求信息 ===="</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Timestamp (X-CH-TS): "</span> <span class="o">+</span> <span class="n">timestamp</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Sign Payload (待签名字符串): "</span> <span class="o">+</span> <span class="n">signPayload</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Signature (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request URL: "</span> <span class="o">+</span> <span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"=================="</span><span class="o">);</span>

            <span class="c1">// 发送 GET 请求</span>
            <span class="n">sendGetRequest</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// HMAC-SHA256 签名计算</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSha256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>

        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">// 发送 HTTP GET 请求</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendGetRequest</span><span class="o">(</span><span class="nc">String</span> <span class="n">fullUrl</span><span class="o">,</span> <span class="nc">String</span> <span class="n">apiKey</span><span class="o">,</span> <span class="nc">String</span> <span class="n">timestamp</span><span class="o">,</span> <span class="nc">String</span> <span class="n">signature</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>

            <span class="c1">// 设置请求头</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">);</span>

            <span class="c1">// 发送请求并获取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response Code: "</span> <span class="o">+</span> <span class="n">responseCode</span><span class="o">);</span>

            <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNextLine</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">());</span>
            <span class="o">}</span>
            <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"strconv"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// API 相关信息</span>
    <span class="n">apiURL</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com"</span>
    <span class="n">requestURL</span> <span class="o">:=</span> <span class="s">"/sapi/v1/openOrders"</span>
    <span class="n">queryString</span> <span class="o">:=</span> <span class="s">"?symbol=btcusdt&amp;limit=10"</span>

    <span class="c">// 计算完整的请求路径</span>
    <span class="n">requestPath</span> <span class="o">:=</span> <span class="n">requestURL</span> <span class="o">+</span> <span class="n">queryString</span>
    <span class="n">fullURL</span> <span class="o">:=</span> <span class="n">apiURL</span> <span class="o">+</span> <span class="n">requestPath</span>

    <span class="c">// API 认证信息</span>
    <span class="n">apiKey</span> <span class="o">:=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">apiSecret</span> <span class="o">:=</span> <span class="s">"您的API-SECRET"</span>

    <span class="c">// 生成当前毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">strconv</span><span class="o">.</span><span class="n">FormatInt</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span><span class="o">/</span><span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">),</span> <span class="m">10</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"GET"</span>

    <span class="c">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
    <span class="n">signPayload</span> <span class="o">:=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">signPayload</span><span class="p">,</span> <span class="n">apiSecret</span><span class="p">)</span>

    <span class="c">// **打印调试信息**</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">signPayload</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
<span class="p">}</span>

<span class="c">// 计算 HMAC-SHA256 签名</span>
<span class="k">func</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 发送 HTTP GET 请求</span>
<span class="k">func</span> <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>

    <span class="c">// 创建请求</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">,</span> <span class="no">nil</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error creating request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置 Headers</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error sending request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">resp</span><span class="o">.</span><span class="n">StatusCode</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
<span class="n">REQUEST_URL</span> <span class="o">=</span> <span class="s">"/sapi/v1/openOrders"</span>
<span class="n">QUERY_STRING</span> <span class="o">=</span> <span class="s">"?symbol=btcusdt&amp;limit=10"</span>

<span class="c1"># 计算完整的请求路径
</span><span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="n">REQUEST_URL</span> <span class="o">+</span> <span class="n">QUERY_STRING</span>
<span class="n">FULL_URL</span> <span class="o">=</span> <span class="n">API_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>

<span class="c1"># API 认证信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>

<span class="c1"># 生成当前毫秒级时间戳
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="c1"># 请求方法
</span><span class="n">METHOD</span> <span class="o">=</span> <span class="s">"GET"</span>

<span class="c1"># 生成签名 (X-CH-SIGN) - GET 请求没有 body
</span><span class="n">SIGN_PAYLOAD</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">METHOD</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">SIGNATURE</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">SIGN_PAYLOAD</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c1"># **打印调试信息**
</span><span class="k">print</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">SIGN_PAYLOAD</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">SIGNATURE</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">FULL_URL</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

<span class="c1"># 发送 GET 请求
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">SIGNATURE</span><span class="p">,</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">FULL_URL</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="c1"># 打印响应
</span><span class="k">print</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>

<span class="c1">// API 相关信息</span>
<span class="nv">$API_URL</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$REQUEST_URL</span> <span class="o">=</span> <span class="s2">"/sapi/v1/openOrders"</span><span class="p">;</span>
<span class="nv">$QUERY_STRING</span> <span class="o">=</span> <span class="s2">"?symbol=btcusdt&amp;limit=10"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="nv">$REQUEST_PATH</span> <span class="o">=</span> <span class="nv">$REQUEST_URL</span> <span class="mf">.</span> <span class="nv">$QUERY_STRING</span><span class="p">;</span>
<span class="nv">$FULL_URL</span> <span class="o">=</span> <span class="nv">$API_URL</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// API 认证信息</span>
<span class="nv">$API_KEY</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$API_SECRET</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 请求方法</span>
<span class="nv">$METHOD</span> <span class="o">=</span> <span class="s2">"GET"</span><span class="p">;</span>

<span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="nv">$SIGN_PAYLOAD</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$METHOD</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>
<span class="nv">$SIGNATURE</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$SIGN_PAYLOAD</span><span class="p">,</span> <span class="nv">$API_SECRET</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="k">echo</span> <span class="s2">"==== 请求信息 ====</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Timestamp (X-CH-TS): "</span> <span class="mf">.</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Sign Payload (待签名字符串): "</span> <span class="mf">.</span> <span class="nv">$SIGN_PAYLOAD</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Signature (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$SIGNATURE</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Request URL: "</span> <span class="mf">.</span> <span class="nv">$FULL_URL</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"==================</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// 发送 GET 请求</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$API_KEY</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="p">];</span>

<span class="c1">// 使用 cURL 发送 GET 请求</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$FULL_URL</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// 执行请求并获取响应</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$http_code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 打印响应</span>
<span class="k">echo</span> <span class="s2">"Response Code: </span><span class="nv">$http_code</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Response Body: </span><span class="nv">$response</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="cp">?&gt;</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://openapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/sapi/v1/openOrders</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">QUERY_STRING</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">?symbol=btcusdt&amp;limit=10</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="nx">REQUEST_URL</span> <span class="o">+</span> <span class="nx">QUERY_STRING</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">FULL_URL</span> <span class="o">=</span> <span class="nx">API_URL</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// API 认证信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">();</span>

<span class="c1">// 请求方法</span>
<span class="kd">const</span> <span class="nx">METHOD</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="kd">const</span> <span class="nx">SIGN_PAYLOAD</span> <span class="o">=</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">METHOD</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">SIGNATURE</span> <span class="o">=</span> <span class="nx">crypto</span>
  <span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">"</span><span class="s2">sha256</span><span class="dl">"</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">SIGN_PAYLOAD</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="dl">"</span><span class="s2">hex</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==== 请求信息 ====</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Timestamp (X-CH-TS):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">timestamp</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Sign Payload (待签名字符串):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">SIGN_PAYLOAD</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Signature (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">SIGNATURE</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Request URL:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">FULL_URL</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==================</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// 发送 GET 请求</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">SIGNATURE</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">axios</span>
  <span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">FULL_URL</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Code:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">symbol<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>小写</code>币对名称，例如：<code>ethusdt</code></td>
</tr>
<tr>
<td style="text-align: left">limit</td>
<td style="text-align: left">integer</td>
<td style="text-align: left">最大1000</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETHUSDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"executedQty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1938321163093077686</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"origQty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"avgPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1701240367864</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MARKET"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NEW_"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETHUSDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"executedQty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1938321163093078022</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"origQty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"avgPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1701243281850</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MARKET"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NEW_"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">orderId</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>150695552109032492</code></td>
<td style="text-align: left">订单ID（系统生成）</td>
</tr>
<tr>
<td style="text-align: left">symbol</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>ETHUSDT</code></td>
<td style="text-align: left">币对名称</td>
</tr>
<tr>
<td style="text-align: left">price</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>4765.29</code></td>
<td style="text-align: left">订单价格</td>
</tr>
<tr>
<td style="text-align: left">origQty</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>1.01</code></td>
<td style="text-align: left">订单数量</td>
</tr>
<tr>
<td style="text-align: left">executedQty</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>1.01</code></td>
<td style="text-align: left">已经成交订单数量</td>
</tr>
<tr>
<td style="text-align: left">avgPrice</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>4754.24</code></td>
<td style="text-align: left">订单已经成交的平均价格</td>
</tr>
<tr>
<td style="text-align: left">type</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>LIMIT</code></td>
<td style="text-align: left">订单类型。可能出现的值只能为：<code>LIMIT</code>(限价)和<code>MARKET</code>（市价）</td>
</tr>
<tr>
<td style="text-align: left">time</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>1701243281850</code></td>
<td style="text-align: left">时间戳</td>
</tr>
<tr>
<td style="text-align: left">side</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>BUY</code></td>
<td style="text-align: left">订单方向。可能出现的值只能为：<code>BUY</code>（买入做多）和<code>SELL</code>（卖出做空）</td>
</tr>
<tr>
<td style="text-align: left">status</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>New Order</code></td>
<td style="text-align: left">订单状态。可能出现的值为：<code>New Order</code>(新订单，无成交)、<code>Partially Filled</code>（部分成交）、<code>Filled</code>（全部成交）</td>
</tr>
</tbody></table>
<h3 id='v2-4'>当前订单-V2</h3>
<p><code>GET https://openapi.fameex.com/sapi/v2/openOrders</code></p>

<p><strong>限速规则: 20次/2s</strong></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://openapi.fameex.com/sapi/v2/openOrders?symbol=btcusdt&amp;limit=10

// request headers
Content-Type: application/json
X-CH-TS: 1739503617552
X-CH-APIKEY: 您的API-KEY
X-CH-SIGN: 325b02a8444da041c71fb6e3c35c6baf87e5cb48acc19e4cd312b8bf821bfc1b
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># 设置 API 相关信息</span>
<span class="nv">API_URL</span><span class="o">=</span><span class="s2">"https://openapi.fameex.com"</span>
<span class="nv">REQUEST_URL</span><span class="o">=</span><span class="s2">"/sapi/v2/openOrders"</span>
<span class="nv">QUERY_STRING</span><span class="o">=</span><span class="s2">"?symbol=btcusdt&amp;limit=10"</span>

<span class="c"># 计算完整的请求路径</span>
<span class="nv">REQUEST_PATH</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">REQUEST_URL</span><span class="k">}${</span><span class="nv">QUERY_STRING</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">FULL_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">API_URL</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>

<span class="c"># API 认证信息</span>
<span class="nv">API_KEY</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">API_SECRET</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 生成当前毫秒级时间戳</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="si">$(</span><span class="nb">date</span> +%s | <span class="nb">awk</span> <span class="s1">'{print $1 * 1000}'</span><span class="si">)</span>

<span class="c"># 定义请求方法</span>
<span class="nv">METHOD</span><span class="o">=</span><span class="s2">"GET"</span>

<span class="c"># 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="nv">SIGN_PAYLOAD</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">METHOD</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">SIGNATURE</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$API_SECRET</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>

<span class="c"># **打印调试信息**</span>
<span class="nb">echo</span> <span class="s2">"==== 请求信息 ===="</span>
<span class="nb">echo</span> <span class="s2">"Timestamp (X-CH-TS): </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Sign Payload (待签名字符串): </span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Signature (X-CH-SIGN): </span><span class="nv">$SIGNATURE</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Request URL: </span><span class="k">${</span><span class="nv">FULL_URL</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"=================="</span>

<span class="c"># 发送 GET 请求</span>
curl <span class="nt">-X</span> GET <span class="s2">"</span><span class="nv">$FULL_URL</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$API_KEY</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.Instant</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FameexApiRequest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// API 相关信息</span>
            <span class="nc">String</span> <span class="n">apiUrl</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">requestUrl</span> <span class="o">=</span> <span class="s">"/sapi/v2/openOrders"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">queryString</span> <span class="o">=</span> <span class="s">"?symbol=btcusdt&amp;limit=10"</span><span class="o">;</span>

            <span class="c1">// 计算完整的请求路径</span>
            <span class="nc">String</span> <span class="n">requestPath</span> <span class="o">=</span> <span class="n">requestUrl</span> <span class="o">+</span> <span class="n">queryString</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">fullUrl</span> <span class="o">=</span> <span class="n">apiUrl</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>

            <span class="c1">// API 认证信息</span>
            <span class="nc">String</span> <span class="n">apiKey</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiSecret</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>

            <span class="c1">// 生成当前毫秒级时间戳</span>
            <span class="nc">String</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">toEpochMilli</span><span class="o">());</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"GET"</span><span class="o">;</span>

            <span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
            <span class="nc">String</span> <span class="n">signPayload</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSha256</span><span class="o">(</span><span class="n">signPayload</span><span class="o">,</span> <span class="n">apiSecret</span><span class="o">);</span>

            <span class="c1">// **打印调试信息**</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"==== 请求信息 ===="</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Timestamp (X-CH-TS): "</span> <span class="o">+</span> <span class="n">timestamp</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Sign Payload (待签名字符串): "</span> <span class="o">+</span> <span class="n">signPayload</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Signature (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request URL: "</span> <span class="o">+</span> <span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"=================="</span><span class="o">);</span>

            <span class="c1">// 发送 GET 请求</span>
            <span class="n">sendGetRequest</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// HMAC-SHA256 签名计算</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSha256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>

        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">// 发送 HTTP GET 请求</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendGetRequest</span><span class="o">(</span><span class="nc">String</span> <span class="n">fullUrl</span><span class="o">,</span> <span class="nc">String</span> <span class="n">apiKey</span><span class="o">,</span> <span class="nc">String</span> <span class="n">timestamp</span><span class="o">,</span> <span class="nc">String</span> <span class="n">signature</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>

            <span class="c1">// 设置请求头</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">);</span>

            <span class="c1">// 发送请求并获取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response Code: "</span> <span class="o">+</span> <span class="n">responseCode</span><span class="o">);</span>

            <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNextLine</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">());</span>
            <span class="o">}</span>
            <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"strconv"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// API 相关信息</span>
    <span class="n">apiURL</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com"</span>
    <span class="n">requestURL</span> <span class="o">:=</span> <span class="s">"/sapi/v2/openOrders"</span>
    <span class="n">queryString</span> <span class="o">:=</span> <span class="s">"?symbol=btcusdt&amp;limit=10"</span>

    <span class="c">// 计算完整的请求路径</span>
    <span class="n">requestPath</span> <span class="o">:=</span> <span class="n">requestURL</span> <span class="o">+</span> <span class="n">queryString</span>
    <span class="n">fullURL</span> <span class="o">:=</span> <span class="n">apiURL</span> <span class="o">+</span> <span class="n">requestPath</span>

    <span class="c">// API 认证信息</span>
    <span class="n">apiKey</span> <span class="o">:=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">apiSecret</span> <span class="o">:=</span> <span class="s">"您的API-SECRET"</span>

    <span class="c">// 生成当前毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">strconv</span><span class="o">.</span><span class="n">FormatInt</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span><span class="o">/</span><span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">),</span> <span class="m">10</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"GET"</span>

    <span class="c">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
    <span class="n">signPayload</span> <span class="o">:=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">signPayload</span><span class="p">,</span> <span class="n">apiSecret</span><span class="p">)</span>

    <span class="c">// **打印调试信息**</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">signPayload</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
<span class="p">}</span>

<span class="c">// 计算 HMAC-SHA256 签名</span>
<span class="k">func</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 发送 HTTP GET 请求</span>
<span class="k">func</span> <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>

    <span class="c">// 创建请求</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">,</span> <span class="no">nil</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error creating request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置 Headers</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error sending request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">resp</span><span class="o">.</span><span class="n">StatusCode</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
<span class="n">REQUEST_URL</span> <span class="o">=</span> <span class="s">"/sapi/v2/openOrders"</span>
<span class="n">QUERY_STRING</span> <span class="o">=</span> <span class="s">"?symbol=btcusdt&amp;limit=10"</span>

<span class="c1"># 计算完整的请求路径
</span><span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="n">REQUEST_URL</span> <span class="o">+</span> <span class="n">QUERY_STRING</span>
<span class="n">FULL_URL</span> <span class="o">=</span> <span class="n">API_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>

<span class="c1"># API 认证信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>

<span class="c1"># 生成当前毫秒级时间戳
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="c1"># 请求方法
</span><span class="n">METHOD</span> <span class="o">=</span> <span class="s">"GET"</span>

<span class="c1"># 生成签名 (X-CH-SIGN) - GET 请求没有 body
</span><span class="n">SIGN_PAYLOAD</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">METHOD</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">SIGNATURE</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">SIGN_PAYLOAD</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c1"># **打印调试信息**
</span><span class="k">print</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">SIGN_PAYLOAD</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">SIGNATURE</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">FULL_URL</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

<span class="c1"># 发送 GET 请求
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">SIGNATURE</span><span class="p">,</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">FULL_URL</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="c1"># 打印响应
</span><span class="k">print</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>

<span class="c1">// API 相关信息</span>
<span class="nv">$API_URL</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$REQUEST_URL</span> <span class="o">=</span> <span class="s2">"/sapi/v2/openOrders"</span><span class="p">;</span>
<span class="nv">$QUERY_STRING</span> <span class="o">=</span> <span class="s2">"?symbol=btcusdt&amp;limit=10"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="nv">$REQUEST_PATH</span> <span class="o">=</span> <span class="nv">$REQUEST_URL</span> <span class="mf">.</span> <span class="nv">$QUERY_STRING</span><span class="p">;</span>
<span class="nv">$FULL_URL</span> <span class="o">=</span> <span class="nv">$API_URL</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// API 认证信息</span>
<span class="nv">$API_KEY</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$API_SECRET</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 请求方法</span>
<span class="nv">$METHOD</span> <span class="o">=</span> <span class="s2">"GET"</span><span class="p">;</span>

<span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="nv">$SIGN_PAYLOAD</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$METHOD</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>
<span class="nv">$SIGNATURE</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$SIGN_PAYLOAD</span><span class="p">,</span> <span class="nv">$API_SECRET</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="k">echo</span> <span class="s2">"==== 请求信息 ====</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Timestamp (X-CH-TS): "</span> <span class="mf">.</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Sign Payload (待签名字符串): "</span> <span class="mf">.</span> <span class="nv">$SIGN_PAYLOAD</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Signature (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$SIGNATURE</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Request URL: "</span> <span class="mf">.</span> <span class="nv">$FULL_URL</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"==================</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// 发送 GET 请求</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$API_KEY</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="p">];</span>

<span class="c1">// 使用 cURL 发送 GET 请求</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$FULL_URL</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// 执行请求并获取响应</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$http_code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 打印响应</span>
<span class="k">echo</span> <span class="s2">"Response Code: </span><span class="nv">$http_code</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Response Body: </span><span class="nv">$response</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="cp">?&gt;</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://openapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/sapi/v2/openOrders</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">QUERY_STRING</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">?symbol=btcusdt&amp;limit=10</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="nx">REQUEST_URL</span> <span class="o">+</span> <span class="nx">QUERY_STRING</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">FULL_URL</span> <span class="o">=</span> <span class="nx">API_URL</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// API 认证信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">();</span>

<span class="c1">// 请求方法</span>
<span class="kd">const</span> <span class="nx">METHOD</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="kd">const</span> <span class="nx">SIGN_PAYLOAD</span> <span class="o">=</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">METHOD</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">SIGNATURE</span> <span class="o">=</span> <span class="nx">crypto</span>
  <span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">"</span><span class="s2">sha256</span><span class="dl">"</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">SIGN_PAYLOAD</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="dl">"</span><span class="s2">hex</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==== 请求信息 ====</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Timestamp (X-CH-TS):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">timestamp</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Sign Payload (待签名字符串):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">SIGN_PAYLOAD</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Signature (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">SIGNATURE</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Request URL:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">FULL_URL</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==================</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// 发送 GET 请求</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">SIGNATURE</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">axios</span>
  <span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">FULL_URL</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Code:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">symbol<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>小写</code>币对名称，例如：<code>ethusdt</code></td>
</tr>
<tr>
<td style="text-align: left">limit<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">最大1000</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETHUSDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"executedQty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1938321163093077686"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"origQty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.10"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"avgPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1701240367864</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MARKET"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NEW_"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETHUSDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"executedQty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1938321163093078022"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"origQty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"avgPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1701243281850</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MARKET"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NEW_"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">orderId</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>150695552109032492</code></td>
<td style="text-align: left">订单ID（系统生成）</td>
</tr>
<tr>
<td style="text-align: left">symbol</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>ETHUSDT</code></td>
<td style="text-align: left">币对名称</td>
</tr>
<tr>
<td style="text-align: left">price</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>4765.29</code></td>
<td style="text-align: left">订单价格</td>
</tr>
<tr>
<td style="text-align: left">origQty</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>1.01</code></td>
<td style="text-align: left">订单数量</td>
</tr>
<tr>
<td style="text-align: left">executedQty</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>1.01</code></td>
<td style="text-align: left">已经成交订单数量</td>
</tr>
<tr>
<td style="text-align: left">avgPrice</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>4754.24</code></td>
<td style="text-align: left">订单已经成交的平均价格</td>
</tr>
<tr>
<td style="text-align: left">type</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>LIMIT</code></td>
<td style="text-align: left">订单类型。可能出现的值只能为：<code>LIMIT</code>(限价)和<code>MARKET</code>（市价）</td>
</tr>
<tr>
<td style="text-align: left">time</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>1701243281850</code></td>
<td style="text-align: left">时间戳</td>
</tr>
<tr>
<td style="text-align: left">side</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>BUY</code></td>
<td style="text-align: left">订单方向。可能出现的值只能为：<code>BUY</code>（买入做多）和<code>SELL</code>（卖出做空）</td>
</tr>
<tr>
<td style="text-align: left">status</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>New Order</code></td>
<td style="text-align: left">订单状态。可能出现的值为：<code>New Order</code>(新订单，无成交)、<code>Partially Filled</code>（部分成交）、<code>Filled</code>（全部成交）</td>
</tr>
</tbody></table>
<h3 id='7d44b7792d'>交易记录</h3>
<p><code>GET https://openapi.fameex.com/sapi/v1/myTrades</code></p>

<p><strong>限速规则: 20次/2s</strong></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://openapi.fameex.com/sapi/v1/myTrades?symbol=BTCUSDT&amp;limit=100

// request headers
Content-Type: application/json
X-CH-TS: 1739503617552
X-CH-APIKEY: 您的API-KEY
X-CH-SIGN: 325b02a8444da041c71fb6e3c35c6baf87e5cb48acc19e4cd312b8bf821bfc1b
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># 设置 API 相关信息</span>
<span class="nv">API_URL</span><span class="o">=</span><span class="s2">"https://openapi.fameex.com"</span>
<span class="nv">REQUEST_URL</span><span class="o">=</span><span class="s2">"/sapi/v1/myTrades"</span>
<span class="nv">QUERY_STRING</span><span class="o">=</span><span class="s2">"?symbol=BTCUSDT&amp;limit=100"</span>

<span class="c"># 计算完整的请求路径</span>
<span class="nv">REQUEST_PATH</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">REQUEST_URL</span><span class="k">}${</span><span class="nv">QUERY_STRING</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">FULL_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">API_URL</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>

<span class="c"># API 认证信息</span>
<span class="nv">API_KEY</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">API_SECRET</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 生成当前毫秒级时间戳</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="si">$(</span><span class="nb">date</span> +%s | <span class="nb">awk</span> <span class="s1">'{print $1 * 1000}'</span><span class="si">)</span>

<span class="c"># 定义请求方法</span>
<span class="nv">METHOD</span><span class="o">=</span><span class="s2">"GET"</span>

<span class="c"># 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="nv">SIGN_PAYLOAD</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">METHOD</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">SIGNATURE</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$API_SECRET</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>

<span class="c"># **打印调试信息**</span>
<span class="nb">echo</span> <span class="s2">"==== 请求信息 ===="</span>
<span class="nb">echo</span> <span class="s2">"Timestamp (X-CH-TS): </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Sign Payload (待签名字符串): </span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Signature (X-CH-SIGN): </span><span class="nv">$SIGNATURE</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Request URL: </span><span class="k">${</span><span class="nv">FULL_URL</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"=================="</span>

<span class="c"># 发送 GET 请求</span>
curl <span class="nt">-X</span> GET <span class="s2">"</span><span class="nv">$FULL_URL</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$API_KEY</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.Instant</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FameexApiRequest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// API 相关信息</span>
            <span class="nc">String</span> <span class="n">apiUrl</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">requestUrl</span> <span class="o">=</span> <span class="s">"/sapi/v1/myTrades"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">queryString</span> <span class="o">=</span> <span class="s">"?symbol=BTCUSDT&amp;limit=100"</span><span class="o">;</span>

            <span class="c1">// 计算完整的请求路径</span>
            <span class="nc">String</span> <span class="n">requestPath</span> <span class="o">=</span> <span class="n">requestUrl</span> <span class="o">+</span> <span class="n">queryString</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">fullUrl</span> <span class="o">=</span> <span class="n">apiUrl</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>

            <span class="c1">// API 认证信息</span>
            <span class="nc">String</span> <span class="n">apiKey</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiSecret</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>

            <span class="c1">// 生成当前毫秒级时间戳</span>
            <span class="nc">String</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">toEpochMilli</span><span class="o">());</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"GET"</span><span class="o">;</span>

            <span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
            <span class="nc">String</span> <span class="n">signPayload</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSha256</span><span class="o">(</span><span class="n">signPayload</span><span class="o">,</span> <span class="n">apiSecret</span><span class="o">);</span>

            <span class="c1">// **打印调试信息**</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"==== 请求信息 ===="</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Timestamp (X-CH-TS): "</span> <span class="o">+</span> <span class="n">timestamp</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Sign Payload (待签名字符串): "</span> <span class="o">+</span> <span class="n">signPayload</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Signature (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request URL: "</span> <span class="o">+</span> <span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"=================="</span><span class="o">);</span>

            <span class="c1">// 发送 GET 请求</span>
            <span class="n">sendGetRequest</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// HMAC-SHA256 签名计算</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSha256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>

        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">// 发送 HTTP GET 请求</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendGetRequest</span><span class="o">(</span><span class="nc">String</span> <span class="n">fullUrl</span><span class="o">,</span> <span class="nc">String</span> <span class="n">apiKey</span><span class="o">,</span> <span class="nc">String</span> <span class="n">timestamp</span><span class="o">,</span> <span class="nc">String</span> <span class="n">signature</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>

            <span class="c1">// 设置请求头</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">);</span>

            <span class="c1">// 发送请求并获取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response Code: "</span> <span class="o">+</span> <span class="n">responseCode</span><span class="o">);</span>

            <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNextLine</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">());</span>
            <span class="o">}</span>
            <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"strconv"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// API 相关信息</span>
    <span class="n">apiURL</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com"</span>
    <span class="n">requestURL</span> <span class="o">:=</span> <span class="s">"/sapi/v1/myTrades"</span>
    <span class="n">queryString</span> <span class="o">:=</span> <span class="s">"?symbol=BTCUSDT&amp;limit=100"</span>

    <span class="c">// 计算完整的请求路径</span>
    <span class="n">requestPath</span> <span class="o">:=</span> <span class="n">requestURL</span> <span class="o">+</span> <span class="n">queryString</span>
    <span class="n">fullURL</span> <span class="o">:=</span> <span class="n">apiURL</span> <span class="o">+</span> <span class="n">requestPath</span>

    <span class="c">// API 认证信息</span>
    <span class="n">apiKey</span> <span class="o">:=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">apiSecret</span> <span class="o">:=</span> <span class="s">"您的API-SECRET"</span>

    <span class="c">// 生成当前毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">strconv</span><span class="o">.</span><span class="n">FormatInt</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span><span class="o">/</span><span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">),</span> <span class="m">10</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"GET"</span>

    <span class="c">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
    <span class="n">signPayload</span> <span class="o">:=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">signPayload</span><span class="p">,</span> <span class="n">apiSecret</span><span class="p">)</span>

    <span class="c">// **打印调试信息**</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">signPayload</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
<span class="p">}</span>

<span class="c">// 计算 HMAC-SHA256 签名</span>
<span class="k">func</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 发送 HTTP GET 请求</span>
<span class="k">func</span> <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>

    <span class="c">// 创建请求</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">,</span> <span class="no">nil</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error creating request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置 Headers</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error sending request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">resp</span><span class="o">.</span><span class="n">StatusCode</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
<span class="n">REQUEST_URL</span> <span class="o">=</span> <span class="s">"/sapi/v1/myTrades"</span>
<span class="n">QUERY_STRING</span> <span class="o">=</span> <span class="s">"?symbol=BTCUSDT&amp;limit=100"</span>

<span class="c1"># 计算完整的请求路径
</span><span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="n">REQUEST_URL</span> <span class="o">+</span> <span class="n">QUERY_STRING</span>
<span class="n">FULL_URL</span> <span class="o">=</span> <span class="n">API_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>

<span class="c1"># API 认证信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>

<span class="c1"># 生成当前毫秒级时间戳
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="c1"># 请求方法
</span><span class="n">METHOD</span> <span class="o">=</span> <span class="s">"GET"</span>

<span class="c1"># 生成签名 (X-CH-SIGN) - GET 请求没有 body
</span><span class="n">SIGN_PAYLOAD</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">METHOD</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">SIGNATURE</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">SIGN_PAYLOAD</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c1"># **打印调试信息**
</span><span class="k">print</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">SIGN_PAYLOAD</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">SIGNATURE</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">FULL_URL</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

<span class="c1"># 发送 GET 请求
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">SIGNATURE</span><span class="p">,</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">FULL_URL</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="c1"># 打印响应
</span><span class="k">print</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>

<span class="c1">// API 相关信息</span>
<span class="nv">$API_URL</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$REQUEST_URL</span> <span class="o">=</span> <span class="s2">"/sapi/v1/myTrades"</span><span class="p">;</span>
<span class="nv">$QUERY_STRING</span> <span class="o">=</span> <span class="s2">"?symbol=BTCUSDT&amp;limit=100"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="nv">$REQUEST_PATH</span> <span class="o">=</span> <span class="nv">$REQUEST_URL</span> <span class="mf">.</span> <span class="nv">$QUERY_STRING</span><span class="p">;</span>
<span class="nv">$FULL_URL</span> <span class="o">=</span> <span class="nv">$API_URL</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// API 认证信息</span>
<span class="nv">$API_KEY</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$API_SECRET</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 请求方法</span>
<span class="nv">$METHOD</span> <span class="o">=</span> <span class="s2">"GET"</span><span class="p">;</span>

<span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="nv">$SIGN_PAYLOAD</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$METHOD</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>
<span class="nv">$SIGNATURE</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$SIGN_PAYLOAD</span><span class="p">,</span> <span class="nv">$API_SECRET</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="k">echo</span> <span class="s2">"==== 请求信息 ====</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Timestamp (X-CH-TS): "</span> <span class="mf">.</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Sign Payload (待签名字符串): "</span> <span class="mf">.</span> <span class="nv">$SIGN_PAYLOAD</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Signature (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$SIGNATURE</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Request URL: "</span> <span class="mf">.</span> <span class="nv">$FULL_URL</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"==================</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// 发送 GET 请求</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$API_KEY</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="p">];</span>

<span class="c1">// 使用 cURL 发送 GET 请求</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$FULL_URL</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// 执行请求并获取响应</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$http_code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 打印响应</span>
<span class="k">echo</span> <span class="s2">"Response Code: </span><span class="nv">$http_code</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Response Body: </span><span class="nv">$response</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="cp">?&gt;</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://openapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/sapi/v1/myTrades</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">QUERY_STRING</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">?symbol=BTCUSDT&amp;limit=100</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="nx">REQUEST_URL</span> <span class="o">+</span> <span class="nx">QUERY_STRING</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">FULL_URL</span> <span class="o">=</span> <span class="nx">API_URL</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// API 认证信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">();</span>

<span class="c1">// 请求方法</span>
<span class="kd">const</span> <span class="nx">METHOD</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="kd">const</span> <span class="nx">SIGN_PAYLOAD</span> <span class="o">=</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">METHOD</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">SIGNATURE</span> <span class="o">=</span> <span class="nx">crypto</span>
  <span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">"</span><span class="s2">sha256</span><span class="dl">"</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">SIGN_PAYLOAD</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="dl">"</span><span class="s2">hex</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==== 请求信息 ====</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Timestamp (X-CH-TS):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">timestamp</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Sign Payload (待签名字符串):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">SIGN_PAYLOAD</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Signature (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">SIGNATURE</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Request URL:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">FULL_URL</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==================</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// 发送 GET 请求</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">SIGNATURE</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">axios</span>
  <span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">FULL_URL</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Code:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">symbol<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>大写</code>币对名称，例如：<code>BTCUSDT</code></td>
</tr>
<tr>
<td style="text-align: left">limit</td>
<td style="text-align: left">string</td>
<td style="text-align: left">默认：100；最大：1000</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETHUSDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00000000428</span><span class="p">,</span><span class="w">
        </span><span class="nl">"isMaker"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"isBuyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bidId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1954603951049381893</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bidUserId"</span><span class="p">:</span><span class="w"> </span><span class="mi">10083</span><span class="p">,</span><span class="w">
        </span><span class="nl">"feeCoin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">2334</span><span class="p">,</span><span class="w">
        </span><span class="nl">"qty"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00000428</span><span class="p">,</span><span class="w">
        </span><span class="nl">"askId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1856176838352995447</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">159</span><span class="p">,</span><span class="w">
        </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1701623660989</span><span class="p">,</span><span class="w">
        </span><span class="nl">"isSelf"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"askUserId"</span><span class="p">:</span><span class="w"> </span><span class="mi">10671</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETHUSDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00000004284</span><span class="p">,</span><span class="w">
        </span><span class="nl">"isMaker"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"isBuyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bidId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1938321163093068889</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bidUserId"</span><span class="p">:</span><span class="w"> </span><span class="mi">10083</span><span class="p">,</span><span class="w">
        </span><span class="nl">"feeCoin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">2334</span><span class="p">,</span><span class="w">
        </span><span class="nl">"qty"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00004284</span><span class="p">,</span><span class="w">
        </span><span class="nl">"askId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1856176838352995447</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">158</span><span class="p">,</span><span class="w">
        </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1701165091964</span><span class="p">,</span><span class="w">
        </span><span class="nl">"isSelf"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"askUserId"</span><span class="p">:</span><span class="w"> </span><span class="mi">10671</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">symbol</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>ETHBTC</code></td>
<td style="text-align: left"><code>大写</code>币种名称</td>
</tr>
<tr>
<td style="text-align: left">id</td>
<td style="text-align: left">integer</td>
<td style="text-align: left"><code>159</code></td>
<td style="text-align: left">交易ID</td>
</tr>
<tr>
<td style="text-align: left">bidId</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>1954603951049381893</code></td>
<td style="text-align: left">买方订单ID</td>
</tr>
<tr>
<td style="text-align: left">askId</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>1856176838352995447</code></td>
<td style="text-align: left">卖方订单ID</td>
</tr>
<tr>
<td style="text-align: left">price</td>
<td style="text-align: left">integer</td>
<td style="text-align: left"><code>2334</code></td>
<td style="text-align: left">交易价格</td>
</tr>
<tr>
<td style="text-align: left">qty</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>0.00004284</code></td>
<td style="text-align: left">交易数量</td>
</tr>
<tr>
<td style="text-align: left">time</td>
<td style="text-align: left">number</td>
<td style="text-align: left"><code>1701165091964</code></td>
<td style="text-align: left">交易时间戳</td>
</tr>
<tr>
<td style="text-align: left">isBuyer</td>
<td style="text-align: left">boolean</td>
<td style="text-align: left"><code>true</code></td>
<td style="text-align: left"><code>true</code>=Buyer，<code>false</code>=Seller</td>
</tr>
<tr>
<td style="text-align: left">isMaker</td>
<td style="text-align: left">boolean</td>
<td style="text-align: left"><code>false</code></td>
<td style="text-align: left"><code>true</code>=Maker，<code>false</code>=Taker</td>
</tr>
<tr>
<td style="text-align: left">feeCoin</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>ETH</code></td>
<td style="text-align: left">交易手续费币种</td>
</tr>
<tr>
<td style="text-align: left">fee</td>
<td style="text-align: left">number</td>
<td style="text-align: left"><code>0.00000000428</code></td>
<td style="text-align: left">交易手续费</td>
</tr>
<tr>
<td style="text-align: left">bidUserId</td>
<td style="text-align: left">integer</td>
<td style="text-align: left"><code>10083</code></td>
<td style="text-align: left">买方用户uid</td>
</tr>
<tr>
<td style="text-align: left">askUserId</td>
<td style="text-align: left">integer</td>
<td style="text-align: left"><code>10671</code></td>
<td style="text-align: left">卖方用户uid</td>
</tr>
<tr>
<td style="text-align: left">isSelf</td>
<td style="text-align: left">boolean</td>
<td style="text-align: left"><code>false</code></td>
<td style="text-align: left">是否为自成交，<code>true</code>=是自成交，<code>false</code>=不是自成交</td>
</tr>
<tr>
<td style="text-align: left">side</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>BUY</code></td>
<td style="text-align: left">主动单方向<code>BUY</code>/<code>SELL</code></td>
</tr>
</tbody></table>
<h2 id='c3d92b20c8'>账户</h2><h3 id='user_data'>安全类型: USER_DATA</h3>
<aside class="notice">账户下方的接口都需要签名和API-key验证。</aside>
<h3 id='bc5c2a707b'>账户信息（废弃）</h3>
<p><code>GET https://openapi.fameex.com/sapi/v1/account</code></p>

<p><strong>限速规则: 20次/2s</strong></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://openapi.fameex.com/sapi/v1/account

// request headers
Content-Type: application/json
X-CH-TS: 1739503617552
X-CH-APIKEY: 您的API-KEY
X-CH-SIGN: 325b02a8444da041c71fb6e3c35c6baf87e5cb48acc19e4cd312b8bf821bfc1b
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># 设置 API 相关信息</span>
<span class="nv">API_URL</span><span class="o">=</span><span class="s2">"https://openapi.fameex.com"</span>
<span class="nv">REQUEST_URL</span><span class="o">=</span><span class="s2">"/sapi/v1/account"</span>
<span class="nv">QUERY_STRING</span><span class="o">=</span><span class="s2">""</span>

<span class="c"># 计算完整的请求路径</span>
<span class="nv">REQUEST_PATH</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">REQUEST_URL</span><span class="k">}${</span><span class="nv">QUERY_STRING</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">FULL_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">API_URL</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>

<span class="c"># API 认证信息</span>
<span class="nv">API_KEY</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">API_SECRET</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 生成当前毫秒级时间戳</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="si">$(</span><span class="nb">date</span> +%s | <span class="nb">awk</span> <span class="s1">'{print $1 * 1000}'</span><span class="si">)</span>

<span class="c"># 定义请求方法</span>
<span class="nv">METHOD</span><span class="o">=</span><span class="s2">"GET"</span>

<span class="c"># 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="nv">SIGN_PAYLOAD</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">METHOD</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">SIGNATURE</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$API_SECRET</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>

<span class="c"># **打印调试信息**</span>
<span class="nb">echo</span> <span class="s2">"==== 请求信息 ===="</span>
<span class="nb">echo</span> <span class="s2">"Timestamp (X-CH-TS): </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Sign Payload (待签名字符串): </span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Signature (X-CH-SIGN): </span><span class="nv">$SIGNATURE</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Request URL: </span><span class="k">${</span><span class="nv">FULL_URL</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"=================="</span>

<span class="c"># 发送 GET 请求</span>
curl <span class="nt">-X</span> GET <span class="s2">"</span><span class="nv">$FULL_URL</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$API_KEY</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.Instant</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FameexApiRequest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// API 相关信息</span>
            <span class="nc">String</span> <span class="n">apiUrl</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">requestUrl</span> <span class="o">=</span> <span class="s">"/sapi/v1/account"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">queryString</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>

            <span class="c1">// 计算完整的请求路径</span>
            <span class="nc">String</span> <span class="n">requestPath</span> <span class="o">=</span> <span class="n">requestUrl</span> <span class="o">+</span> <span class="n">queryString</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">fullUrl</span> <span class="o">=</span> <span class="n">apiUrl</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>

            <span class="c1">// API 认证信息</span>
            <span class="nc">String</span> <span class="n">apiKey</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiSecret</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>

            <span class="c1">// 生成当前毫秒级时间戳</span>
            <span class="nc">String</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">toEpochMilli</span><span class="o">());</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"GET"</span><span class="o">;</span>

            <span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
            <span class="nc">String</span> <span class="n">signPayload</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSha256</span><span class="o">(</span><span class="n">signPayload</span><span class="o">,</span> <span class="n">apiSecret</span><span class="o">);</span>

            <span class="c1">// **打印调试信息**</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"==== 请求信息 ===="</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Timestamp (X-CH-TS): "</span> <span class="o">+</span> <span class="n">timestamp</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Sign Payload (待签名字符串): "</span> <span class="o">+</span> <span class="n">signPayload</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Signature (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request URL: "</span> <span class="o">+</span> <span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"=================="</span><span class="o">);</span>

            <span class="c1">// 发送 GET 请求</span>
            <span class="n">sendGetRequest</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// HMAC-SHA256 签名计算</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSha256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>

        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">// 发送 HTTP GET 请求</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendGetRequest</span><span class="o">(</span><span class="nc">String</span> <span class="n">fullUrl</span><span class="o">,</span> <span class="nc">String</span> <span class="n">apiKey</span><span class="o">,</span> <span class="nc">String</span> <span class="n">timestamp</span><span class="o">,</span> <span class="nc">String</span> <span class="n">signature</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>

            <span class="c1">// 设置请求头</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">);</span>

            <span class="c1">// 发送请求并获取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response Code: "</span> <span class="o">+</span> <span class="n">responseCode</span><span class="o">);</span>

            <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNextLine</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">());</span>
            <span class="o">}</span>
            <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"strconv"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// API 相关信息</span>
    <span class="n">apiURL</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com"</span>
    <span class="n">requestURL</span> <span class="o">:=</span> <span class="s">"/sapi/v1/account"</span>
    <span class="n">queryString</span> <span class="o">:=</span> <span class="s">""</span>

    <span class="c">// 计算完整的请求路径</span>
    <span class="n">requestPath</span> <span class="o">:=</span> <span class="n">requestURL</span> <span class="o">+</span> <span class="n">queryString</span>
    <span class="n">fullURL</span> <span class="o">:=</span> <span class="n">apiURL</span> <span class="o">+</span> <span class="n">requestPath</span>

    <span class="c">// API 认证信息</span>
    <span class="n">apiKey</span> <span class="o">:=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">apiSecret</span> <span class="o">:=</span> <span class="s">"您的API-SECRET"</span>

    <span class="c">// 生成当前毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">strconv</span><span class="o">.</span><span class="n">FormatInt</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span><span class="o">/</span><span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">),</span> <span class="m">10</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"GET"</span>

    <span class="c">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
    <span class="n">signPayload</span> <span class="o">:=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">signPayload</span><span class="p">,</span> <span class="n">apiSecret</span><span class="p">)</span>

    <span class="c">// **打印调试信息**</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">signPayload</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
<span class="p">}</span>

<span class="c">// 计算 HMAC-SHA256 签名</span>
<span class="k">func</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 发送 HTTP GET 请求</span>
<span class="k">func</span> <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>

    <span class="c">// 创建请求</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">,</span> <span class="no">nil</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error creating request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置 Headers</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error sending request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">resp</span><span class="o">.</span><span class="n">StatusCode</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
<span class="n">REQUEST_URL</span> <span class="o">=</span> <span class="s">"/sapi/v1/account"</span>
<span class="n">QUERY_STRING</span> <span class="o">=</span> <span class="s">""</span>

<span class="c1"># 计算完整的请求路径
</span><span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="n">REQUEST_URL</span> <span class="o">+</span> <span class="n">QUERY_STRING</span>
<span class="n">FULL_URL</span> <span class="o">=</span> <span class="n">API_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>

<span class="c1"># API 认证信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>

<span class="c1"># 生成当前毫秒级时间戳
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="c1"># 请求方法
</span><span class="n">METHOD</span> <span class="o">=</span> <span class="s">"GET"</span>

<span class="c1"># 生成签名 (X-CH-SIGN) - GET 请求没有 body
</span><span class="n">SIGN_PAYLOAD</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">METHOD</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">SIGNATURE</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">SIGN_PAYLOAD</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c1"># **打印调试信息**
</span><span class="k">print</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">SIGN_PAYLOAD</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">SIGNATURE</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">FULL_URL</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

<span class="c1"># 发送 GET 请求
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">SIGNATURE</span><span class="p">,</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">FULL_URL</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="c1"># 打印响应
</span><span class="k">print</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>

<span class="c1">// API 相关信息</span>
<span class="nv">$API_URL</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$REQUEST_URL</span> <span class="o">=</span> <span class="s2">"/sapi/v1/account"</span><span class="p">;</span>
<span class="nv">$QUERY_STRING</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="nv">$REQUEST_PATH</span> <span class="o">=</span> <span class="nv">$REQUEST_URL</span> <span class="mf">.</span> <span class="nv">$QUERY_STRING</span><span class="p">;</span>
<span class="nv">$FULL_URL</span> <span class="o">=</span> <span class="nv">$API_URL</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// API 认证信息</span>
<span class="nv">$API_KEY</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$API_SECRET</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 请求方法</span>
<span class="nv">$METHOD</span> <span class="o">=</span> <span class="s2">"GET"</span><span class="p">;</span>

<span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="nv">$SIGN_PAYLOAD</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$METHOD</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>
<span class="nv">$SIGNATURE</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$SIGN_PAYLOAD</span><span class="p">,</span> <span class="nv">$API_SECRET</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="k">echo</span> <span class="s2">"==== 请求信息 ====</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Timestamp (X-CH-TS): "</span> <span class="mf">.</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Sign Payload (待签名字符串): "</span> <span class="mf">.</span> <span class="nv">$SIGN_PAYLOAD</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Signature (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$SIGNATURE</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Request URL: "</span> <span class="mf">.</span> <span class="nv">$FULL_URL</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"==================</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// 发送 GET 请求</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$API_KEY</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="p">];</span>

<span class="c1">// 使用 cURL 发送 GET 请求</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$FULL_URL</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// 执行请求并获取响应</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$http_code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 打印响应</span>
<span class="k">echo</span> <span class="s2">"Response Code: </span><span class="nv">$http_code</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Response Body: </span><span class="nv">$response</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="cp">?&gt;</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://openapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/sapi/v1/account</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">QUERY_STRING</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="nx">REQUEST_URL</span> <span class="o">+</span> <span class="nx">QUERY_STRING</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">FULL_URL</span> <span class="o">=</span> <span class="nx">API_URL</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// API 认证信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">();</span>

<span class="c1">// 请求方法</span>
<span class="kd">const</span> <span class="nx">METHOD</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="kd">const</span> <span class="nx">SIGN_PAYLOAD</span> <span class="o">=</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">METHOD</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">SIGNATURE</span> <span class="o">=</span> <span class="nx">crypto</span>
  <span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">"</span><span class="s2">sha256</span><span class="dl">"</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">SIGN_PAYLOAD</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="dl">"</span><span class="s2">hex</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==== 请求信息 ====</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Timestamp (X-CH-TS):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">timestamp</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Sign Payload (待签名字符串):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">SIGN_PAYLOAD</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Signature (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">SIGNATURE</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Request URL:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">FULL_URL</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==================</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// 发送 GET 请求</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">SIGNATURE</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">axios</span>
  <span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">FULL_URL</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Code:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABAT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"free"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.00"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"locked"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20.00"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DOT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"free"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.00"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"locked"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.00"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"free"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50.00"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"locked"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50.00"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">balances</td>
<td style="text-align: left">array</td>
<td style="text-align: left">账户余额集合</td>
</tr>
<tr>
<td style="text-align: left">asset</td>
<td style="text-align: left">string</td>
<td style="text-align: left">交易对</td>
</tr>
<tr>
<td style="text-align: left">free</td>
<td style="text-align: left">string</td>
<td style="text-align: left">可用余额</td>
</tr>
<tr>
<td style="text-align: left">locked</td>
<td style="text-align: left">string</td>
<td style="text-align: left">冻结余额</td>
</tr>
</tbody></table>
<h3 id='a07dc5034c'>账户信息（推荐）</h3>
<p><code>GET https://openapi.fameex.com/sapi/v1/account/balance</code></p>

<p><strong>限速规则: 20次/2s</strong></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">// 查询所有币种
GET https://openapi.fameex.com/sapi/v1/account/balance

// 查询USDT，BTC，ETH
GET https://openapi.fameex.com/sapi/v1/account/balance?symbols=USDT,BTC,ETH

// request headers
Content-Type: application/json
X-CH-TS: 1739503617552
X-CH-APIKEY: 您的API-KEY
X-CH-SIGN: 325b02a8444da041c71fb6e3c35c6baf87e5cb48acc19e4cd312b8bf821bfc1b
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># 设置 API 相关信息</span>
<span class="nv">API_URL</span><span class="o">=</span><span class="s2">"https://openapi.fameex.com"</span>
<span class="nv">REQUEST_URL</span><span class="o">=</span><span class="s2">"/sapi/v1/account/balance"</span>
<span class="nv">QUERY_STRING</span><span class="o">=</span><span class="s2">"?symbols=USDT,BTC,ETH"</span>

<span class="c"># 计算完整的请求路径</span>
<span class="nv">REQUEST_PATH</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">REQUEST_URL</span><span class="k">}${</span><span class="nv">QUERY_STRING</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">FULL_URL</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">API_URL</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>

<span class="c"># API 认证信息</span>
<span class="nv">API_KEY</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">API_SECRET</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 生成当前毫秒级时间戳</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="si">$(</span><span class="nb">date</span> +%s | <span class="nb">awk</span> <span class="s1">'{print $1 * 1000}'</span><span class="si">)</span>

<span class="c"># 定义请求方法</span>
<span class="nv">METHOD</span><span class="o">=</span><span class="s2">"GET"</span>

<span class="c"># 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="nv">SIGN_PAYLOAD</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">METHOD</span><span class="k">}${</span><span class="nv">REQUEST_PATH</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">SIGNATURE</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$API_SECRET</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>

<span class="c"># **打印调试信息**</span>
<span class="nb">echo</span> <span class="s2">"==== 请求信息 ===="</span>
<span class="nb">echo</span> <span class="s2">"Timestamp (X-CH-TS): </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Sign Payload (待签名字符串): </span><span class="nv">$SIGN_PAYLOAD</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Signature (X-CH-SIGN): </span><span class="nv">$SIGNATURE</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Request URL: </span><span class="k">${</span><span class="nv">FULL_URL</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"=================="</span>

<span class="c"># 发送 GET 请求</span>
curl <span class="nt">-X</span> GET <span class="s2">"</span><span class="nv">$FULL_URL</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$API_KEY</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.time.Instant</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FameexApiRequest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// API 相关信息</span>
            <span class="nc">String</span> <span class="n">apiUrl</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">requestUrl</span> <span class="o">=</span> <span class="s">"/sapi/v1/account/balance"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">queryString</span> <span class="o">=</span> <span class="s">"?symbols=USDT,BTC,ETH"</span><span class="o">;</span>

            <span class="c1">// 计算完整的请求路径</span>
            <span class="nc">String</span> <span class="n">requestPath</span> <span class="o">=</span> <span class="n">requestUrl</span> <span class="o">+</span> <span class="n">queryString</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">fullUrl</span> <span class="o">=</span> <span class="n">apiUrl</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>

            <span class="c1">// API 认证信息</span>
            <span class="nc">String</span> <span class="n">apiKey</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">apiSecret</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>

            <span class="c1">// 生成当前毫秒级时间戳</span>
            <span class="nc">String</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="nc">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">().</span><span class="na">toEpochMilli</span><span class="o">());</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"GET"</span><span class="o">;</span>

            <span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
            <span class="nc">String</span> <span class="n">signPayload</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span><span class="o">;</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSha256</span><span class="o">(</span><span class="n">signPayload</span><span class="o">,</span> <span class="n">apiSecret</span><span class="o">);</span>

            <span class="c1">// **打印调试信息**</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"==== 请求信息 ===="</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Timestamp (X-CH-TS): "</span> <span class="o">+</span> <span class="n">timestamp</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Sign Payload (待签名字符串): "</span> <span class="o">+</span> <span class="n">signPayload</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Signature (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Request URL: "</span> <span class="o">+</span> <span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"=================="</span><span class="o">);</span>

            <span class="c1">// 发送 GET 请求</span>
            <span class="n">sendGetRequest</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// HMAC-SHA256 签名计算</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSha256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>

        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">// 发送 HTTP GET 请求</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendGetRequest</span><span class="o">(</span><span class="nc">String</span> <span class="n">fullUrl</span><span class="o">,</span> <span class="nc">String</span> <span class="n">apiKey</span><span class="o">,</span> <span class="nc">String</span> <span class="n">timestamp</span><span class="o">,</span> <span class="nc">String</span> <span class="n">signature</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="no">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="n">fullUrl</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>

            <span class="c1">// 设置请求头</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="n">apiKey</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">);</span>

            <span class="c1">// 发送请求并获取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response Code: "</span> <span class="o">+</span> <span class="n">responseCode</span><span class="o">);</span>

            <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNextLine</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">());</span>
            <span class="o">}</span>
            <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"strconv"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// API 相关信息</span>
    <span class="n">apiURL</span> <span class="o">:=</span> <span class="s">"https://openapi.fameex.com"</span>
    <span class="n">requestURL</span> <span class="o">:=</span> <span class="s">"/sapi/v1/account/balance"</span>
    <span class="n">queryString</span> <span class="o">:=</span> <span class="s">"?symbols=USDT,BTC,ETH"</span>

    <span class="c">// 计算完整的请求路径</span>
    <span class="n">requestPath</span> <span class="o">:=</span> <span class="n">requestURL</span> <span class="o">+</span> <span class="n">queryString</span>
    <span class="n">fullURL</span> <span class="o">:=</span> <span class="n">apiURL</span> <span class="o">+</span> <span class="n">requestPath</span>

    <span class="c">// API 认证信息</span>
    <span class="n">apiKey</span> <span class="o">:=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">apiSecret</span> <span class="o">:=</span> <span class="s">"您的API-SECRET"</span>

    <span class="c">// 生成当前毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">strconv</span><span class="o">.</span><span class="n">FormatInt</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span><span class="o">/</span><span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">),</span> <span class="m">10</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"GET"</span>

    <span class="c">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
    <span class="n">signPayload</span> <span class="o">:=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="n">requestPath</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">signPayload</span><span class="p">,</span> <span class="n">apiSecret</span><span class="p">)</span>

    <span class="c">// **打印调试信息**</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">signPayload</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
<span class="p">}</span>

<span class="c">// 计算 HMAC-SHA256 签名</span>
<span class="k">func</span> <span class="n">hmacSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 发送 HTTP GET 请求</span>
<span class="k">func</span> <span class="n">sendGetRequest</span><span class="p">(</span><span class="n">fullURL</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">signature</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>

    <span class="c">// 创建请求</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">fullURL</span><span class="p">,</span> <span class="no">nil</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error creating request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置 Headers</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>

    <span class="c">// 发送请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error sending request:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">resp</span><span class="o">.</span><span class="n">StatusCode</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_URL</span> <span class="o">=</span> <span class="s">"https://openapi.fameex.com"</span>
<span class="n">REQUEST_URL</span> <span class="o">=</span> <span class="s">"/sapi/account/balance"</span>
<span class="n">QUERY_STRING</span> <span class="o">=</span> <span class="s">"?symbols=USDT,BTC,ETH"</span>

<span class="c1"># 计算完整的请求路径
</span><span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="n">REQUEST_URL</span> <span class="o">+</span> <span class="n">QUERY_STRING</span>
<span class="n">FULL_URL</span> <span class="o">=</span> <span class="n">API_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>

<span class="c1"># API 认证信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>

<span class="c1"># 生成当前毫秒级时间戳
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="c1"># 请求方法
</span><span class="n">METHOD</span> <span class="o">=</span> <span class="s">"GET"</span>

<span class="c1"># 生成签名 (X-CH-SIGN) - GET 请求没有 body
</span><span class="n">SIGN_PAYLOAD</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">METHOD</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">SIGNATURE</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">SIGN_PAYLOAD</span><span class="p">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c1"># **打印调试信息**
</span><span class="k">print</span><span class="p">(</span><span class="s">"==== 请求信息 ===="</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Timestamp (X-CH-TS):"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Sign Payload (待签名字符串):"</span><span class="p">,</span> <span class="n">SIGN_PAYLOAD</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Signature (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">SIGNATURE</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Request URL:"</span><span class="p">,</span> <span class="n">FULL_URL</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"=================="</span><span class="p">)</span>

<span class="c1"># 发送 GET 请求
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">SIGNATURE</span><span class="p">,</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">FULL_URL</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="c1"># 打印响应
</span><span class="k">print</span><span class="p">(</span><span class="s">"Response Code:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Response Body:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?</span>

<span class="c1">// API 相关信息</span>
<span class="nv">$API_URL</span> <span class="o">=</span> <span class="s2">"https://openapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$REQUEST_URL</span> <span class="o">=</span> <span class="s2">"/sapi/v1/account/balance"</span><span class="p">;</span>
<span class="nv">$QUERY_STRING</span> <span class="o">=</span> <span class="s2">"?symbols=USDT,BTC,ETH"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="nv">$REQUEST_PATH</span> <span class="o">=</span> <span class="nv">$REQUEST_URL</span> <span class="mf">.</span> <span class="nv">$QUERY_STRING</span><span class="p">;</span>
<span class="nv">$FULL_URL</span> <span class="o">=</span> <span class="nv">$API_URL</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// API 认证信息</span>
<span class="nv">$API_KEY</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$API_SECRET</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 请求方法</span>
<span class="nv">$METHOD</span> <span class="o">=</span> <span class="s2">"GET"</span><span class="p">;</span>

<span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="nv">$SIGN_PAYLOAD</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$METHOD</span> <span class="mf">.</span> <span class="nv">$REQUEST_PATH</span><span class="p">;</span>
<span class="nv">$SIGNATURE</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$SIGN_PAYLOAD</span><span class="p">,</span> <span class="nv">$API_SECRET</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="k">echo</span> <span class="s2">"==== 请求信息 ====</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Timestamp (X-CH-TS): "</span> <span class="mf">.</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Sign Payload (待签名字符串): "</span> <span class="mf">.</span> <span class="nv">$SIGN_PAYLOAD</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Signature (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$SIGNATURE</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Request URL: "</span> <span class="mf">.</span> <span class="nv">$FULL_URL</span> <span class="mf">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"==================</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// 发送 GET 请求</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$API_KEY</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span>
<span class="p">];</span>

<span class="c1">// 使用 cURL 发送 GET 请求</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$FULL_URL</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// 执行请求并获取响应</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$http_code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 打印响应</span>
<span class="k">echo</span> <span class="s2">"Response Code: </span><span class="nv">$http_code</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Response Body: </span><span class="nv">$response</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="cp">?&gt;</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://openapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/sapi/v1/account/balance</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">QUERY_STRING</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">?symbols=USDT,BTC,ETH</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 计算完整的请求路径</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="nx">REQUEST_URL</span> <span class="o">+</span> <span class="nx">QUERY_STRING</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">FULL_URL</span> <span class="o">=</span> <span class="nx">API_URL</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>

<span class="c1">// API 认证信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 生成当前毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">();</span>

<span class="c1">// 请求方法</span>
<span class="kd">const</span> <span class="nx">METHOD</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 生成签名 (X-CH-SIGN) - GET 请求没有 body</span>
<span class="kd">const</span> <span class="nx">SIGN_PAYLOAD</span> <span class="o">=</span> <span class="nx">timestamp</span> <span class="o">+</span> <span class="nx">METHOD</span> <span class="o">+</span> <span class="nx">REQUEST_PATH</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">SIGNATURE</span> <span class="o">=</span> <span class="nx">crypto</span>
  <span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">"</span><span class="s2">sha256</span><span class="dl">"</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">SIGN_PAYLOAD</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="dl">"</span><span class="s2">hex</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// **打印调试信息**</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==== 请求信息 ====</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Timestamp (X-CH-TS):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">timestamp</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Sign Payload (待签名字符串):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">SIGN_PAYLOAD</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Signature (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">SIGNATURE</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Request URL:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">FULL_URL</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">==================</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// 发送 GET 请求</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">SIGNATURE</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">axios</span>
  <span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">FULL_URL</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Code:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response Body:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">symbols</td>
<td style="text-align: left">string</td>
<td style="text-align: left">大写币种名称，例如：<code>BTC</code>，支持多币种查询，不超过20个，币种之间以<code>,</code>分隔</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"free"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15.00"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"locked"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30.00"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"free"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.00"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"locked"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20.00"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"free"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.00"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"locked"</span><span class="p">:</span><span class="w"> </span><span class="s2">"70.00"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">balances</td>
<td style="text-align: left">array</td>
<td style="text-align: left">账户余额</td>
</tr>
<tr>
<td style="text-align: left">asset</td>
<td style="text-align: left">string</td>
<td style="text-align: left">交易对</td>
</tr>
<tr>
<td style="text-align: left">free</td>
<td style="text-align: left">string</td>
<td style="text-align: left">可用余额</td>
</tr>
<tr>
<td style="text-align: left">locked</td>
<td style="text-align: left">string</td>
<td style="text-align: left">冻结余额</td>
</tr>
</tbody></table>
<h1 id='5bf19eee5a'>合约交易</h1><h2 id='4f270f1396-2'>公共</h2><h3 id='none-3'>安全类型: None</h3>
<aside class="notice">公共下方的接口不需要API-key或者签名就能自由访问。</aside>
<h3 id='10b7d8eccc-2'>测试连接</h3>
<p><code>GET https://futuresopenapi.fameex.com/fapi/v1/ping</code></p>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://futuresopenapi.fameex.com/fapi/v1/ping

// request headers
Content-Type:application/json
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://futuresopenapi.fameex.com/fapi/v1/ping"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="c1">// 使用 URI 创建 URL</span>
      <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="s">"https://futuresopenapi.fameex.com/fapi/v1/ping"</span><span class="o">);</span>
      <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>

      <span class="c1">// 读取响应</span>
      <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
      <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
      <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
      <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

      <span class="c1">// 输出结果</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response: "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="s">"https://futuresopenapi.fameex.com/fapi/v1/ping"</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应体</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"读取响应失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 打印响应</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"服务器返回:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com/fapi/v1/ping"</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>  <span class="c1"># 检查请求是否成功
</span>    <span class="k">print</span><span class="p">(</span><span class="s">"Response:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
<span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"请求错误:"</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$url</span> <span class="o">=</span> <span class="s2">"https://futuresopenapi.fameex.com/fapi/v1/ping"</span><span class="p">;</span>

<span class="c1">// 初始化 cURL</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>

<span class="c1">// 设置 cURL 选项</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 跳过 SSL 证书验证（如果 API 需要）</span>

<span class="c1">// 执行请求</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 检查是否有错误</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"cURL 错误："</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Response: "</span> <span class="mf">.</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 关闭 cURL</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">https</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://futuresopenapi.fameex.com/fapi/v1/ping</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">https</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>

  <span class="c1">// A chunk of data has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">data</span> <span class="o">+=</span> <span class="nx">chunk</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="c1">// The whole response has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">end</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>

<span class="p">}).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">请求错误:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<p>{}</p>

<p>测试REST API的连通性</p>
<h3 id='3f1907847c'>获取服务器时间</h3>
<p><code>GET https://futuresopenapi.fameex.com/fapi/v1/time</code></p>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://futuresopenapi.fameex.com/fapi/v1/time

// request headers
Content-Type:application/json
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://futuresopenapi.fameex.com/fapi/v1/time"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="c1">// 使用 URI 创建 URL</span>
      <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="s">"https://futuresopenapi.fameex.com/fapi/v1/time"</span><span class="o">);</span>
      <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>

      <span class="c1">// 读取响应</span>
      <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
      <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
      <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
      <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

      <span class="c1">// 输出结果</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response: "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="s">"https://futuresopenapi.fameex.com/fapi/v1/time"</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应体</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"读取响应失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 打印响应</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"服务器返回:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com/fapi/v1/time"</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>  <span class="c1"># 检查请求是否成功
</span>    <span class="k">print</span><span class="p">(</span><span class="s">"Response:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
<span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"请求错误:"</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$url</span> <span class="o">=</span> <span class="s2">"https://futuresopenapi.fameex.com/fapi/v1/time"</span><span class="p">;</span>

<span class="c1">// 初始化 cURL</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>

<span class="c1">// 设置 cURL 选项</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 跳过 SSL 证书验证（如果 API 需要）</span>

<span class="c1">// 执行请求</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 检查是否有错误</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"cURL 错误："</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Response: "</span> <span class="mf">.</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 关闭 cURL</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">https</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://futuresopenapi.fameex.com/fapi/v1/time</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">https</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>

  <span class="c1">// A chunk of data has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">data</span> <span class="o">+=</span> <span class="nx">chunk</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="c1">// The whole response has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">end</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>

<span class="p">}).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">请求错误:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"China Standard Time"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"serverTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1704962055664</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">timezone</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>China Standard Time</code></td>
<td style="text-align: left">服务器时区</td>
</tr>
<tr>
<td style="text-align: left">serverTime</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>1607702400000</code></td>
<td style="text-align: left">服务器时间戳</td>
</tr>
</tbody></table>
<h3 id='5ae89a50fd'>合约列表</h3>
<p><code>GET https://futuresopenapi.fameex.com/fapi/v1/contracts</code></p>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://futuresopenapi.fameex.com/fapi/v1/contracts

// request headers
Content-Type:application/json
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://futuresopenapi.fameex.com/fapi/v1/contracts"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="c1">// 使用 URI 创建 URL</span>
      <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="s">"https://futuresopenapi.fameex.com/fapi/v1/contracts"</span><span class="o">);</span>
      <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>

      <span class="c1">// 读取响应</span>
      <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
      <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
      <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
      <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

      <span class="c1">// 输出结果</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response: "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="s">"https://futuresopenapi.fameex.com/fapi/v1/contracts"</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应体</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"读取响应失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 打印响应</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"服务器返回:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com/fapi/v1/contracts"</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>  <span class="c1"># 检查请求是否成功
</span>    <span class="k">print</span><span class="p">(</span><span class="s">"Response:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
<span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"请求错误:"</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$url</span> <span class="o">=</span> <span class="s2">"https://futuresopenapi.fameex.com/fapi/v1/contracts"</span><span class="p">;</span>

<span class="c1">// 初始化 cURL</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>

<span class="c1">// 设置 cURL 选项</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 跳过 SSL 证书验证（如果 API 需要）</span>

<span class="c1">// 执行请求</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 检查是否有错误</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"cURL 错误："</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Response: "</span> <span class="mf">.</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 关闭 cURL</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">https</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://futuresopenapi.fameex.com/fapi/v1/contracts</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">https</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>

  <span class="c1">// A chunk of data has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">data</span> <span class="o">+=</span> <span class="nx">chunk</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="c1">// The whole response has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">end</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>

<span class="p">}).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">请求错误:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E-ETC-USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"pricePrecision"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"maxMarketVolume"</span><span class="p">:</span><span class="w"> </span><span class="mi">200000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0000000000000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"minOrderVolume"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"maxMarketMoney"</span><span class="p">:</span><span class="w"> </span><span class="mf">500000.0000000000000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"maxLimitVolume"</span><span class="p">:</span><span class="w"> </span><span class="mi">300000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"maxValidOrder"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="nl">"multiplierCoin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"minOrderMoney"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0000000000000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"maxLimitMoney"</span><span class="p">:</span><span class="w"> </span><span class="mf">500000.0000000000000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E-ATOM-USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"pricePrecision"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"maxMarketVolume"</span><span class="p">:</span><span class="w"> </span><span class="mi">100000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"multiplier"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0000000000000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"minOrderVolume"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"maxMarketMoney"</span><span class="p">:</span><span class="w"> </span><span class="mf">200000.0000000000000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"maxLimitVolume"</span><span class="p">:</span><span class="w"> </span><span class="mi">200000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"maxValidOrder"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="nl">"multiplierCoin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ATOM"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"minOrderMoney"</span><span class="p">:</span><span class="w"> </span><span class="mf">20.0000000000000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"maxLimitMoney"</span><span class="p">:</span><span class="w"> </span><span class="mf">2000000.0000000000000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">symbol</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>E-BTC-USDT</code></td>
<td style="text-align: left"><code>大写</code>合约名称</td>
</tr>
<tr>
<td style="text-align: left">pricePrecision</td>
<td style="text-align: left">number</td>
<td style="text-align: left"><code>3</code></td>
<td style="text-align: left">价格精度</td>
</tr>
<tr>
<td style="text-align: left">status</td>
<td style="text-align: left">number</td>
<td style="text-align: left"><code>1</code></td>
<td style="text-align: left">合约状态（0：<code>不可交易</code>，1：<code>可交易</code>）</td>
</tr>
<tr>
<td style="text-align: left">type</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>E</code></td>
<td style="text-align: left">合约类型（E：<code>永续合约</code>，S：<code>模拟合约</code>，其他为<code>混合合约</code>）</td>
</tr>
<tr>
<td style="text-align: left">side</td>
<td style="text-align: left">number</td>
<td style="text-align: left"><code>1</code></td>
<td style="text-align: left">合约方向（0：<code>反向</code>，1：<code>正向</code>）</td>
</tr>
<tr>
<td style="text-align: left">multiplier</td>
<td style="text-align: left">number</td>
<td style="text-align: left"><code>1.0000000000000000</code></td>
<td style="text-align: left">合约面值</td>
</tr>
<tr>
<td style="text-align: left">minOrderVolume</td>
<td style="text-align: left">number</td>
<td style="text-align: left"><code>1</code></td>
<td style="text-align: left">最小下单量</td>
</tr>
<tr>
<td style="text-align: left">minOrderMoney</td>
<td style="text-align: left">number</td>
<td style="text-align: left"><code>1.0000000000000000</code></td>
<td style="text-align: left">最小下单金额</td>
</tr>
<tr>
<td style="text-align: left">maxMarketVolume</td>
<td style="text-align: left">number</td>
<td style="text-align: left"><code>200000</code></td>
<td style="text-align: left">市价单最大下单数量</td>
</tr>
<tr>
<td style="text-align: left">maxMarketMoney</td>
<td style="text-align: left">number</td>
<td style="text-align: left"><code>500000.0000000000000000</code></td>
<td style="text-align: left">市价最大下单金额</td>
</tr>
<tr>
<td style="text-align: left">maxLimitVolume</td>
<td style="text-align: left">number</td>
<td style="text-align: left"><code>300000</code></td>
<td style="text-align: left">限价单最大下单数量</td>
</tr>
<tr>
<td style="text-align: left">maxLimitMoney</td>
<td style="text-align: left">number</td>
<td style="text-align: left"><code>500000.0000000000000000</code></td>
<td style="text-align: left">限价最大下单金额</td>
</tr>
<tr>
<td style="text-align: left">maxValidOrder</td>
<td style="text-align: left">number</td>
<td style="text-align: left"><code>10</code></td>
<td style="text-align: left">最大有效委托的订单数量</td>
</tr>
</tbody></table>
<h2 id='8e4b902c12-2'>行情</h2><h3 id='none-4'>安全类型: None</h3>
<aside class="notice">行情下方的接口不需要API-Key或者签名就能自由访问</aside>
<h3 id='b754edd9d5-2'>订单薄</h3>
<p><code>GET https://futuresopenapi.fameex.com/fapi/v1/depth</code></p>

<p>市场订单薄深度信息</p>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://futuresopenapi.fameex.com/fapi/v1/depth?contractName=E-BTC-USDT&amp;limit=100

// request headers
Content-Type:application/json
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://futuresopenapi.fameex.com/fapi/v1/depth?contractName=E-BTC-USDT&amp;limit=100"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="c1">// 使用 URI 创建 URL</span>
      <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="s">"https://futuresopenapi.fameex.com/fapi/v1/depth?contractName=E-BTC-USDT&amp;limit=100"</span><span class="o">);</span>
      <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>

      <span class="c1">// 读取响应</span>
      <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
      <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
      <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
      <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

      <span class="c1">// 输出结果</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response: "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="s">"https://futuresopenapi.fameex.com/fapi/v1/depth?contractName=E-BTC-USDT&amp;limit=100"</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应体</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"读取响应失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 打印响应</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"服务器返回:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com/fapi/v1/depth?contractName=E-BTC-USDT&amp;limit=100"</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>  <span class="c1"># 检查请求是否成功
</span>    <span class="k">print</span><span class="p">(</span><span class="s">"Response:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
<span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"请求错误:"</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$url</span> <span class="o">=</span> <span class="s2">"https://futuresopenapi.fameex.com/fapi/v1/depth?contractName=E-BTC-USDT&amp;limit=100"</span><span class="p">;</span>

<span class="c1">// 初始化 cURL</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>

<span class="c1">// 设置 cURL 选项</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 跳过 SSL 证书验证（如果 API 需要）</span>

<span class="c1">// 执行请求</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 检查是否有错误</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"cURL 错误："</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Response: "</span> <span class="mf">.</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 关闭 cURL</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">https</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://futuresopenapi.fameex.com/fapi/v1/depth?contractName=E-BTC-USDT&amp;limit=100</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">https</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>

  <span class="c1">// A chunk of data has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">data</span> <span class="o">+=</span> <span class="nx">chunk</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="c1">// The whole response has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">end</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>

<span class="p">}).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">请求错误:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">contractName<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>大写</code>合约名称，例如：<code>E-BTC-USDT</code></td>
</tr>
<tr>
<td style="text-align: left">limit</td>
<td style="text-align: left">integer</td>
<td style="text-align: left">默认：100；最大：100</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1704962463000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">[</span><span class="w">
            </span><span class="mf">3.90000000</span><span class="p">,</span><span class="w">     </span><span class="err">//价格</span><span class="w">
            </span><span class="mf">16.10000000</span><span class="w">     </span><span class="err">//数量</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="p">[</span><span class="w">
            </span><span class="mf">4.00000000</span><span class="p">,</span><span class="w">
            </span><span class="mf">29.30000000</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"asks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">[</span><span class="w">
            </span><span class="mf">4.00000200</span><span class="p">,</span><span class="w">     </span><span class="err">//价格</span><span class="w">
            </span><span class="mf">12.00000000</span><span class="w">     </span><span class="err">//数量</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="p">[</span><span class="w">
            </span><span class="mf">5.10000000</span><span class="p">,</span><span class="w">
            </span><span class="mf">28.00000000</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">time</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>1595563624731</code></td>
<td style="text-align: left">当前时间戳</td>
</tr>
<tr>
<td style="text-align: left">bids</td>
<td style="text-align: left">list</td>
<td style="text-align: left"><code>[[3.9,16.1],[4.0,29.3]]</code></td>
<td style="text-align: left">订单薄买盘信息，数组第一位为价格，类型为float；第二位为当前价格对应的数量，类型为float</td>
</tr>
<tr>
<td style="text-align: left">asks</td>
<td style="text-align: left">list</td>
<td style="text-align: left"><code>[[4.00000200,12.0],[5.1,28.0]]</code></td>
<td style="text-align: left">订单薄卖盘信息，数组第一位为价格，类型为float；第二位为当前价格对应的数量，类型为float</td>
</tr>
</tbody></table>

<p>bids和asks所对应的信息代表了订单薄的所有价格以及价格对应的数量的信息, 由最优价格从上到下排列</p>
<h3 id='ticker-2'>行情Ticker</h3>
<p><code>GET https://futuresopenapi.fameex.com/fapi/v1/ticker</code></p>

<p>24小时价格变化数据</p>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://futuresopenapi.fameex.com/fapi/v1/ticker?contractName=E-BTC-USDT

// request headers
Content-Type:application/json
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://futuresopenapi.fameex.com/fapi/v1/ticker?contractName=E-BTC-USDT"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="c1">// 使用 URI 创建 URL</span>
      <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="s">"https://futuresopenapi.fameex.com/fapi/v1/ticker?contractName=E-BTC-USDT"</span><span class="o">);</span>
      <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>

      <span class="c1">// 读取响应</span>
      <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
      <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
      <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
      <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

      <span class="c1">// 输出结果</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response: "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="s">"https://futuresopenapi.fameex.com/fapi/v1/ticker?contractName=E-BTC-USDT"</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应体</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"读取响应失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 打印响应</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"服务器返回:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com/fapi/v1/ticker?contractName=E-BTC-USDT"</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>  <span class="c1"># 检查请求是否成功
</span>    <span class="k">print</span><span class="p">(</span><span class="s">"Response:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
<span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"请求错误:"</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$url</span> <span class="o">=</span> <span class="s2">"https://futuresopenapi.fameex.com/fapi/v1/ticker?contractName=E-BTC-USDT"</span><span class="p">;</span>

<span class="c1">// 初始化 cURL</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>

<span class="c1">// 设置 cURL 选项</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 跳过 SSL 证书验证（如果 API 需要）</span>

<span class="c1">// 执行请求</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 检查是否有错误</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"cURL 错误："</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Response: "</span> <span class="mf">.</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 关闭 cURL</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">https</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://futuresopenapi.fameex.com/fapi/v1/ticker?contractName=E-BTC-USDT</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">https</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>

  <span class="c1">// A chunk of data has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">data</span> <span class="o">+=</span> <span class="nx">chunk</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="c1">// The whole response has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">end</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>

<span class="p">}).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">请求错误:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">contractName<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>大写</code>合约名称，例如：<code>E-BTC-USDT</code></td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="mf">56120.22</span><span class="p">,</span><span class="w">
    </span><span class="nl">"vol"</span><span class="p">:</span><span class="w"> </span><span class="mf">51.21</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="mf">55989.93</span><span class="p">,</span><span class="w">
    </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="mf">55982.24</span><span class="p">,</span><span class="w">
    </span><span class="nl">"buy"</span><span class="p">:</span><span class="w"> </span><span class="mf">55988.10</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sell"</span><span class="p">:</span><span class="w"> </span><span class="mf">55990.10</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rose"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+0.05"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1704966225000</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">time</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>1595563624731</code></td>
<td style="text-align: left">时间戳</td>
</tr>
<tr>
<td style="text-align: left">high</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>56120.22</code></td>
<td style="text-align: left">最高价</td>
</tr>
<tr>
<td style="text-align: left">low</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>55982.24</code></td>
<td style="text-align: left">最低价</td>
</tr>
<tr>
<td style="text-align: left">last</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>55989.93</code></td>
<td style="text-align: left">最新价</td>
</tr>
<tr>
<td style="text-align: left">vol</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>51.21</code></td>
<td style="text-align: left">交易量</td>
</tr>
<tr>
<td style="text-align: left">rose</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>+0.05</code></td>
<td style="text-align: left">涨跌幅，<code>+</code>为涨，<code>-</code>为跌，<code>+0.05</code>为涨<code>5%</code></td>
</tr>
<tr>
<td style="text-align: left">buy</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>55988.10</code></td>
<td style="text-align: left">买一价格</td>
</tr>
<tr>
<td style="text-align: left">sell</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>55990.10</code></td>
<td style="text-align: left">卖一价格</td>
</tr>
</tbody></table>
<h3 id='ticker-v2-2'>行情Ticker-V2</h3>
<p><code>GET https://futuresopenapi.fameex.com/swap-api/v2/tickers</code></p>

<p>24小时价格变化数据</p>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://futuresopenapi.fameex.com/swap-api/v2/tickers

// request headers
Content-Type:application/json
</span></code></pre></div>
<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"base_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"open_interest_usd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3158506.047"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quote_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"475254656162"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"base_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2135453.51"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"open_interest"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1372.13"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2302.705"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"basis"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0003"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quote_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ticker_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"funding_rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0000632068687814"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2318.84"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"product_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Perpetual"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2160.71"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ask"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2301.96"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"next_funding_rate_timestam"</span><span class="p">:</span><span class="w"> </span><span class="mi">1741248000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2301.8"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2301.9"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">ticker_id</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>ETH-USDT</code></td>
<td style="text-align: left">交易对</td>
</tr>
<tr>
<td style="text-align: left">product_type</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>Perpetual</code></td>
<td style="text-align: left">合约类型</td>
</tr>
<tr>
<td style="text-align: left">base_currency</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>ETH</code></td>
<td style="text-align: left">交易币种</td>
</tr>
<tr>
<td style="text-align: left">quote_currency</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>USDT</code></td>
<td style="text-align: left">计价币种</td>
</tr>
<tr>
<td style="text-align: left">last_price</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>2301.9</code></td>
<td style="text-align: left">最新成交价</td>
</tr>
<tr>
<td style="text-align: left">index_price</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>2302.705</code></td>
<td style="text-align: left">指数价格</td>
</tr>
<tr>
<td style="text-align: left">base_volume</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>2135453.51</code></td>
<td style="text-align: left">交易量</td>
</tr>
<tr>
<td style="text-align: left">quote_volume</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>475254656162</code></td>
<td style="text-align: left">交易额</td>
</tr>
<tr>
<td style="text-align: left">bid</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>2301.8</code></td>
<td style="text-align: left">买一价格</td>
</tr>
<tr>
<td style="text-align: left">ask</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>2301.96</code></td>
<td style="text-align: left">卖一价格</td>
</tr>
<tr>
<td style="text-align: left">high</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>2318.84</code></td>
<td style="text-align: left">最高价格</td>
</tr>
<tr>
<td style="text-align: left">low</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>2160.71</code></td>
<td style="text-align: left">最低价格</td>
</tr>
<tr>
<td style="text-align: left">open_interest</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>1372.13</code></td>
<td style="text-align: left">开仓数量</td>
</tr>
<tr>
<td style="text-align: left">open_interest_usd</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>3158506.047</code></td>
<td style="text-align: left">开仓金额</td>
</tr>
<tr>
<td style="text-align: left">basis</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>0.0003</code></td>
<td style="text-align: left">基差</td>
</tr>
<tr>
<td style="text-align: left">funding_rate</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>0.0000632068687814</code></td>
<td style="text-align: left">资金费率</td>
</tr>
<tr>
<td style="text-align: left">next_funding_rate_timestam</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>1741248000000</code></td>
<td style="text-align: left">下一期资金费率时间</td>
</tr>
</tbody></table>
<h3 id='c3474f0c9f'>获取指数/标记价格</h3>
<p><code>GET</code> <code>https://futuresopenapi.fameex.com/fapi/v1/index</code></p>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://futuresopenapi.fameex.com/fapi/v1/index?contractName=E-BTC-USDT&amp;limit=100

// request headers
Content-Type:application/json
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://futuresopenapi.fameex.com/fapi/v1/index?contractName=E-BTC-USDT&amp;limit=100"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="c1">// 使用 URI 创建 URL</span>
      <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="s">"https://futuresopenapi.fameex.com/fapi/v1/index?contractName=E-BTC-USDT&amp;limit=100"</span><span class="o">);</span>
      <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>

      <span class="c1">// 读取响应</span>
      <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
      <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
      <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
      <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

      <span class="c1">// 输出结果</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response: "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="s">"https://futuresopenapi.fameex.com/fapi/v1/index?contractName=E-BTC-USDT&amp;limit=100"</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应体</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"读取响应失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 打印响应</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"服务器返回:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com/fapi/v1/index?contractName=E-BTC-USDT&amp;limit=100"</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>  <span class="c1"># 检查请求是否成功
</span>    <span class="k">print</span><span class="p">(</span><span class="s">"Response:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
<span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"请求错误:"</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$url</span> <span class="o">=</span> <span class="s2">"https://futuresopenapi.fameex.com/fapi/v1/index?contractName=E-BTC-USDT&amp;limit=100"</span><span class="p">;</span>

<span class="c1">// 初始化 cURL</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>

<span class="c1">// 设置 cURL 选项</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 跳过 SSL 证书验证（如果 API 需要）</span>

<span class="c1">// 执行请求</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 检查是否有错误</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"cURL 错误："</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Response: "</span> <span class="mf">.</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 关闭 cURL</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">https</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://futuresopenapi.fameex.com/fapi/v1/index?contractName=E-BTC-USDT&amp;limit=100</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">https</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>

  <span class="c1">// A chunk of data has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">data</span> <span class="o">+=</span> <span class="nx">chunk</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="c1">// The whole response has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">end</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>

<span class="p">}).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">请求错误:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">contractName<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>大写</code>合约名称，例如：<code>E-BTC-USDT</code></td>
</tr>
<tr>
<td style="text-align: left">limit</td>
<td style="text-align: left">string</td>
<td style="text-align: left">默认：100；最大：1000</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"currentFundRate"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0037500000000000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"indexPrice"</span><span class="p">:</span><span class="w"> </span><span class="mf">27905.9800000000000000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tagPrice"</span><span class="p">:</span><span class="w"> </span><span class="mf">27824.4422146875000000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"nextFundRate"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0037500000000000</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">名称</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">例子</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">indexPrice</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>27905.9800000000000000</code></td>
<td style="text-align: left">指数价格</td>
</tr>
<tr>
<td style="text-align: left">tagPrice</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>27824.4422146875000000</code></td>
<td style="text-align: left">标记价格</td>
</tr>
<tr>
<td style="text-align: left">nextFundRate</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>-0.0037500000000000</code></td>
<td style="text-align: left">资金费率价格</td>
</tr>
<tr>
<td style="text-align: left">currentFundRate</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>-0.0037500000000000</code></td>
<td style="text-align: left">上期资金费率（用于本期结算）</td>
</tr>
</tbody></table>
<h3 id='k-3'>K线/蜡烛图数据</h3>
<p><code>GET https://futuresopenapi.fameex.com/fapi/v1/klines</code></p>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET https://futuresopenapi.fameex.com/fapi/v1/klines?contractName=E-BTC-USDT&amp;interval=1min&amp;limit=100&amp;startTime=1739116800000&amp;endTime=1739852318000

// request headers
Content-Type:application/json
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://futuresopenapi.fameex.com/fapi/v1/klines?contractName=E-BTC-USDT&amp;interval=1min&amp;limit=100&amp;startTime=1739116800000&amp;endTime=1739852318000"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="c1">// 使用 URI 创建 URL</span>
      <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="s">"https://futuresopenapi.fameex.com/fapi/v1/klines?contractName=E-BTC-USDT&amp;interval=1min&amp;limit=100&amp;startTime=1739116800000&amp;endTime=1739852318000"</span><span class="o">);</span>
      <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>
      <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>

      <span class="c1">// 读取响应</span>
      <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
      <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
      <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
      <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

      <span class="c1">// 输出结果</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response: "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="s">"https://futuresopenapi.fameex.com/fapi/v1/klines?contractName=E-BTC-USDT&amp;interval=1min&amp;limit=100&amp;startTime=1739116800000&amp;endTime=1739852318000"</span>

    <span class="c">// 发送 GET 请求</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应体</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"读取响应失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 打印响应</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"服务器返回:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com/fapi/v1/klines?contractName=E-BTC-USDT&amp;interval=1min&amp;limit=100&amp;startTime=1739116800000&amp;endTime=1739852318000"</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>  <span class="c1"># 检查请求是否成功
</span>    <span class="k">print</span><span class="p">(</span><span class="s">"Response:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
<span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"请求错误:"</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$url</span> <span class="o">=</span> <span class="s2">"https://futuresopenapi.fameex.com/fapi/v1/klines?contractName=E-BTC-USDT&amp;interval=1min&amp;limit=100&amp;startTime=1739116800000&amp;endTime=1739852318000"</span><span class="p">;</span>

<span class="c1">// 初始化 cURL</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>

<span class="c1">// 设置 cURL 选项</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 跳过 SSL 证书验证（如果 API 需要）</span>

<span class="c1">// 执行请求</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// 检查是否有错误</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"cURL 错误："</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Response: "</span> <span class="mf">.</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 关闭 cURL</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">https</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://futuresopenapi.fameex.com/fapi/v1/klines?contractName=E-BTC-USDT&amp;interval=1min&amp;limit=100&amp;startTime=1739116800000&amp;endTime=1739852318000</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">https</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>

  <span class="c1">// A chunk of data has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">data</span> <span class="o">+=</span> <span class="nx">chunk</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="c1">// The whole response has been received.</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">end</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Response:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>

<span class="p">}).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">请求错误:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">contractName<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>大写</code>合约名称，例如：<code>E-BTC-USDT</code></td>
</tr>
<tr>
<td style="text-align: left">interval<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">K线图区间，可识别的参数值为：<code>1min</code>，<code>5min</code>，<code>15min</code>，<code>30min</code>，<code>1h</code>，<code>1day</code>，<code>1week</code>，<code>1month</code>（min=分钟，h=小时，day=天，week=星期，month=月）</td>
</tr>
<tr>
<td style="text-align: left">limit</td>
<td style="text-align: left">integer</td>
<td style="text-align: left">默认：100；最大：300</td>
</tr>
<tr>
<td style="text-align: left">startTime</td>
<td style="text-align: left">long</td>
<td style="text-align: left">开始时间戳</td>
</tr>
<tr>
<td style="text-align: left">endTime</td>
<td style="text-align: left">long</td>
<td style="text-align: left">结束时间戳</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="mf">6228.77</span><span class="p">,</span><span class="w">
        </span><span class="nl">"vol"</span><span class="p">:</span><span class="w"> </span><span class="mi">111</span><span class="p">,</span><span class="w">
        </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="mf">6190.48</span><span class="p">,</span><span class="w">
        </span><span class="nl">"idx"</span><span class="p">:</span><span class="w"> </span><span class="mi">15946403400000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"close"</span><span class="p">:</span><span class="w"> </span><span class="mf">6210.51</span><span class="p">,</span><span class="w">
        </span><span class="nl">"open"</span><span class="p">:</span><span class="w"> </span><span class="mf">6195.80</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="mf">6228.77</span><span class="p">,</span><span class="w">
        </span><span class="nl">"vol"</span><span class="p">:</span><span class="w"> </span><span class="mi">222</span><span class="p">,</span><span class="w">
        </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="mf">6228.77</span><span class="p">,</span><span class="w">
        </span><span class="nl">"idx"</span><span class="p">:</span><span class="w"> </span><span class="mi">15876321600000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"close"</span><span class="p">:</span><span class="w"> </span><span class="mf">6228.77</span><span class="p">,</span><span class="w">
        </span><span class="nl">"open"</span><span class="p">:</span><span class="w"> </span><span class="mf">6228.77</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="mf">6228.77</span><span class="p">,</span><span class="w">
        </span><span class="nl">"vol"</span><span class="p">:</span><span class="w"> </span><span class="mi">333</span><span class="p">,</span><span class="w">
        </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="mf">6228.77</span><span class="p">,</span><span class="w">
        </span><span class="nl">"idx"</span><span class="p">:</span><span class="w"> </span><span class="mi">15876321000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"close"</span><span class="p">:</span><span class="w"> </span><span class="mf">6228.77</span><span class="p">,</span><span class="w">
        </span><span class="nl">"open"</span><span class="p">:</span><span class="w"> </span><span class="mf">6228.77</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">idx</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>15946403400000</code></td>
<td style="text-align: left">开始时间戳</td>
</tr>
<tr>
<td style="text-align: left">open</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>6195.80</code></td>
<td style="text-align: left">开盘价</td>
</tr>
<tr>
<td style="text-align: left">close</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>6210.51</code></td>
<td style="text-align: left">收盘价</td>
</tr>
<tr>
<td style="text-align: left">high</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>6228.77</code></td>
<td style="text-align: left">最高价</td>
</tr>
<tr>
<td style="text-align: left">low</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>6190.48</code></td>
<td style="text-align: left">最低价</td>
</tr>
<tr>
<td style="text-align: left">vol</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>111</code></td>
<td style="text-align: left">成交量</td>
</tr>
</tbody></table>
<h2 id='dfe799947f-2'>交易</h2><h3 id='trade-2'>安全类型: TRADE</h3>
<aside class="notice">交易下方的接口都需要签名和API-key验证</aside>
<h3 id='5ac84906d9'>创建订单</h3>
<p><code>POST https://futuresopenapi.fameex.com/fapi/v1/order</code></p>

<p>创建单个新订单</p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">时间戳</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-KEY</td>
</tr>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">POST https://futuresopenapi.fameex.com/fapi/v1/order

body
{"contractName":"E-BTC-USDT","price":65000.00,"volume":1.00,"type":"LIMIT","side":"BUY","open":"OPEN","positionType":1,"clientOrderId":"111000111","timeInForce":"IOC"}
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># API 相关信息</span>
<span class="nv">api_key</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">api_secret</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 请求信息</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="k">$((</span><span class="si">$(</span><span class="nb">date</span> +%s%N<span class="si">)</span><span class="o">/</span><span class="m">1000000</span><span class="k">))</span>  <span class="c"># 毫秒级时间戳</span>
<span class="nv">method</span><span class="o">=</span><span class="s2">"POST"</span>
<span class="nv">request_path</span><span class="o">=</span><span class="s2">"/fapi/v1/order"</span>

<span class="c"># 请求主体 (JSON 格式)</span>
<span class="nv">body</span><span class="o">=</span><span class="s1">'{"contractName":"E-BTC-USDT","price":65000.00,"volume":1.00,"type":"LIMIT","side":"BUY","open":"OPEN","positionType":1,"clientOrderId":"111000111","timeInForce":"IOC"}'</span>

<span class="c"># 删除 body 中的空白字符，保证签名的一致性</span>
<span class="nv">body</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span> | jq <span class="nt">-c</span><span class="si">)</span>

<span class="c"># 拼接签名字符串</span>
<span class="nv">sign_str</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">method</span><span class="k">}${</span><span class="nv">request_path</span><span class="k">}${</span><span class="nv">body</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"签名字符串: </span><span class="nv">$sign_str</span><span class="s2">"</span>

<span class="c"># 生成 HMAC SHA256 签名</span>
<span class="nv">signature</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$sign_str</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$api_secret</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>
<span class="nb">echo</span> <span class="s2">"签名 (X-CH-SIGN): </span><span class="nv">$signature</span><span class="s2">"</span>

<span class="c"># 发送 POST 请求</span>
<span class="nv">response</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="nt">-X</span> POST <span class="s2">"https://futuresopenapi.fameex.com</span><span class="k">${</span><span class="nv">request_path</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span><span class="si">)</span>

<span class="c"># 输出响应结果</span>
<span class="nb">echo</span> <span class="s2">"响应: </span><span class="nv">$response</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.TimeUnit</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SendOrder</span> <span class="o">{</span>

    <span class="c1">// API 相关信息</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/order"</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// 获取时间戳 (毫秒)</span>
            <span class="kt">long</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">.</span><span class="na">convert</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">(),</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span><span class="o">;</span>

            <span class="c1">// 请求主体 (JSON 格式，注意使用紧凑格式)</span>
            <span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{\"contractName\":\"E-BTC-USDT\",\"price\":65000.00,\"volume\":1.00,\"type\":\"LIMIT\",\"side\":\"BUY\",\"open\":\"OPEN\",\"positionType\":1,\"clientOrderId\":\"111000111\",\"timeInForce\":\"IOC\"}"</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"请求主体 (body): "</span> <span class="o">+</span> <span class="n">body</span><span class="o">);</span>

            <span class="c1">// 拼接签名字符串</span>
            <span class="nc">String</span> <span class="n">signStr</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span> <span class="o">+</span> <span class="n">body</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名字符串: "</span> <span class="o">+</span> <span class="n">signStr</span><span class="o">);</span>

            <span class="c1">// 生成 HMAC SHA256 签名</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSHA256</span><span class="o">(</span><span class="n">signStr</span><span class="o">,</span> <span class="no">API_SECRET</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名 (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>

            <span class="c1">// 使用 URI 创建 URL</span>
            <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="no">BASE_URL</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">timestamp</span><span class="o">));</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="no">API_KEY</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// 发送请求主体</span>
            <span class="k">try</span> <span class="o">(</span><span class="nc">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">body</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
                <span class="n">os</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
            <span class="o">}</span>

            <span class="c1">// 读取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span>
                    <span class="n">responseCode</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">responseCode</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="o">?</span> <span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()</span> <span class="o">:</span> <span class="n">conn</span><span class="o">.</span><span class="na">getErrorStream</span><span class="o">()));</span>
            <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
            <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

            <span class="c1">// 输出响应结果</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"响应 ("</span> <span class="o">+</span> <span class="n">responseCode</span> <span class="o">+</span> <span class="s">"): "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**
     * 生成 HMAC SHA256 签名
     *
     * @param data   要签名的字符串
     * @param secret 密钥
     * @return HMAC SHA256 签名
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSHA256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"bytes"</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="c">// API 相关信息</span>
<span class="k">const</span> <span class="p">(</span>
    <span class="n">APIKey</span>     <span class="o">=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">APISecret</span>  <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
    <span class="n">BaseURL</span>    <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
    <span class="n">RequestPath</span> <span class="o">=</span> <span class="s">"/fapi/v1/order"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// 获取毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span> <span class="o">/</span> <span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

    <span class="c">// 请求主体 (JSON 格式)</span>
    <span class="n">body</span> <span class="o">:=</span> <span class="s">`{"contractName":"E-BTC-USDT","price":65000.00,"volume":1.00,"type":"LIMIT","side":"BUY","open":"OPEN","positionType":1,"clientOrderId":"111000111","timeInForce":"IOC"}`</span>

    <span class="c">// 拼接签名字符串</span>
    <span class="n">signStr</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d%s%s%s"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">RequestPath</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">signStr</span><span class="p">)</span>

    <span class="c">// 生成 HMAC SHA256 签名</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">signStr</span><span class="p">,</span> <span class="n">APISecret</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 发送 POST 请求</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="n">BaseURL</span> <span class="o">+</span> <span class="n">RequestPath</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">body</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"创建请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置请求头</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">))</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">APIKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 执行请求</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">responseBody</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"响应:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">responseBody</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 生成 HMAC SHA256 签名</span>
<span class="k">func</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
<span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/order"</span>

<span class="c1"># 请求方法和请求主体
</span><span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span>
<span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s">"contractName"</span><span class="p">:</span><span class="s">"E-BTC-USDT"</span><span class="p">,</span><span class="s">"price"</span><span class="p">:</span><span class="mf">65000.00</span><span class="p">,</span><span class="s">"volume"</span><span class="p">:</span><span class="mf">1.00</span><span class="p">,</span><span class="s">"type"</span><span class="p">:</span><span class="s">"LIMIT"</span><span class="p">,</span><span class="s">"side"</span><span class="p">:</span><span class="s">"BUY"</span><span class="p">,</span><span class="s">"open"</span><span class="p">:</span><span class="s">"OPEN"</span><span class="p">,</span><span class="s">"positionType"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="s">"clientOrderId"</span><span class="p">:</span><span class="s">"111000111"</span><span class="p">,</span><span class="s">"timeInForce"</span><span class="p">:</span><span class="s">"IOC"</span><span class="p">}</span>


<span class="c1"># 获取时间戳 (毫秒级)
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1"># 将请求主体转换为紧凑的 JSON 字符串
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="n">body_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"请求主体 (body):"</span><span class="p">,</span> <span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 拼接签名字符串
</span><span class="n">sign_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}{</span><span class="n">method</span><span class="si">}{</span><span class="n">REQUEST_PATH</span><span class="si">}{</span><span class="n">body_str</span><span class="si">}</span><span class="s">"</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">sign_str</span><span class="p">)</span>

<span class="c1"># 生成 HMAC SHA256 签名
</span><span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sign_str</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

<span class="c1"># 构建请求头
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="s">"User-Agent"</span><span class="p">:</span> <span class="s">"Python-Client"</span>
<span class="p">}</span>

<span class="c1"># 发送 POST 请求
</span><span class="n">url</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 输出响应结果
</span><span class="k">print</span><span class="p">(</span><span class="s">"响应状态码:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"响应内容:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// API 相关信息</span>
<span class="nv">$apiKey</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$apiSecret</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>
<span class="nv">$baseUrl</span> <span class="o">=</span> <span class="s2">"https://futuresopenapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$requestPath</span> <span class="o">=</span> <span class="s2">"/fapi/v1/order"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="s2">"POST"</span><span class="p">;</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">([</span>
    <span class="s2">"contractName"</span> <span class="o">=&gt;</span> <span class="s2">"E-BTC-USDT"</span><span class="p">,</span>
    <span class="s2">"price"</span> <span class="o">=&gt;</span> <span class="mf">65000.00</span><span class="p">,</span>
    <span class="s2">"volume"</span> <span class="o">=&gt;</span> <span class="mf">1.00</span><span class="p">,</span>
    <span class="s2">"type"</span> <span class="o">=&gt;</span> <span class="s2">"LIMIT"</span><span class="p">,</span>
    <span class="s2">"side"</span> <span class="o">=&gt;</span> <span class="s2">"BUY"</span><span class="p">,</span>
    <span class="s2">"open"</span> <span class="o">=&gt;</span> <span class="s2">"OPEN"</span><span class="p">,</span>
    <span class="s2">"positionType"</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"clientOrderId"</span> <span class="o">=&gt;</span> <span class="s2">"111000111"</span><span class="p">,</span>
    <span class="s2">"timeInForce"</span> <span class="o">=&gt;</span> <span class="s2">"IOC"</span>
<span class="p">],</span> <span class="no">JSON_UNESCAPED_SLASHES</span><span class="p">);</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 拼接签名字符串</span>
<span class="nv">$signStr</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$method</span> <span class="mf">.</span> <span class="nv">$requestPath</span> <span class="mf">.</span> <span class="nv">$body</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"签名字符串: "</span> <span class="mf">.</span> <span class="nv">$signStr</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$signStr</span><span class="p">,</span> <span class="nv">$apiSecret</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"签名 (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$signature</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 构建请求头</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$apiKey</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"User-Agent: PHP-Client"</span>
<span class="p">];</span>

<span class="c1">// 发送 POST 请求</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nv">$baseUrl</span> <span class="mf">.</span> <span class="nv">$requestPath</span><span class="p">;</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$body</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 仅在开发环境中使用，生产环境应启用 SSL 验证</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$httpCode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"请求失败: "</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"响应状态码: </span><span class="nv">$httpCode</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"响应内容: </span><span class="nv">$response</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span>

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">BASE_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://futuresopenapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/fapi/v1/order</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="kd">const</span> <span class="nx">method</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">contractName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">E-BTC-USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">price</span><span class="p">:</span> <span class="mf">65000.00</span><span class="p">,</span>
    <span class="na">volume</span><span class="p">:</span> <span class="mf">1.00</span><span class="p">,</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">LIMIT</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">side</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BUY</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">open</span><span class="p">:</span> <span class="dl">"</span><span class="s2">OPEN</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">positionType</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">clientOrderId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">111000111</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">timeInForce</span><span class="p">:</span> <span class="dl">"</span><span class="s2">IOC</span><span class="dl">"</span>
<span class="p">});</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>

<span class="c1">// 拼接签名字符串</span>
<span class="kd">const</span> <span class="nx">signStr</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">timestamp</span><span class="p">}${</span><span class="nx">method</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}${</span><span class="nx">body</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名字符串:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signStr</span><span class="p">);</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">signStr</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名 (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>

<span class="c1">// 构建请求头</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span>
    <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">User-Agent</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Node.js-Client</span><span class="dl">"</span>
<span class="p">};</span>

<span class="c1">// 发送 POST 请求</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">sendOrder</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">BASE_URL</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">body</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">});</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应状态码:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应内容:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">请求失败:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 执行请求</span>
<span class="nx">sendOrder</span><span class="p">();</span>

</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">contractName<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>大写</code>合约名称，例如：<code>E-BTC-USDT</code></td>
</tr>
<tr>
<td style="text-align: left">price</td>
<td style="text-align: left">number</td>
<td style="text-align: left">下单价格，限价单时该字段为必传，有精度限制，精度由管理员设置</td>
</tr>
<tr>
<td style="text-align: left">volume<font color="red">*</font></td>
<td style="text-align: left">number</td>
<td style="text-align: left">下单张数，有精度限制，精度由管理员设置，市价开仓时这里单位是价值</td>
</tr>
<tr>
<td style="text-align: left">type<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">订单类型，<code>LIMIT/MARKET</code></td>
</tr>
<tr>
<td style="text-align: left">side<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">买卖方向，<code>BUY/SELL</code></td>
</tr>
<tr>
<td style="text-align: left">open<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">开平仓方向，<code>OPEN/CLOSE</code></td>
</tr>
<tr>
<td style="text-align: left">positionType<font color="red">*</font></td>
<td style="text-align: left">number</td>
<td style="text-align: left">持仓类型，<code>1:全仓/2:逐仓</code></td>
</tr>
<tr>
<td style="text-align: left">timeInForce</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>IOC, FOK, POST_ONLY</code></td>
</tr>
<tr>
<td style="text-align: left">clientOrderId</td>
<td style="text-align: left">string</td>
<td style="text-align: left">客户端下单标识，长度小于32位的字符串</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">256609229205684228</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">orderId</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>256609229205684228</code></td>
<td style="text-align: left">订单ID</td>
</tr>
</tbody></table>
<h3 id='af8cccfe1d'>创建条件单</h3>
<p><code>POST https://futuresopenapi.fameex.com/fapi/v1/conditionOrder</code></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">时间戳</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-KEY</td>
</tr>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">POST https://futuresopenapi.fameex.com/fapi/v1/conditionOrder

body
{"contractName":"E-BTC-USDT","price":"100.00","volume":"1.00","type":"LIMIT","side":"BUY","positionType":"1","open":"OPEN","triggerType":"1","triggerPrice":"455"}
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># API 相关信息</span>
<span class="nv">api_key</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">api_secret</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 请求信息</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="k">$((</span><span class="si">$(</span><span class="nb">date</span> +%s%N<span class="si">)</span><span class="o">/</span><span class="m">1000000</span><span class="k">))</span>  <span class="c"># 毫秒级时间戳</span>
<span class="nv">method</span><span class="o">=</span><span class="s2">"POST"</span>
<span class="nv">request_path</span><span class="o">=</span><span class="s2">"/fapi/v1/conditionOrder"</span>

<span class="c"># 请求主体 (JSON 格式)</span>
<span class="nv">body</span><span class="o">=</span><span class="s1">'{"contractName":"E-BTC-USDT","price":"100.00","volume":"1.00","type":"LIMIT","side":"BUY","positionType":"1","open":"OPEN","triggerType":"1","triggerPrice":"455"}'</span>

<span class="c"># 删除 body 中的空白字符，保证签名的一致性</span>
<span class="nv">body</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span> | jq <span class="nt">-c</span><span class="si">)</span>

<span class="c"># 拼接签名字符串</span>
<span class="nv">sign_str</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">method</span><span class="k">}${</span><span class="nv">request_path</span><span class="k">}${</span><span class="nv">body</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"签名字符串: </span><span class="nv">$sign_str</span><span class="s2">"</span>

<span class="c"># 生成 HMAC SHA256 签名</span>
<span class="nv">signature</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$sign_str</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$api_secret</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>
<span class="nb">echo</span> <span class="s2">"签名 (X-CH-SIGN): </span><span class="nv">$signature</span><span class="s2">"</span>

<span class="c"># 发送 POST 请求</span>
<span class="nv">response</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="nt">-X</span> POST <span class="s2">"https://futuresopenapi.fameex.com</span><span class="k">${</span><span class="nv">request_path</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span><span class="si">)</span>

<span class="c"># 输出响应结果</span>
<span class="nb">echo</span> <span class="s2">"响应: </span><span class="nv">$response</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.TimeUnit</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SendOrder</span> <span class="o">{</span>

    <span class="c1">// API 相关信息</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/conditionOrder"</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// 获取时间戳 (毫秒)</span>
            <span class="kt">long</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">.</span><span class="na">convert</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">(),</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span><span class="o">;</span>

            <span class="c1">// 请求主体 (JSON 格式，注意使用紧凑格式)</span>
            <span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{"</span><span class="n">contractName</span><span class="s">":"</span><span class="no">E</span><span class="o">-</span><span class="no">BTC</span><span class="o">-</span><span class="no">USDT</span><span class="s">","</span><span class="n">price</span><span class="s">":"</span><span class="mf">100.00</span><span class="s">","</span><span class="n">volume</span><span class="s">":"</span><span class="mf">1.00</span><span class="s">","</span><span class="n">type</span><span class="s">":"</span><span class="no">LIMIT</span><span class="s">","</span><span class="n">side</span><span class="s">":"</span><span class="no">BUY</span><span class="s">","</span><span class="n">positionType</span><span class="s">":"</span><span class="mi">1</span><span class="s">","</span><span class="n">open</span><span class="s">":"</span><span class="no">OPEN</span><span class="s">","</span><span class="n">triggerType</span><span class="s">":"</span><span class="mi">1</span><span class="s">","</span><span class="n">triggerPrice</span><span class="s">":"</span><span class="mi">455</span><span class="s">"}"</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"请求主体 (body): "</span> <span class="o">+</span> <span class="n">body</span><span class="o">);</span>

            <span class="c1">// 拼接签名字符串</span>
            <span class="nc">String</span> <span class="n">signStr</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span> <span class="o">+</span> <span class="n">body</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名字符串: "</span> <span class="o">+</span> <span class="n">signStr</span><span class="o">);</span>

            <span class="c1">// 生成 HMAC SHA256 签名</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSHA256</span><span class="o">(</span><span class="n">signStr</span><span class="o">,</span> <span class="no">API_SECRET</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名 (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>

            <span class="c1">// 使用 URI 创建 URL</span>
            <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="no">BASE_URL</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">timestamp</span><span class="o">));</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="no">API_KEY</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// 发送请求主体</span>
            <span class="k">try</span> <span class="o">(</span><span class="nc">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">body</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
                <span class="n">os</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
            <span class="o">}</span>

            <span class="c1">// 读取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span>
                    <span class="n">responseCode</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">responseCode</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="o">?</span> <span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()</span> <span class="o">:</span> <span class="n">conn</span><span class="o">.</span><span class="na">getErrorStream</span><span class="o">()));</span>
            <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
            <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

            <span class="c1">// 输出响应结果</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"响应 ("</span> <span class="o">+</span> <span class="n">responseCode</span> <span class="o">+</span> <span class="s">"): "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**
     * 生成 HMAC SHA256 签名
     *
     * @param data   要签名的字符串
     * @param secret 密钥
     * @return HMAC SHA256 签名
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSHA256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"bytes"</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="c">// API 相关信息</span>
<span class="k">const</span> <span class="p">(</span>
    <span class="n">APIKey</span>     <span class="o">=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">APISecret</span>  <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
    <span class="n">BaseURL</span>    <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
    <span class="n">RequestPath</span> <span class="o">=</span> <span class="s">"/fapi/v1/conditionOrder"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// 获取毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span> <span class="o">/</span> <span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

    <span class="c">// 请求主体 (JSON 格式)</span>
    <span class="n">body</span> <span class="o">:=</span> <span class="s">`{"contractName":"E-BTC-USDT","price":"100.00","volume":"1.00","type":"LIMIT","side":"BUY","positionType":"1","open":"OPEN","triggerType":"1","triggerPrice":"455"}`</span>

    <span class="c">// 拼接签名字符串</span>
    <span class="n">signStr</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d%s%s%s"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">RequestPath</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">signStr</span><span class="p">)</span>

    <span class="c">// 生成 HMAC SHA256 签名</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">signStr</span><span class="p">,</span> <span class="n">APISecret</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 发送 POST 请求</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="n">BaseURL</span> <span class="o">+</span> <span class="n">RequestPath</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">body</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"创建请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置请求头</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">))</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">APIKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 执行请求</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">responseBody</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"响应:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">responseBody</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 生成 HMAC SHA256 签名</span>
<span class="k">func</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
<span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/conditionOrder"</span>

<span class="c1"># 请求方法和请求主体
</span><span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span>
<span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s">"contractName"</span><span class="p">:</span><span class="s">"E-BTC-USDT"</span><span class="p">,</span><span class="s">"price"</span><span class="p">:</span><span class="s">"100.00"</span><span class="p">,</span><span class="s">"volume"</span><span class="p">:</span><span class="s">"1.00"</span><span class="p">,</span><span class="s">"type"</span><span class="p">:</span><span class="s">"LIMIT"</span><span class="p">,</span><span class="s">"side"</span><span class="p">:</span><span class="s">"BUY"</span><span class="p">,</span><span class="s">"positionType"</span><span class="p">:</span><span class="s">"1"</span><span class="p">,</span><span class="s">"open"</span><span class="p">:</span><span class="s">"OPEN"</span><span class="p">,</span><span class="s">"triggerType"</span><span class="p">:</span><span class="s">"1"</span><span class="p">,</span><span class="s">"triggerPrice"</span><span class="p">:</span><span class="s">"455"</span><span class="p">}</span>


<span class="c1"># 获取时间戳 (毫秒级)
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1"># 将请求主体转换为紧凑的 JSON 字符串
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="n">body_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"请求主体 (body):"</span><span class="p">,</span> <span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 拼接签名字符串
</span><span class="n">sign_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}{</span><span class="n">method</span><span class="si">}{</span><span class="n">REQUEST_PATH</span><span class="si">}{</span><span class="n">body_str</span><span class="si">}</span><span class="s">"</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">sign_str</span><span class="p">)</span>

<span class="c1"># 生成 HMAC SHA256 签名
</span><span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sign_str</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

<span class="c1"># 构建请求头
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="s">"User-Agent"</span><span class="p">:</span> <span class="s">"Python-Client"</span>
<span class="p">}</span>

<span class="c1"># 发送 POST 请求
</span><span class="n">url</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 输出响应结果
</span><span class="k">print</span><span class="p">(</span><span class="s">"响应状态码:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"响应内容:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// API 相关信息</span>
<span class="nv">$apiKey</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$apiSecret</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>
<span class="nv">$baseUrl</span> <span class="o">=</span> <span class="s2">"https://futuresopenapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$requestPath</span> <span class="o">=</span> <span class="s2">"/fapi/v1/conditionOrder"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="s2">"POST"</span><span class="p">;</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">([</span>
    <span class="s2">"contractName"</span> <span class="o">=&gt;</span> <span class="s2">"E-BTC-USDT"</span><span class="p">,</span>
    <span class="s2">"price"</span> <span class="o">=&gt;</span> <span class="mf">65000.00</span><span class="p">,</span>
    <span class="s2">"volume"</span> <span class="o">=&gt;</span> <span class="mf">1.00</span><span class="p">,</span>
    <span class="s2">"type"</span> <span class="o">=&gt;</span> <span class="s2">"LIMIT"</span><span class="p">,</span>
    <span class="s2">"side"</span> <span class="o">=&gt;</span> <span class="s2">"BUY"</span><span class="p">,</span>
    <span class="s2">"positionType"</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"open"</span> <span class="o">=&gt;</span> <span class="s2">"OPEN"</span><span class="p">,</span>
    <span class="s2">"triggerType"</span> <span class="o">=&gt;</span> <span class="s2">"1"</span><span class="p">,</span>
    <span class="s2">"triggerPrice"</span> <span class="o">=&gt;</span> <span class="s2">"455"</span>
<span class="p">],</span> <span class="no">JSON_UNESCAPED_SLASHES</span><span class="p">);</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 拼接签名字符串</span>
<span class="nv">$signStr</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$method</span> <span class="mf">.</span> <span class="nv">$requestPath</span> <span class="mf">.</span> <span class="nv">$body</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"签名字符串: "</span> <span class="mf">.</span> <span class="nv">$signStr</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$signStr</span><span class="p">,</span> <span class="nv">$apiSecret</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"签名 (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$signature</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 构建请求头</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$apiKey</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"User-Agent: PHP-Client"</span>
<span class="p">];</span>

<span class="c1">// 发送 POST 请求</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nv">$baseUrl</span> <span class="mf">.</span> <span class="nv">$requestPath</span><span class="p">;</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$body</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 仅在开发环境中使用，生产环境应启用 SSL 验证</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$httpCode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"请求失败: "</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"响应状态码: </span><span class="nv">$httpCode</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"响应内容: </span><span class="nv">$response</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span>

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">BASE_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://futuresopenapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/fapi/v1/conditionOrder</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="kd">const</span> <span class="nx">method</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">contractName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">E-BTC-USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">price</span><span class="p">:</span> <span class="dl">"</span><span class="s2">65000.00</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">volume</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1.00</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">LIMIT</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">side</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BUY</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">positionType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">open</span><span class="p">:</span> <span class="dl">"</span><span class="s2">OPEN</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">triggerType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">triggerPrice</span><span class="p">:</span> <span class="dl">"</span><span class="s2">455</span><span class="dl">"</span>
<span class="p">});</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>

<span class="c1">// 拼接签名字符串</span>
<span class="kd">const</span> <span class="nx">signStr</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">timestamp</span><span class="p">}${</span><span class="nx">method</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}${</span><span class="nx">body</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名字符串:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signStr</span><span class="p">);</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">signStr</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名 (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>

<span class="c1">// 构建请求头</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span>
    <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">User-Agent</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Node.js-Client</span><span class="dl">"</span>
<span class="p">};</span>

<span class="c1">// 发送 POST 请求</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">sendOrder</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">BASE_URL</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">body</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">});</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应状态码:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应内容:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">请求失败:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 执行请求</span>
<span class="nx">sendOrder</span><span class="p">();</span>

</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">contractName<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>大写</code>合约名称，例如：<code>E-BTC-USDT</code></td>
</tr>
<tr>
<td style="text-align: left">price<font color="red">*</font></td>
<td style="text-align: left">number</td>
<td style="text-align: left">下单价格，有精度限制，精度由管理员设置</td>
</tr>
<tr>
<td style="text-align: left">volume<font color="red">*</font></td>
<td style="text-align: left">number</td>
<td style="text-align: left">下单数量，市价开仓时这里单位是价值，有精度限制，精度由管理员设置</td>
</tr>
<tr>
<td style="text-align: left">type<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">订单类型，<code>LIMIT</code>/<code>MARKET</code></td>
</tr>
<tr>
<td style="text-align: left">side<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">买卖方向，<code>BUY</code>/<code>SELL</code></td>
</tr>
<tr>
<td style="text-align: left">positionType<font color="red">*</font></td>
<td style="text-align: left">number</td>
<td style="text-align: left">持仓类型，1：<code>全仓</code>，2：<code>逐仓</code></td>
</tr>
<tr>
<td style="text-align: left">open<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">开平仓方向，<code>OPEN</code>/<code>CLOSE</code></td>
</tr>
<tr>
<td style="text-align: left">triggerType<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">条件的类型，1：<code>止损</code>，2：<code>止盈</code>，3：<code>追涨</code>，4：<code>杀跌</code></td>
</tr>
<tr>
<td style="text-align: left">triggerPrice<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">触发价</td>
</tr>
<tr>
<td style="text-align: left">clientOrderId</td>
<td style="text-align: left">string</td>
<td style="text-align: left">客户端下单标识，长度小于32位的字符串</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"triggerIds"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"1322738336974712847"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">

        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"cancelIds"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">

        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"succ"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>如果该接口返回与期望不符，请联系技术团队，我们会为您提供相关帮助</p>
<h3 id='3eedd32d80'>取消订单</h3>
<p><code>POST https://futuresopenapi.fameex.com/fapi/v1/cancel</code></p>

<p><strong>限速规则: 20次/2s</strong></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">POST https://futuresopenapi.fameex.com/fapi/v1/cancel

body
{"contractName":"E-BTC-USDT","orderId":"2616833860188981826"}
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># API 相关信息</span>
<span class="nv">api_key</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">api_secret</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 请求信息</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="k">$((</span><span class="si">$(</span><span class="nb">date</span> +%s%N<span class="si">)</span><span class="o">/</span><span class="m">1000000</span><span class="k">))</span>  <span class="c"># 毫秒级时间戳</span>
<span class="nv">method</span><span class="o">=</span><span class="s2">"POST"</span>
<span class="nv">request_path</span><span class="o">=</span><span class="s2">"/fapi/v1/cancel"</span>

<span class="c"># 请求主体 (JSON 格式)</span>
<span class="nv">body</span><span class="o">=</span><span class="s1">'{"contractName":"E-BTC-USDT","orderId":"2616833860188981826"}'</span>

<span class="c"># 删除 body 中的空白字符，保证签名的一致性</span>
<span class="nv">body</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span> | jq <span class="nt">-c</span><span class="si">)</span>

<span class="c"># 拼接签名字符串</span>
<span class="nv">sign_str</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">method</span><span class="k">}${</span><span class="nv">request_path</span><span class="k">}${</span><span class="nv">body</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"签名字符串: </span><span class="nv">$sign_str</span><span class="s2">"</span>

<span class="c"># 生成 HMAC SHA256 签名</span>
<span class="nv">signature</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$sign_str</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$api_secret</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>
<span class="nb">echo</span> <span class="s2">"签名 (X-CH-SIGN): </span><span class="nv">$signature</span><span class="s2">"</span>

<span class="c"># 发送 POST 请求</span>
<span class="nv">response</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="nt">-X</span> POST <span class="s2">"https://futuresopenapi.fameex.com</span><span class="k">${</span><span class="nv">request_path</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span><span class="si">)</span>

<span class="c"># 输出响应结果</span>
<span class="nb">echo</span> <span class="s2">"响应: </span><span class="nv">$response</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.TimeUnit</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SendOrder</span> <span class="o">{</span>

    <span class="c1">// API 相关信息</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/cancel"</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// 获取时间戳 (毫秒)</span>
            <span class="kt">long</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">.</span><span class="na">convert</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">(),</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span><span class="o">;</span>

            <span class="c1">// 请求主体 (JSON 格式，注意使用紧凑格式)</span>
            <span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{"</span><span class="n">contractName</span><span class="s">":"</span><span class="no">E</span><span class="o">-</span><span class="no">BTC</span><span class="o">-</span><span class="no">USDT</span><span class="s">","</span><span class="n">orderId</span><span class="s">":"</span><span class="mi">2616833860188981826</span><span class="s">"}"</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"请求主体 (body): "</span> <span class="o">+</span> <span class="n">body</span><span class="o">);</span>

            <span class="c1">// 拼接签名字符串</span>
            <span class="nc">String</span> <span class="n">signStr</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span> <span class="o">+</span> <span class="n">body</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名字符串: "</span> <span class="o">+</span> <span class="n">signStr</span><span class="o">);</span>

            <span class="c1">// 生成 HMAC SHA256 签名</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSHA256</span><span class="o">(</span><span class="n">signStr</span><span class="o">,</span> <span class="no">API_SECRET</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名 (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>

            <span class="c1">// 使用 URI 创建 URL</span>
            <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="no">BASE_URL</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">timestamp</span><span class="o">));</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="no">API_KEY</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// 发送请求主体</span>
            <span class="k">try</span> <span class="o">(</span><span class="nc">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">body</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
                <span class="n">os</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
            <span class="o">}</span>

            <span class="c1">// 读取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span>
                    <span class="n">responseCode</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">responseCode</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="o">?</span> <span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()</span> <span class="o">:</span> <span class="n">conn</span><span class="o">.</span><span class="na">getErrorStream</span><span class="o">()));</span>
            <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
            <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

            <span class="c1">// 输出响应结果</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"响应 ("</span> <span class="o">+</span> <span class="n">responseCode</span> <span class="o">+</span> <span class="s">"): "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**
     * 生成 HMAC SHA256 签名
     *
     * @param data   要签名的字符串
     * @param secret 密钥
     * @return HMAC SHA256 签名
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSHA256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"bytes"</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="c">// API 相关信息</span>
<span class="k">const</span> <span class="p">(</span>
    <span class="n">APIKey</span>     <span class="o">=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">APISecret</span>  <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
    <span class="n">BaseURL</span>    <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
    <span class="n">RequestPath</span> <span class="o">=</span> <span class="s">"/fapi/v1/cancel"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// 获取毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span> <span class="o">/</span> <span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

    <span class="c">// 请求主体 (JSON 格式)</span>
    <span class="n">body</span> <span class="o">:=</span> <span class="s">`{"contractName":"E-BTC-USDT","orderId":"2616833860188981826"}`</span>

    <span class="c">// 拼接签名字符串</span>
    <span class="n">signStr</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d%s%s%s"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">RequestPath</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">signStr</span><span class="p">)</span>

    <span class="c">// 生成 HMAC SHA256 签名</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">signStr</span><span class="p">,</span> <span class="n">APISecret</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 发送 POST 请求</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="n">BaseURL</span> <span class="o">+</span> <span class="n">RequestPath</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">body</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"创建请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置请求头</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">))</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">APIKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 执行请求</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">responseBody</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"响应:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">responseBody</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 生成 HMAC SHA256 签名</span>
<span class="k">func</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
<span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/cancel"</span>

<span class="c1"># 请求方法和请求主体
</span><span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span>
<span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s">"contractName"</span><span class="p">:</span><span class="s">"E-BTC-USDT"</span><span class="p">,</span><span class="s">"orderId"</span><span class="p">:</span><span class="s">"2616833860188981826"</span><span class="p">}</span>


<span class="c1"># 获取时间戳 (毫秒级)
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1"># 将请求主体转换为紧凑的 JSON 字符串
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="n">body_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"请求主体 (body):"</span><span class="p">,</span> <span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 拼接签名字符串
</span><span class="n">sign_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}{</span><span class="n">method</span><span class="si">}{</span><span class="n">REQUEST_PATH</span><span class="si">}{</span><span class="n">body_str</span><span class="si">}</span><span class="s">"</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">sign_str</span><span class="p">)</span>

<span class="c1"># 生成 HMAC SHA256 签名
</span><span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sign_str</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

<span class="c1"># 构建请求头
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="s">"User-Agent"</span><span class="p">:</span> <span class="s">"Python-Client"</span>
<span class="p">}</span>

<span class="c1"># 发送 POST 请求
</span><span class="n">url</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 输出响应结果
</span><span class="k">print</span><span class="p">(</span><span class="s">"响应状态码:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"响应内容:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// API 相关信息</span>
<span class="nv">$apiKey</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$apiSecret</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>
<span class="nv">$baseUrl</span> <span class="o">=</span> <span class="s2">"https://futuresopenapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$requestPath</span> <span class="o">=</span> <span class="s2">"/fapi/v1/cancel"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="s2">"POST"</span><span class="p">;</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">([</span>
    <span class="s2">"contractName"</span> <span class="o">=&gt;</span> <span class="s2">"E-BTC-USDT"</span><span class="p">,</span>
    <span class="s2">"orderId"</span> <span class="o">=&gt;</span> <span class="mi">2616833860188981826</span>
<span class="p">],</span> <span class="no">JSON_UNESCAPED_SLASHES</span><span class="p">);</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 拼接签名字符串</span>
<span class="nv">$signStr</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$method</span> <span class="mf">.</span> <span class="nv">$requestPath</span> <span class="mf">.</span> <span class="nv">$body</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"签名字符串: "</span> <span class="mf">.</span> <span class="nv">$signStr</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$signStr</span><span class="p">,</span> <span class="nv">$apiSecret</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"签名 (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$signature</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 构建请求头</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$apiKey</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"User-Agent: PHP-Client"</span>
<span class="p">];</span>

<span class="c1">// 发送 POST 请求</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nv">$baseUrl</span> <span class="mf">.</span> <span class="nv">$requestPath</span><span class="p">;</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$body</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 仅在开发环境中使用，生产环境应启用 SSL 验证</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$httpCode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"请求失败: "</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"响应状态码: </span><span class="nv">$httpCode</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"响应内容: </span><span class="nv">$response</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span>

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">BASE_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://futuresopenapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/fapi/v1/cancel</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="kd">const</span> <span class="nx">method</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">contractName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">E-BTC-USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">orderId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2616833860188981826</span><span class="dl">"</span>
<span class="p">});</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>

<span class="c1">// 拼接签名字符串</span>
<span class="kd">const</span> <span class="nx">signStr</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">timestamp</span><span class="p">}${</span><span class="nx">method</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}${</span><span class="nx">body</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名字符串:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signStr</span><span class="p">);</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">signStr</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名 (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>

<span class="c1">// 构建请求头</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span>
    <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">User-Agent</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Node.js-Client</span><span class="dl">"</span>
<span class="p">};</span>

<span class="c1">// 发送 POST 请求</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">sendOrder</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">BASE_URL</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">body</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">});</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应状态码:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应内容:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">请求失败:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 执行请求</span>
<span class="nx">sendOrder</span><span class="p">();</span>

</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">contractName<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>大写</code>合约名称，例如：<code>E-BTC-USDT</code></td>
</tr>
<tr>
<td style="text-align: left">orderId<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">订单ID</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"256609229205684228"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='054ef2401f'>取消条件单</h3>
<p><code>POST https://futuresopenapi.fameex.com/fapi/v1/cancel_trigger_order</code></p>

<p><strong>限速规则: 20次/2s</strong></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">POST https://futuresopenapi.fameex.com/fapi/v1/cancel_trigger_order

body
{"contractName":"E-BTC-USDT","orderId":"2616833860188981826"}
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># API 相关信息</span>
<span class="nv">api_key</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">api_secret</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 请求信息</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="k">$((</span><span class="si">$(</span><span class="nb">date</span> +%s%N<span class="si">)</span><span class="o">/</span><span class="m">1000000</span><span class="k">))</span>  <span class="c"># 毫秒级时间戳</span>
<span class="nv">method</span><span class="o">=</span><span class="s2">"POST"</span>
<span class="nv">request_path</span><span class="o">=</span><span class="s2">"/fapi/v1/cancel_trigger_order"</span>

<span class="c"># 请求主体 (JSON 格式)</span>
<span class="nv">body</span><span class="o">=</span><span class="s1">'{"contractName":"E-BTC-USDT","orderId":"2616833860188981826"}'</span>

<span class="c"># 删除 body 中的空白字符，保证签名的一致性</span>
<span class="nv">body</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span> | jq <span class="nt">-c</span><span class="si">)</span>

<span class="c"># 拼接签名字符串</span>
<span class="nv">sign_str</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">method</span><span class="k">}${</span><span class="nv">request_path</span><span class="k">}${</span><span class="nv">body</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"签名字符串: </span><span class="nv">$sign_str</span><span class="s2">"</span>

<span class="c"># 生成 HMAC SHA256 签名</span>
<span class="nv">signature</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$sign_str</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$api_secret</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>
<span class="nb">echo</span> <span class="s2">"签名 (X-CH-SIGN): </span><span class="nv">$signature</span><span class="s2">"</span>

<span class="c"># 发送 POST 请求</span>
<span class="nv">response</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="nt">-X</span> POST <span class="s2">"https://futuresopenapi.fameex.com</span><span class="k">${</span><span class="nv">request_path</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span><span class="si">)</span>

<span class="c"># 输出响应结果</span>
<span class="nb">echo</span> <span class="s2">"响应: </span><span class="nv">$response</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.TimeUnit</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SendOrder</span> <span class="o">{</span>

    <span class="c1">// API 相关信息</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/cancel_trigger_order"</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// 获取时间戳 (毫秒)</span>
            <span class="kt">long</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">.</span><span class="na">convert</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">(),</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span><span class="o">;</span>

            <span class="c1">// 请求主体 (JSON 格式，注意使用紧凑格式)</span>
            <span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{"</span><span class="n">contractName</span><span class="s">":"</span><span class="no">E</span><span class="o">-</span><span class="no">BTC</span><span class="o">-</span><span class="no">USDT</span><span class="s">","</span><span class="n">orderId</span><span class="s">":"</span><span class="mi">2616833860188981826</span><span class="s">"}"</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"请求主体 (body): "</span> <span class="o">+</span> <span class="n">body</span><span class="o">);</span>

            <span class="c1">// 拼接签名字符串</span>
            <span class="nc">String</span> <span class="n">signStr</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span> <span class="o">+</span> <span class="n">body</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名字符串: "</span> <span class="o">+</span> <span class="n">signStr</span><span class="o">);</span>

            <span class="c1">// 生成 HMAC SHA256 签名</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSHA256</span><span class="o">(</span><span class="n">signStr</span><span class="o">,</span> <span class="no">API_SECRET</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名 (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>

            <span class="c1">// 使用 URI 创建 URL</span>
            <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="no">BASE_URL</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">timestamp</span><span class="o">));</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="no">API_KEY</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// 发送请求主体</span>
            <span class="k">try</span> <span class="o">(</span><span class="nc">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">body</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
                <span class="n">os</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
            <span class="o">}</span>

            <span class="c1">// 读取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span>
                    <span class="n">responseCode</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">responseCode</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="o">?</span> <span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()</span> <span class="o">:</span> <span class="n">conn</span><span class="o">.</span><span class="na">getErrorStream</span><span class="o">()));</span>
            <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
            <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

            <span class="c1">// 输出响应结果</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"响应 ("</span> <span class="o">+</span> <span class="n">responseCode</span> <span class="o">+</span> <span class="s">"): "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**
     * 生成 HMAC SHA256 签名
     *
     * @param data   要签名的字符串
     * @param secret 密钥
     * @return HMAC SHA256 签名
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSHA256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"bytes"</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="c">// API 相关信息</span>
<span class="k">const</span> <span class="p">(</span>
    <span class="n">APIKey</span>     <span class="o">=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">APISecret</span>  <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
    <span class="n">BaseURL</span>    <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
    <span class="n">RequestPath</span> <span class="o">=</span> <span class="s">"/fapi/v1/cancel_trigger_order"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// 获取毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span> <span class="o">/</span> <span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

    <span class="c">// 请求主体 (JSON 格式)</span>
    <span class="n">body</span> <span class="o">:=</span> <span class="s">`{"contractName":"E-BTC-USDT","orderId":"2616833860188981826"}`</span>

    <span class="c">// 拼接签名字符串</span>
    <span class="n">signStr</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d%s%s%s"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">RequestPath</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">signStr</span><span class="p">)</span>

    <span class="c">// 生成 HMAC SHA256 签名</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">signStr</span><span class="p">,</span> <span class="n">APISecret</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 发送 POST 请求</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="n">BaseURL</span> <span class="o">+</span> <span class="n">RequestPath</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">body</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"创建请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置请求头</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">))</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">APIKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 执行请求</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">responseBody</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"响应:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">responseBody</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 生成 HMAC SHA256 签名</span>
<span class="k">func</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
<span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/cancel_trigger_order"</span>

<span class="c1"># 请求方法和请求主体
</span><span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span>
<span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s">"contractName"</span><span class="p">:</span><span class="s">"E-BTC-USDT"</span><span class="p">,</span><span class="s">"orderId"</span><span class="p">:</span><span class="s">"2616833860188981826"</span><span class="p">}</span>


<span class="c1"># 获取时间戳 (毫秒级)
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1"># 将请求主体转换为紧凑的 JSON 字符串
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="n">body_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"请求主体 (body):"</span><span class="p">,</span> <span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 拼接签名字符串
</span><span class="n">sign_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}{</span><span class="n">method</span><span class="si">}{</span><span class="n">REQUEST_PATH</span><span class="si">}{</span><span class="n">body_str</span><span class="si">}</span><span class="s">"</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">sign_str</span><span class="p">)</span>

<span class="c1"># 生成 HMAC SHA256 签名
</span><span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sign_str</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

<span class="c1"># 构建请求头
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="s">"User-Agent"</span><span class="p">:</span> <span class="s">"Python-Client"</span>
<span class="p">}</span>

<span class="c1"># 发送 POST 请求
</span><span class="n">url</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 输出响应结果
</span><span class="k">print</span><span class="p">(</span><span class="s">"响应状态码:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"响应内容:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// API 相关信息</span>
<span class="nv">$apiKey</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$apiSecret</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>
<span class="nv">$baseUrl</span> <span class="o">=</span> <span class="s2">"https://futuresopenapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$requestPath</span> <span class="o">=</span> <span class="s2">"/fapi/v1/cancel_trigger_order"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="s2">"POST"</span><span class="p">;</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">([</span>
    <span class="s2">"contractName"</span> <span class="o">=&gt;</span> <span class="s2">"E-BTC-USDT"</span><span class="p">,</span>
    <span class="s2">"orderId"</span> <span class="o">=&gt;</span> <span class="mi">2616833860188981826</span>
<span class="p">],</span> <span class="no">JSON_UNESCAPED_SLASHES</span><span class="p">);</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 拼接签名字符串</span>
<span class="nv">$signStr</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$method</span> <span class="mf">.</span> <span class="nv">$requestPath</span> <span class="mf">.</span> <span class="nv">$body</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"签名字符串: "</span> <span class="mf">.</span> <span class="nv">$signStr</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$signStr</span><span class="p">,</span> <span class="nv">$apiSecret</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"签名 (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$signature</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 构建请求头</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$apiKey</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"User-Agent: PHP-Client"</span>
<span class="p">];</span>

<span class="c1">// 发送 POST 请求</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nv">$baseUrl</span> <span class="mf">.</span> <span class="nv">$requestPath</span><span class="p">;</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$body</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 仅在开发环境中使用，生产环境应启用 SSL 验证</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$httpCode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"请求失败: "</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"响应状态码: </span><span class="nv">$httpCode</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"响应内容: </span><span class="nv">$response</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span>

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">BASE_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://futuresopenapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/fapi/v1/cancel_trigger_order</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="kd">const</span> <span class="nx">method</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">contractName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">E-BTC-USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">orderId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2616833860188981826</span><span class="dl">"</span>
<span class="p">});</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>

<span class="c1">// 拼接签名字符串</span>
<span class="kd">const</span> <span class="nx">signStr</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">timestamp</span><span class="p">}${</span><span class="nx">method</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}${</span><span class="nx">body</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名字符串:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signStr</span><span class="p">);</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">signStr</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名 (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>

<span class="c1">// 构建请求头</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span>
    <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">User-Agent</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Node.js-Client</span><span class="dl">"</span>
<span class="p">};</span>

<span class="c1">// 发送 POST 请求</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">sendOrder</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">BASE_URL</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">body</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">});</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应状态码:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应内容:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">请求失败:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 执行请求</span>
<span class="nx">sendOrder</span><span class="p">();</span>

</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">contractName<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>大写</code>合约名称，例如：<code>E-BTC-USDT</code></td>
</tr>
<tr>
<td style="text-align: left">orderId<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">订单ID</td>
</tr>
<tr>
<td style="text-align: left">clientOrderId</td>
<td style="text-align: left">string</td>
<td style="text-align: left">客户端唯一标识，默认：0</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"256609229205684228"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='dea71f6fbe'>订单详情</h3>
<p><code>GET https://futuresopenapi.fameex.com/fapi/v1/order</code></p>

<p><strong>限速规则: 20次/2s</strong></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">POST https://futuresopenapi.fameex.com/fapi/v1/order

body
{"contractName":"E-BTC-USDT","orderId":"2616833860188981826"}
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># API 相关信息</span>
<span class="nv">api_key</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">api_secret</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 请求信息</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="k">$((</span><span class="si">$(</span><span class="nb">date</span> +%s%N<span class="si">)</span><span class="o">/</span><span class="m">1000000</span><span class="k">))</span>  <span class="c"># 毫秒级时间戳</span>
<span class="nv">method</span><span class="o">=</span><span class="s2">"POST"</span>
<span class="nv">request_path</span><span class="o">=</span><span class="s2">"/fapi/v1/order"</span>

<span class="c"># 请求主体 (JSON 格式)</span>
<span class="nv">body</span><span class="o">=</span><span class="s1">'{"contractName":"E-BTC-USDT","orderId":"2616833860188981826"}'</span>

<span class="c"># 删除 body 中的空白字符，保证签名的一致性</span>
<span class="nv">body</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span> | jq <span class="nt">-c</span><span class="si">)</span>

<span class="c"># 拼接签名字符串</span>
<span class="nv">sign_str</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">method</span><span class="k">}${</span><span class="nv">request_path</span><span class="k">}${</span><span class="nv">body</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"签名字符串: </span><span class="nv">$sign_str</span><span class="s2">"</span>

<span class="c"># 生成 HMAC SHA256 签名</span>
<span class="nv">signature</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$sign_str</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$api_secret</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>
<span class="nb">echo</span> <span class="s2">"签名 (X-CH-SIGN): </span><span class="nv">$signature</span><span class="s2">"</span>

<span class="c"># 发送 POST 请求</span>
<span class="nv">response</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="nt">-X</span> POST <span class="s2">"https://futuresopenapi.fameex.com</span><span class="k">${</span><span class="nv">request_path</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span><span class="si">)</span>

<span class="c"># 输出响应结果</span>
<span class="nb">echo</span> <span class="s2">"响应: </span><span class="nv">$response</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.TimeUnit</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SendOrder</span> <span class="o">{</span>

    <span class="c1">// API 相关信息</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/order"</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// 获取时间戳 (毫秒)</span>
            <span class="kt">long</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">.</span><span class="na">convert</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">(),</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span><span class="o">;</span>

            <span class="c1">// 请求主体 (JSON 格式，注意使用紧凑格式)</span>
            <span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{"</span><span class="n">contractName</span><span class="s">":"</span><span class="no">E</span><span class="o">-</span><span class="no">BTC</span><span class="o">-</span><span class="no">USDT</span><span class="s">","</span><span class="n">orderId</span><span class="s">":"</span><span class="mi">2616833860188981826</span><span class="s">"}"</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"请求主体 (body): "</span> <span class="o">+</span> <span class="n">body</span><span class="o">);</span>

            <span class="c1">// 拼接签名字符串</span>
            <span class="nc">String</span> <span class="n">signStr</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span> <span class="o">+</span> <span class="n">body</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名字符串: "</span> <span class="o">+</span> <span class="n">signStr</span><span class="o">);</span>

            <span class="c1">// 生成 HMAC SHA256 签名</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSHA256</span><span class="o">(</span><span class="n">signStr</span><span class="o">,</span> <span class="no">API_SECRET</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名 (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>

            <span class="c1">// 使用 URI 创建 URL</span>
            <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="no">BASE_URL</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">timestamp</span><span class="o">));</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="no">API_KEY</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// 发送请求主体</span>
            <span class="k">try</span> <span class="o">(</span><span class="nc">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">body</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
                <span class="n">os</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
            <span class="o">}</span>

            <span class="c1">// 读取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span>
                    <span class="n">responseCode</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">responseCode</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="o">?</span> <span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()</span> <span class="o">:</span> <span class="n">conn</span><span class="o">.</span><span class="na">getErrorStream</span><span class="o">()));</span>
            <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
            <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

            <span class="c1">// 输出响应结果</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"响应 ("</span> <span class="o">+</span> <span class="n">responseCode</span> <span class="o">+</span> <span class="s">"): "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**
     * 生成 HMAC SHA256 签名
     *
     * @param data   要签名的字符串
     * @param secret 密钥
     * @return HMAC SHA256 签名
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSHA256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"bytes"</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="c">// API 相关信息</span>
<span class="k">const</span> <span class="p">(</span>
    <span class="n">APIKey</span>     <span class="o">=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">APISecret</span>  <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
    <span class="n">BaseURL</span>    <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
    <span class="n">RequestPath</span> <span class="o">=</span> <span class="s">"/fapi/v1/order"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// 获取毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span> <span class="o">/</span> <span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

    <span class="c">// 请求主体 (JSON 格式)</span>
    <span class="n">body</span> <span class="o">:=</span> <span class="s">`{"contractName":"E-BTC-USDT","orderId":"2616833860188981826"}`</span>

    <span class="c">// 拼接签名字符串</span>
    <span class="n">signStr</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d%s%s%s"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">RequestPath</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">signStr</span><span class="p">)</span>

    <span class="c">// 生成 HMAC SHA256 签名</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">signStr</span><span class="p">,</span> <span class="n">APISecret</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 发送 POST 请求</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="n">BaseURL</span> <span class="o">+</span> <span class="n">RequestPath</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">body</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"创建请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置请求头</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">))</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">APIKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 执行请求</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">responseBody</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"响应:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">responseBody</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 生成 HMAC SHA256 签名</span>
<span class="k">func</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
<span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/order"</span>

<span class="c1"># 请求方法和请求主体
</span><span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span>
<span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s">"contractName"</span><span class="p">:</span><span class="s">"E-BTC-USDT"</span><span class="p">,</span><span class="s">"orderId"</span><span class="p">:</span><span class="s">"2616833860188981826"</span><span class="p">}</span>


<span class="c1"># 获取时间戳 (毫秒级)
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1"># 将请求主体转换为紧凑的 JSON 字符串
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="n">body_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"请求主体 (body):"</span><span class="p">,</span> <span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 拼接签名字符串
</span><span class="n">sign_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}{</span><span class="n">method</span><span class="si">}{</span><span class="n">REQUEST_PATH</span><span class="si">}{</span><span class="n">body_str</span><span class="si">}</span><span class="s">"</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">sign_str</span><span class="p">)</span>

<span class="c1"># 生成 HMAC SHA256 签名
</span><span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sign_str</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

<span class="c1"># 构建请求头
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="s">"User-Agent"</span><span class="p">:</span> <span class="s">"Python-Client"</span>
<span class="p">}</span>

<span class="c1"># 发送 POST 请求
</span><span class="n">url</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 输出响应结果
</span><span class="k">print</span><span class="p">(</span><span class="s">"响应状态码:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"响应内容:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// API 相关信息</span>
<span class="nv">$apiKey</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$apiSecret</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>
<span class="nv">$baseUrl</span> <span class="o">=</span> <span class="s2">"https://futuresopenapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$requestPath</span> <span class="o">=</span> <span class="s2">"/fapi/v1/order"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="s2">"POST"</span><span class="p">;</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">([</span>
    <span class="s2">"contractName"</span> <span class="o">=&gt;</span> <span class="s2">"E-BTC-USDT"</span><span class="p">,</span>
    <span class="s2">"orderId"</span> <span class="o">=&gt;</span> <span class="mi">2616833860188981826</span>
<span class="p">],</span> <span class="no">JSON_UNESCAPED_SLASHES</span><span class="p">);</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 拼接签名字符串</span>
<span class="nv">$signStr</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$method</span> <span class="mf">.</span> <span class="nv">$requestPath</span> <span class="mf">.</span> <span class="nv">$body</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"签名字符串: "</span> <span class="mf">.</span> <span class="nv">$signStr</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$signStr</span><span class="p">,</span> <span class="nv">$apiSecret</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"签名 (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$signature</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 构建请求头</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$apiKey</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"User-Agent: PHP-Client"</span>
<span class="p">];</span>

<span class="c1">// 发送 POST 请求</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nv">$baseUrl</span> <span class="mf">.</span> <span class="nv">$requestPath</span><span class="p">;</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$body</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 仅在开发环境中使用，生产环境应启用 SSL 验证</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$httpCode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"请求失败: "</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"响应状态码: </span><span class="nv">$httpCode</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"响应内容: </span><span class="nv">$response</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span>

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">BASE_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://futuresopenapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/fapi/v1/order</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="kd">const</span> <span class="nx">method</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">contractName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">E-BTC-USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">orderId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2616833860188981826</span><span class="dl">"</span>
<span class="p">});</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>

<span class="c1">// 拼接签名字符串</span>
<span class="kd">const</span> <span class="nx">signStr</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">timestamp</span><span class="p">}${</span><span class="nx">method</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}${</span><span class="nx">body</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名字符串:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signStr</span><span class="p">);</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">signStr</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名 (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>

<span class="c1">// 构建请求头</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span>
    <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">User-Agent</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Node.js-Client</span><span class="dl">"</span>
<span class="p">};</span>

<span class="c1">// 发送 POST 请求</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">sendOrder</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">BASE_URL</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">body</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">});</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应状态码:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应内容:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">请求失败:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 执行请求</span>
<span class="nx">sendOrder</span><span class="p">();</span>

</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">contractName<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>大写</code>合约名称，例如：<code>E-BTC-USDT</code></td>
</tr>
<tr>
<td style="text-align: left">orderId<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">订单ID</td>
</tr>
<tr>
<td style="text-align: left">clientOrderId<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">客户端唯一标识，默认：0</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"executedQty"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">2006628907041292645</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">67000.0000000000000000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"origQty"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.0000000000000000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"avgPrice"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"transactTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1704967622000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OPEN"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contractName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E-BTC-USDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timeInForce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NEW"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fills"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">

    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">orderId</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>2006628907041292645</code></td>
<td style="text-align: left">订单ID（系统生成</td>
</tr>
<tr>
<td style="text-align: left">contractName</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>E-BTC-USDT</code></td>
<td style="text-align: left"><code>大写</code>合约名称</td>
</tr>
<tr>
<td style="text-align: left">price</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>67000.0000000000000000</code></td>
<td style="text-align: left">委托价格</td>
</tr>
<tr>
<td style="text-align: left">origQty</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>2.0000000000000000</code></td>
<td style="text-align: left">委托数量</td>
</tr>
<tr>
<td style="text-align: left">executedQty</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>0</code></td>
<td style="text-align: left">成交数量</td>
</tr>
<tr>
<td style="text-align: left">avgPrice</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>0</code></td>
<td style="text-align: left">成交均价</td>
</tr>
<tr>
<td style="text-align: left">status</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>NEW</code></td>
<td style="text-align: left">订单状态。可能出现的值为：<code>NEW</code>（新订单，无成交）、<code>PARTIALLY_FILLED</code>（部分成交）、<code>FILLED</code>（全部成交）、<code>CANCELED</code>（已取消）和<code>REJECTED</code>（订单被拒绝）</td>
</tr>
<tr>
<td style="text-align: left">side</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>BUY</code></td>
<td style="text-align: left">订单方向。可能出现的值只能为：<code>BUY</code>（买入做多）和<code>SELL</code>（卖出做空）</td>
</tr>
<tr>
<td style="text-align: left">action</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>OPEN</code></td>
<td style="text-align: left"><code>OPEN/CLOSE</code></td>
</tr>
<tr>
<td style="text-align: left">transactTime</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>1704967622000</code></td>
<td style="text-align: left">订单创建时间</td>
</tr>
<tr>
<td style="text-align: left">type</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>LIMIT</code></td>
<td style="text-align: left">订单类型<code>LIMIT</code>/<code>MARKET</code></td>
</tr>
<tr>
<td style="text-align: left">timeInForce</td>
<td style="text-align: left">integer</td>
<td style="text-align: left"><code>1</code></td>
<td style="text-align: left">条件单有效方式，1：<code>limit</code>，2：<code>market</code>，3：<code>IOC</code>，4：<code>FOK</code>，5： <code>POST\_ONLY</code></td>
</tr>
<tr>
<td style="text-align: left">fills</td>
<td style="text-align: left">array</td>
<td style="text-align: left"></td>
<td style="text-align: left">成交记录</td>
</tr>
</tbody></table>
<h3 id='936545ae3e-2'>当前订单</h3>
<p><code>GET https://futuresopenapi.fameex.com/fapi/v1/openOrders</code></p>

<p><strong>限速规则: 20次/2s</strong></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">POST https://futuresopenapi.fameex.com/fapi/v1/openOrders

body
{"contractName":"E-BTC-USDT"}
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># API 相关信息</span>
<span class="nv">api_key</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">api_secret</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 请求信息</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="k">$((</span><span class="si">$(</span><span class="nb">date</span> +%s%N<span class="si">)</span><span class="o">/</span><span class="m">1000000</span><span class="k">))</span>  <span class="c"># 毫秒级时间戳</span>
<span class="nv">method</span><span class="o">=</span><span class="s2">"POST"</span>
<span class="nv">request_path</span><span class="o">=</span><span class="s2">"/fapi/v1/openOrders"</span>

<span class="c"># 请求主体 (JSON 格式)</span>
<span class="nv">body</span><span class="o">=</span><span class="s1">'{"contractName":"E-BTC-USDT"}'</span>

<span class="c"># 删除 body 中的空白字符，保证签名的一致性</span>
<span class="nv">body</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span> | jq <span class="nt">-c</span><span class="si">)</span>

<span class="c"># 拼接签名字符串</span>
<span class="nv">sign_str</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">method</span><span class="k">}${</span><span class="nv">request_path</span><span class="k">}${</span><span class="nv">body</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"签名字符串: </span><span class="nv">$sign_str</span><span class="s2">"</span>

<span class="c"># 生成 HMAC SHA256 签名</span>
<span class="nv">signature</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$sign_str</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$api_secret</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>
<span class="nb">echo</span> <span class="s2">"签名 (X-CH-SIGN): </span><span class="nv">$signature</span><span class="s2">"</span>

<span class="c"># 发送 POST 请求</span>
<span class="nv">response</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="nt">-X</span> POST <span class="s2">"https://futuresopenapi.fameex.com</span><span class="k">${</span><span class="nv">request_path</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span><span class="si">)</span>

<span class="c"># 输出响应结果</span>
<span class="nb">echo</span> <span class="s2">"响应: </span><span class="nv">$response</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.TimeUnit</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SendOrder</span> <span class="o">{</span>

    <span class="c1">// API 相关信息</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/openOrders"</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// 获取时间戳 (毫秒)</span>
            <span class="kt">long</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">.</span><span class="na">convert</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">(),</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span><span class="o">;</span>

            <span class="c1">// 请求主体 (JSON 格式，注意使用紧凑格式)</span>
            <span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{"</span><span class="n">contractName</span><span class="s">":"</span><span class="no">E</span><span class="o">-</span><span class="no">BTC</span><span class="o">-</span><span class="no">USDT</span><span class="s">"}"</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"请求主体 (body): "</span> <span class="o">+</span> <span class="n">body</span><span class="o">);</span>

            <span class="c1">// 拼接签名字符串</span>
            <span class="nc">String</span> <span class="n">signStr</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span> <span class="o">+</span> <span class="n">body</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名字符串: "</span> <span class="o">+</span> <span class="n">signStr</span><span class="o">);</span>

            <span class="c1">// 生成 HMAC SHA256 签名</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSHA256</span><span class="o">(</span><span class="n">signStr</span><span class="o">,</span> <span class="no">API_SECRET</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名 (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>

            <span class="c1">// 使用 URI 创建 URL</span>
            <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="no">BASE_URL</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">timestamp</span><span class="o">));</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="no">API_KEY</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// 发送请求主体</span>
            <span class="k">try</span> <span class="o">(</span><span class="nc">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">body</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
                <span class="n">os</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
            <span class="o">}</span>

            <span class="c1">// 读取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span>
                    <span class="n">responseCode</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">responseCode</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="o">?</span> <span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()</span> <span class="o">:</span> <span class="n">conn</span><span class="o">.</span><span class="na">getErrorStream</span><span class="o">()));</span>
            <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
            <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

            <span class="c1">// 输出响应结果</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"响应 ("</span> <span class="o">+</span> <span class="n">responseCode</span> <span class="o">+</span> <span class="s">"): "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**
     * 生成 HMAC SHA256 签名
     *
     * @param data   要签名的字符串
     * @param secret 密钥
     * @return HMAC SHA256 签名
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSHA256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"bytes"</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="c">// API 相关信息</span>
<span class="k">const</span> <span class="p">(</span>
    <span class="n">APIKey</span>     <span class="o">=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">APISecret</span>  <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
    <span class="n">BaseURL</span>    <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
    <span class="n">RequestPath</span> <span class="o">=</span> <span class="s">"/fapi/v1/openOrders"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// 获取毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span> <span class="o">/</span> <span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

    <span class="c">// 请求主体 (JSON 格式)</span>
    <span class="n">body</span> <span class="o">:=</span> <span class="s">`{"contractName":"E-BTC-USDT"}`</span>

    <span class="c">// 拼接签名字符串</span>
    <span class="n">signStr</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d%s%s%s"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">RequestPath</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">signStr</span><span class="p">)</span>

    <span class="c">// 生成 HMAC SHA256 签名</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">signStr</span><span class="p">,</span> <span class="n">APISecret</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 发送 POST 请求</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="n">BaseURL</span> <span class="o">+</span> <span class="n">RequestPath</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">body</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"创建请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置请求头</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">))</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">APIKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 执行请求</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">responseBody</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"响应:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">responseBody</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 生成 HMAC SHA256 签名</span>
<span class="k">func</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
<span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/openOrders"</span>

<span class="c1"># 请求方法和请求主体
</span><span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span>
<span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s">"contractName"</span><span class="p">:</span><span class="s">"E-BTC-USDT"</span><span class="p">}</span>


<span class="c1"># 获取时间戳 (毫秒级)
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1"># 将请求主体转换为紧凑的 JSON 字符串
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="n">body_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"请求主体 (body):"</span><span class="p">,</span> <span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 拼接签名字符串
</span><span class="n">sign_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}{</span><span class="n">method</span><span class="si">}{</span><span class="n">REQUEST_PATH</span><span class="si">}{</span><span class="n">body_str</span><span class="si">}</span><span class="s">"</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">sign_str</span><span class="p">)</span>

<span class="c1"># 生成 HMAC SHA256 签名
</span><span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sign_str</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

<span class="c1"># 构建请求头
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="s">"User-Agent"</span><span class="p">:</span> <span class="s">"Python-Client"</span>
<span class="p">}</span>

<span class="c1"># 发送 POST 请求
</span><span class="n">url</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 输出响应结果
</span><span class="k">print</span><span class="p">(</span><span class="s">"响应状态码:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"响应内容:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// API 相关信息</span>
<span class="nv">$apiKey</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$apiSecret</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>
<span class="nv">$baseUrl</span> <span class="o">=</span> <span class="s2">"https://futuresopenapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$requestPath</span> <span class="o">=</span> <span class="s2">"/fapi/v1/openOrders"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="s2">"POST"</span><span class="p">;</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">([</span>
    <span class="s2">"contractName"</span> <span class="o">=&gt;</span> <span class="s2">"E-BTC-USDT"</span>
<span class="p">],</span> <span class="no">JSON_UNESCAPED_SLASHES</span><span class="p">);</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 拼接签名字符串</span>
<span class="nv">$signStr</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$method</span> <span class="mf">.</span> <span class="nv">$requestPath</span> <span class="mf">.</span> <span class="nv">$body</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"签名字符串: "</span> <span class="mf">.</span> <span class="nv">$signStr</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$signStr</span><span class="p">,</span> <span class="nv">$apiSecret</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"签名 (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$signature</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 构建请求头</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$apiKey</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"User-Agent: PHP-Client"</span>
<span class="p">];</span>

<span class="c1">// 发送 POST 请求</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nv">$baseUrl</span> <span class="mf">.</span> <span class="nv">$requestPath</span><span class="p">;</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$body</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 仅在开发环境中使用，生产环境应启用 SSL 验证</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$httpCode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"请求失败: "</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"响应状态码: </span><span class="nv">$httpCode</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"响应内容: </span><span class="nv">$response</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span>

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">BASE_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://futuresopenapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/fapi/v1/openOrders</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="kd">const</span> <span class="nx">method</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">contractName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">E-BTC-USDT</span><span class="dl">"</span>
<span class="p">});</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>

<span class="c1">// 拼接签名字符串</span>
<span class="kd">const</span> <span class="nx">signStr</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">timestamp</span><span class="p">}${</span><span class="nx">method</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}${</span><span class="nx">body</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名字符串:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signStr</span><span class="p">);</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">signStr</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名 (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>

<span class="c1">// 构建请求头</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span>
    <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">User-Agent</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Node.js-Client</span><span class="dl">"</span>
<span class="p">};</span>

<span class="c1">// 发送 POST 请求</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">sendOrder</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">BASE_URL</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">body</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">});</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应状态码:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应内容:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">请求失败:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 执行请求</span>
<span class="nx">sendOrder</span><span class="p">();</span>

</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">contractName<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>大写</code>合约名称，例如：<code>E-BTC-USDT</code></td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"executedQty"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">259396989397942275</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">72000.0000000000000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"origQty"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0000000000000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"avgPrice"</span><span class="p">:</span><span class="w"> </span><span class="mf">71990.0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"transactTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1607702400000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OPEN"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"contractName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E-BTC-USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NEW"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>返回参数</p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">orderId</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>259396989397942275</code></td>
<td style="text-align: left">订单ID（系统生成）</td>
</tr>
<tr>
<td style="text-align: left">contractName</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>E-BTC-USDT</code></td>
<td style="text-align: left"><code>大写</code>合约名称</td>
</tr>
<tr>
<td style="text-align: left">price</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>72000.0000000000000000</code></td>
<td style="text-align: left">订单价格</td>
</tr>
<tr>
<td style="text-align: left">origQty</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>1.0000000000000000</code></td>
<td style="text-align: left">订单数量</td>
</tr>
<tr>
<td style="text-align: left">executedQty</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>0.5</code></td>
<td style="text-align: left">已经成交订单数量</td>
</tr>
<tr>
<td style="text-align: left">avgPrice</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>71990.0</code></td>
<td style="text-align: left">订单已经成交的平均价格</td>
</tr>
<tr>
<td style="text-align: left">type</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>LIMIT</code></td>
<td style="text-align: left">订单类型。可能出现的值只能为：<code>LIMIT</code>（限价）和<code>MARKET</code>（市价）</td>
</tr>
<tr>
<td style="text-align: left">side</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>BUY</code></td>
<td style="text-align: left">订单方向。可能出现的值只能为：<code>BUY</code>（买入做多）和 <code>SELL</code>（卖出做空）</td>
</tr>
<tr>
<td style="text-align: left">status</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>NEW</code></td>
<td style="text-align: left">订单状态。可能出现的值为：<code>NEW</code>（新订单，无成交）、<code>PARTIALLY_FILLED</code>（部分成交）、<code>FILLED</code>（全部成交）、<code>CANCELED</code>（已取消）和<code>REJECTED</code>（订单被拒绝）</td>
</tr>
<tr>
<td style="text-align: left">action</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>OPEN</code></td>
<td style="text-align: left"><code>OPEN/CLOSE</code></td>
</tr>
<tr>
<td style="text-align: left">transactTime</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>1607702400000</code></td>
<td style="text-align: left">订单创建时间戳</td>
</tr>
</tbody></table>
<h3 id='6d4fb4cfcd'>历史委托</h3>
<p><code>POST https://futuresopenapi.fameex.com/fapi/v1/orderHistorical</code></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">POST https://futuresopenapi.fameex.com/fapi/v1/orderHistorical

body
{"contractName":"E-BTC-USDT"}
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># API 相关信息</span>
<span class="nv">api_key</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">api_secret</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 请求信息</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="k">$((</span><span class="si">$(</span><span class="nb">date</span> +%s%N<span class="si">)</span><span class="o">/</span><span class="m">1000000</span><span class="k">))</span>  <span class="c"># 毫秒级时间戳</span>
<span class="nv">method</span><span class="o">=</span><span class="s2">"POST"</span>
<span class="nv">request_path</span><span class="o">=</span><span class="s2">"/fapi/v1/orderHistorical"</span>

<span class="c"># 请求主体 (JSON 格式)</span>
<span class="nv">body</span><span class="o">=</span><span class="s1">'{"contractName":"E-BTC-USDT"}'</span>

<span class="c"># 删除 body 中的空白字符，保证签名的一致性</span>
<span class="nv">body</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span> | jq <span class="nt">-c</span><span class="si">)</span>

<span class="c"># 拼接签名字符串</span>
<span class="nv">sign_str</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">method</span><span class="k">}${</span><span class="nv">request_path</span><span class="k">}${</span><span class="nv">body</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"签名字符串: </span><span class="nv">$sign_str</span><span class="s2">"</span>

<span class="c"># 生成 HMAC SHA256 签名</span>
<span class="nv">signature</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$sign_str</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$api_secret</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>
<span class="nb">echo</span> <span class="s2">"签名 (X-CH-SIGN): </span><span class="nv">$signature</span><span class="s2">"</span>

<span class="c"># 发送 POST 请求</span>
<span class="nv">response</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="nt">-X</span> POST <span class="s2">"https://futuresopenapi.fameex.com</span><span class="k">${</span><span class="nv">request_path</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span><span class="si">)</span>

<span class="c"># 输出响应结果</span>
<span class="nb">echo</span> <span class="s2">"响应: </span><span class="nv">$response</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.TimeUnit</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SendOrder</span> <span class="o">{</span>

    <span class="c1">// API 相关信息</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/orderHistorical"</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// 获取时间戳 (毫秒)</span>
            <span class="kt">long</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">.</span><span class="na">convert</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">(),</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span><span class="o">;</span>

            <span class="c1">// 请求主体 (JSON 格式，注意使用紧凑格式)</span>
            <span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{"</span><span class="n">contractName</span><span class="s">":"</span><span class="no">E</span><span class="o">-</span><span class="no">BTC</span><span class="o">-</span><span class="no">USDT</span><span class="s">"}"</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"请求主体 (body): "</span> <span class="o">+</span> <span class="n">body</span><span class="o">);</span>

            <span class="c1">// 拼接签名字符串</span>
            <span class="nc">String</span> <span class="n">signStr</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span> <span class="o">+</span> <span class="n">body</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名字符串: "</span> <span class="o">+</span> <span class="n">signStr</span><span class="o">);</span>

            <span class="c1">// 生成 HMAC SHA256 签名</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSHA256</span><span class="o">(</span><span class="n">signStr</span><span class="o">,</span> <span class="no">API_SECRET</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名 (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>

            <span class="c1">// 使用 URI 创建 URL</span>
            <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="no">BASE_URL</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">timestamp</span><span class="o">));</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="no">API_KEY</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// 发送请求主体</span>
            <span class="k">try</span> <span class="o">(</span><span class="nc">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">body</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
                <span class="n">os</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
            <span class="o">}</span>

            <span class="c1">// 读取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span>
                    <span class="n">responseCode</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">responseCode</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="o">?</span> <span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()</span> <span class="o">:</span> <span class="n">conn</span><span class="o">.</span><span class="na">getErrorStream</span><span class="o">()));</span>
            <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
            <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

            <span class="c1">// 输出响应结果</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"响应 ("</span> <span class="o">+</span> <span class="n">responseCode</span> <span class="o">+</span> <span class="s">"): "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**
     * 生成 HMAC SHA256 签名
     *
     * @param data   要签名的字符串
     * @param secret 密钥
     * @return HMAC SHA256 签名
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSHA256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"bytes"</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="c">// API 相关信息</span>
<span class="k">const</span> <span class="p">(</span>
    <span class="n">APIKey</span>     <span class="o">=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">APISecret</span>  <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
    <span class="n">BaseURL</span>    <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
    <span class="n">RequestPath</span> <span class="o">=</span> <span class="s">"/fapi/v1/orderHistorical"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// 获取毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span> <span class="o">/</span> <span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

    <span class="c">// 请求主体 (JSON 格式)</span>
    <span class="n">body</span> <span class="o">:=</span> <span class="s">`{"contractName":"E-BTC-USDT"}`</span>

    <span class="c">// 拼接签名字符串</span>
    <span class="n">signStr</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d%s%s%s"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">RequestPath</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">signStr</span><span class="p">)</span>

    <span class="c">// 生成 HMAC SHA256 签名</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">signStr</span><span class="p">,</span> <span class="n">APISecret</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 发送 POST 请求</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="n">BaseURL</span> <span class="o">+</span> <span class="n">RequestPath</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">body</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"创建请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置请求头</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">))</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">APIKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 执行请求</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">responseBody</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"响应:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">responseBody</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 生成 HMAC SHA256 签名</span>
<span class="k">func</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
<span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/orderHistorical"</span>

<span class="c1"># 请求方法和请求主体
</span><span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span>
<span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s">"contractName"</span><span class="p">:</span><span class="s">"E-BTC-USDT"</span><span class="p">}</span>


<span class="c1"># 获取时间戳 (毫秒级)
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1"># 将请求主体转换为紧凑的 JSON 字符串
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="n">body_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"请求主体 (body):"</span><span class="p">,</span> <span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 拼接签名字符串
</span><span class="n">sign_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}{</span><span class="n">method</span><span class="si">}{</span><span class="n">REQUEST_PATH</span><span class="si">}{</span><span class="n">body_str</span><span class="si">}</span><span class="s">"</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">sign_str</span><span class="p">)</span>

<span class="c1"># 生成 HMAC SHA256 签名
</span><span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sign_str</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

<span class="c1"># 构建请求头
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="s">"User-Agent"</span><span class="p">:</span> <span class="s">"Python-Client"</span>
<span class="p">}</span>

<span class="c1"># 发送 POST 请求
</span><span class="n">url</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 输出响应结果
</span><span class="k">print</span><span class="p">(</span><span class="s">"响应状态码:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"响应内容:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// API 相关信息</span>
<span class="nv">$apiKey</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$apiSecret</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>
<span class="nv">$baseUrl</span> <span class="o">=</span> <span class="s2">"https://futuresopenapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$requestPath</span> <span class="o">=</span> <span class="s2">"/fapi/v1/orderHistorical"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="s2">"POST"</span><span class="p">;</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">([</span>
    <span class="s2">"contractName"</span> <span class="o">=&gt;</span> <span class="s2">"E-BTC-USDT"</span>
<span class="p">],</span> <span class="no">JSON_UNESCAPED_SLASHES</span><span class="p">);</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 拼接签名字符串</span>
<span class="nv">$signStr</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$method</span> <span class="mf">.</span> <span class="nv">$requestPath</span> <span class="mf">.</span> <span class="nv">$body</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"签名字符串: "</span> <span class="mf">.</span> <span class="nv">$signStr</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$signStr</span><span class="p">,</span> <span class="nv">$apiSecret</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"签名 (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$signature</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 构建请求头</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$apiKey</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"User-Agent: PHP-Client"</span>
<span class="p">];</span>

<span class="c1">// 发送 POST 请求</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nv">$baseUrl</span> <span class="mf">.</span> <span class="nv">$requestPath</span><span class="p">;</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$body</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 仅在开发环境中使用，生产环境应启用 SSL 验证</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$httpCode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"请求失败: "</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"响应状态码: </span><span class="nv">$httpCode</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"响应内容: </span><span class="nv">$response</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span>

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">BASE_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://futuresopenapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/fapi/v1/orderHistorical</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="kd">const</span> <span class="nx">method</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">contractName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">E-BTC-USDT</span><span class="dl">"</span>
<span class="p">});</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>

<span class="c1">// 拼接签名字符串</span>
<span class="kd">const</span> <span class="nx">signStr</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">timestamp</span><span class="p">}${</span><span class="nx">method</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}${</span><span class="nx">body</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名字符串:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signStr</span><span class="p">);</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">signStr</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名 (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>

<span class="c1">// 构建请求头</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span>
    <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">User-Agent</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Node.js-Client</span><span class="dl">"</span>
<span class="p">};</span>

<span class="c1">// 发送 POST 请求</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">sendOrder</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">BASE_URL</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">body</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">});</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应状态码:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应内容:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">请求失败:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 执行请求</span>
<span class="nx">sendOrder</span><span class="p">();</span>

</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">contractName<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>大写</code>合约名称，例如：<code>E-BTC-USDT</code></td>
</tr>
<tr>
<td style="text-align: left">limit</td>
<td style="text-align: left">string</td>
<td style="text-align: left">分页条数，默认：100；最大：1000</td>
</tr>
<tr>
<td style="text-align: left">fromId</td>
<td style="text-align: left">long</td>
<td style="text-align: left">从这条记录开始检索</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ctimeMs"</span><span class="p">:</span><span class="w"> </span><span class="mi">1632903411000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"positionType"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">777293886968070157</span><span class="p">,</span><span class="w">
        </span><span class="nl">"avgPrice"</span><span class="p">:</span><span class="w"> </span><span class="mi">41000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"openOrClose"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OPEN"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"leverageLevel"</span><span class="p">:</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
        </span><span class="nl">"closeTakerFeeRate"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00065</span><span class="p">,</span><span class="w">
        </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"openMakerFeeRate"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00025</span><span class="p">,</span><span class="w">
        </span><span class="nl">"dealVolume"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">41000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"closeMakerFeeRate"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00025</span><span class="p">,</span><span class="w">
        </span><span class="nl">"contractId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ctime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-09-29T16:16:51"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"contractName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E-BTC-USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"openTakerFeeRate"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00065</span><span class="p">,</span><span class="w">
        </span><span class="nl">"dealMoney"</span><span class="p">:</span><span class="w"> </span><span class="mf">4.1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>如果该接口返回与期望不符，请联系技术团队，我们会为您提供相关帮助</p>
<h3 id='cc30a051b8'>盈亏记录</h3>
<p><code>POST https://futuresopenapi.fameex.com/fapi/v1/profitHistorical</code></p>

<p>如果该接口返回报错，请联系技术团队，我们会为您提供相关帮助</p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">POST https://futuresopenapi.fameex.com/fapi/v1/profitHistorical

body
{"contractName":"E-BTC-USDT"}
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># API 相关信息</span>
<span class="nv">api_key</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">api_secret</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 请求信息</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="k">$((</span><span class="si">$(</span><span class="nb">date</span> +%s%N<span class="si">)</span><span class="o">/</span><span class="m">1000000</span><span class="k">))</span>  <span class="c"># 毫秒级时间戳</span>
<span class="nv">method</span><span class="o">=</span><span class="s2">"POST"</span>
<span class="nv">request_path</span><span class="o">=</span><span class="s2">"/fapi/v1/profitHistorical"</span>

<span class="c"># 请求主体 (JSON 格式)</span>
<span class="nv">body</span><span class="o">=</span><span class="s1">'{"contractName":"E-BTC-USDT"}'</span>

<span class="c"># 删除 body 中的空白字符，保证签名的一致性</span>
<span class="nv">body</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span> | jq <span class="nt">-c</span><span class="si">)</span>

<span class="c"># 拼接签名字符串</span>
<span class="nv">sign_str</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">method</span><span class="k">}${</span><span class="nv">request_path</span><span class="k">}${</span><span class="nv">body</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"签名字符串: </span><span class="nv">$sign_str</span><span class="s2">"</span>

<span class="c"># 生成 HMAC SHA256 签名</span>
<span class="nv">signature</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$sign_str</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$api_secret</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>
<span class="nb">echo</span> <span class="s2">"签名 (X-CH-SIGN): </span><span class="nv">$signature</span><span class="s2">"</span>

<span class="c"># 发送 POST 请求</span>
<span class="nv">response</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="nt">-X</span> POST <span class="s2">"https://futuresopenapi.fameex.com</span><span class="k">${</span><span class="nv">request_path</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span><span class="si">)</span>

<span class="c"># 输出响应结果</span>
<span class="nb">echo</span> <span class="s2">"响应: </span><span class="nv">$response</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.TimeUnit</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SendOrder</span> <span class="o">{</span>

    <span class="c1">// API 相关信息</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/profitHistorical"</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// 获取时间戳 (毫秒)</span>
            <span class="kt">long</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">.</span><span class="na">convert</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">(),</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span><span class="o">;</span>

            <span class="c1">// 请求主体 (JSON 格式，注意使用紧凑格式)</span>
            <span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{"</span><span class="n">contractName</span><span class="s">":"</span><span class="no">E</span><span class="o">-</span><span class="no">BTC</span><span class="o">-</span><span class="no">USDT</span><span class="s">"}"</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"请求主体 (body): "</span> <span class="o">+</span> <span class="n">body</span><span class="o">);</span>

            <span class="c1">// 拼接签名字符串</span>
            <span class="nc">String</span> <span class="n">signStr</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span> <span class="o">+</span> <span class="n">body</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名字符串: "</span> <span class="o">+</span> <span class="n">signStr</span><span class="o">);</span>

            <span class="c1">// 生成 HMAC SHA256 签名</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSHA256</span><span class="o">(</span><span class="n">signStr</span><span class="o">,</span> <span class="no">API_SECRET</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名 (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>

            <span class="c1">// 使用 URI 创建 URL</span>
            <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="no">BASE_URL</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">timestamp</span><span class="o">));</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="no">API_KEY</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// 发送请求主体</span>
            <span class="k">try</span> <span class="o">(</span><span class="nc">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">body</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
                <span class="n">os</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
            <span class="o">}</span>

            <span class="c1">// 读取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span>
                    <span class="n">responseCode</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">responseCode</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="o">?</span> <span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()</span> <span class="o">:</span> <span class="n">conn</span><span class="o">.</span><span class="na">getErrorStream</span><span class="o">()));</span>
            <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
            <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

            <span class="c1">// 输出响应结果</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"响应 ("</span> <span class="o">+</span> <span class="n">responseCode</span> <span class="o">+</span> <span class="s">"): "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**
     * 生成 HMAC SHA256 签名
     *
     * @param data   要签名的字符串
     * @param secret 密钥
     * @return HMAC SHA256 签名
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSHA256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"bytes"</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="c">// API 相关信息</span>
<span class="k">const</span> <span class="p">(</span>
    <span class="n">APIKey</span>     <span class="o">=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">APISecret</span>  <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
    <span class="n">BaseURL</span>    <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
    <span class="n">RequestPath</span> <span class="o">=</span> <span class="s">"/fapi/v1/profitHistorical"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// 获取毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span> <span class="o">/</span> <span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

    <span class="c">// 请求主体 (JSON 格式)</span>
    <span class="n">body</span> <span class="o">:=</span> <span class="s">`{"contractName":"E-BTC-USDT"}`</span>

    <span class="c">// 拼接签名字符串</span>
    <span class="n">signStr</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d%s%s%s"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">RequestPath</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">signStr</span><span class="p">)</span>

    <span class="c">// 生成 HMAC SHA256 签名</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">signStr</span><span class="p">,</span> <span class="n">APISecret</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 发送 POST 请求</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="n">BaseURL</span> <span class="o">+</span> <span class="n">RequestPath</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">body</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"创建请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置请求头</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">))</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">APIKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 执行请求</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">responseBody</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"响应:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">responseBody</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 生成 HMAC SHA256 签名</span>
<span class="k">func</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
<span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/profitHistorical"</span>

<span class="c1"># 请求方法和请求主体
</span><span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span>
<span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s">"contractName"</span><span class="p">:</span><span class="s">"E-BTC-USDT"</span><span class="p">}</span>


<span class="c1"># 获取时间戳 (毫秒级)
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1"># 将请求主体转换为紧凑的 JSON 字符串
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="n">body_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"请求主体 (body):"</span><span class="p">,</span> <span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 拼接签名字符串
</span><span class="n">sign_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}{</span><span class="n">method</span><span class="si">}{</span><span class="n">REQUEST_PATH</span><span class="si">}{</span><span class="n">body_str</span><span class="si">}</span><span class="s">"</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">sign_str</span><span class="p">)</span>

<span class="c1"># 生成 HMAC SHA256 签名
</span><span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sign_str</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

<span class="c1"># 构建请求头
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="s">"User-Agent"</span><span class="p">:</span> <span class="s">"Python-Client"</span>
<span class="p">}</span>

<span class="c1"># 发送 POST 请求
</span><span class="n">url</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 输出响应结果
</span><span class="k">print</span><span class="p">(</span><span class="s">"响应状态码:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"响应内容:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// API 相关信息</span>
<span class="nv">$apiKey</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$apiSecret</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>
<span class="nv">$baseUrl</span> <span class="o">=</span> <span class="s2">"https://futuresopenapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$requestPath</span> <span class="o">=</span> <span class="s2">"/fapi/v1/profitHistorical"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="s2">"POST"</span><span class="p">;</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">([</span>
    <span class="s2">"contractName"</span> <span class="o">=&gt;</span> <span class="s2">"E-BTC-USDT"</span>
<span class="p">],</span> <span class="no">JSON_UNESCAPED_SLASHES</span><span class="p">);</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 拼接签名字符串</span>
<span class="nv">$signStr</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$method</span> <span class="mf">.</span> <span class="nv">$requestPath</span> <span class="mf">.</span> <span class="nv">$body</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"签名字符串: "</span> <span class="mf">.</span> <span class="nv">$signStr</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$signStr</span><span class="p">,</span> <span class="nv">$apiSecret</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"签名 (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$signature</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 构建请求头</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$apiKey</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"User-Agent: PHP-Client"</span>
<span class="p">];</span>

<span class="c1">// 发送 POST 请求</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nv">$baseUrl</span> <span class="mf">.</span> <span class="nv">$requestPath</span><span class="p">;</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$body</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 仅在开发环境中使用，生产环境应启用 SSL 验证</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$httpCode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"请求失败: "</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"响应状态码: </span><span class="nv">$httpCode</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"响应内容: </span><span class="nv">$response</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span>

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">BASE_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://futuresopenapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/fapi/v1/profitHistorical</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="kd">const</span> <span class="nx">method</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">contractName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">E-BTC-USDT</span><span class="dl">"</span>
<span class="p">});</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>

<span class="c1">// 拼接签名字符串</span>
<span class="kd">const</span> <span class="nx">signStr</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">timestamp</span><span class="p">}${</span><span class="nx">method</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}${</span><span class="nx">body</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名字符串:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signStr</span><span class="p">);</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">signStr</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名 (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>

<span class="c1">// 构建请求头</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span>
    <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">User-Agent</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Node.js-Client</span><span class="dl">"</span>
<span class="p">};</span>

<span class="c1">// 发送 POST 请求</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">sendOrder</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">BASE_URL</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">body</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">});</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应状态码:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应内容:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">请求失败:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 执行请求</span>
<span class="nx">sendOrder</span><span class="p">();</span>

</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">contractName<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>大写</code>合约名称，例如：<code>E-BTC-USDT</code></td>
</tr>
<tr>
<td style="text-align: left">limit</td>
<td style="text-align: left">string</td>
<td style="text-align: left">分页条数，默认：100；最大：1000</td>
</tr>
<tr>
<td style="text-align: left">fromId</td>
<td style="text-align: left">long</td>
<td style="text-align: left">从这条记录开始检索</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"positionType"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tradeFee"</span><span class="p">:</span><span class="w"> </span><span class="mf">-5.23575</span><span class="p">,</span><span class="w">
        </span><span class="nl">"realizedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"leverageLevel"</span><span class="p">:</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w">
        </span><span class="nl">"openPrice"</span><span class="p">:</span><span class="w"> </span><span class="mi">44500</span><span class="p">,</span><span class="w">
        </span><span class="nl">"settleProfit"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mtime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1632882739000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"shareAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"openEndPrice"</span><span class="p">:</span><span class="w"> </span><span class="mi">44500</span><span class="p">,</span><span class="w">
        </span><span class="nl">"closeProfit"</span><span class="p">:</span><span class="w"> </span><span class="mi">-45</span><span class="p">,</span><span class="w">
        </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="mi">900</span><span class="p">,</span><span class="w">
        </span><span class="nl">"contractId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"historyRealizedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mf">-50.23575</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ctime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1632882691000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8764</span><span class="p">,</span><span class="w">
        </span><span class="nl">"capitalFee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>如果该接口返回与期望不符，请联系技术团队，我们会为您提供相关帮助</p>
<h3 id='7d44b7792d-2'>交易记录</h3>
<p><code>GET https://futuresopenapi.fameex.com/fapi/v1/myTrades</code></p>

<p><strong>限速规则: 20次/2s</strong></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">POST https://futuresopenapi.fameex.com/fapi/v1/myTrades

body
{"contractName":"E-BTC-USDT"}
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># API 相关信息</span>
<span class="nv">api_key</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">api_secret</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 请求信息</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="k">$((</span><span class="si">$(</span><span class="nb">date</span> +%s%N<span class="si">)</span><span class="o">/</span><span class="m">1000000</span><span class="k">))</span>  <span class="c"># 毫秒级时间戳</span>
<span class="nv">method</span><span class="o">=</span><span class="s2">"POST"</span>
<span class="nv">request_path</span><span class="o">=</span><span class="s2">"/fapi/v1/myTrades"</span>

<span class="c"># 请求主体 (JSON 格式)</span>
<span class="nv">body</span><span class="o">=</span><span class="s1">'{"contractName":"E-BTC-USDT"}'</span>

<span class="c"># 删除 body 中的空白字符，保证签名的一致性</span>
<span class="nv">body</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span> | jq <span class="nt">-c</span><span class="si">)</span>

<span class="c"># 拼接签名字符串</span>
<span class="nv">sign_str</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">method</span><span class="k">}${</span><span class="nv">request_path</span><span class="k">}${</span><span class="nv">body</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"签名字符串: </span><span class="nv">$sign_str</span><span class="s2">"</span>

<span class="c"># 生成 HMAC SHA256 签名</span>
<span class="nv">signature</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$sign_str</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$api_secret</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>
<span class="nb">echo</span> <span class="s2">"签名 (X-CH-SIGN): </span><span class="nv">$signature</span><span class="s2">"</span>

<span class="c"># 发送 POST 请求</span>
<span class="nv">response</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="nt">-X</span> POST <span class="s2">"https://futuresopenapi.fameex.com</span><span class="k">${</span><span class="nv">request_path</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span><span class="si">)</span>

<span class="c"># 输出响应结果</span>
<span class="nb">echo</span> <span class="s2">"响应: </span><span class="nv">$response</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.TimeUnit</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SendOrder</span> <span class="o">{</span>

    <span class="c1">// API 相关信息</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/myTrades"</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// 获取时间戳 (毫秒)</span>
            <span class="kt">long</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">.</span><span class="na">convert</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">(),</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span><span class="o">;</span>

            <span class="c1">// 请求主体 (JSON 格式，注意使用紧凑格式)</span>
            <span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{"</span><span class="n">contractName</span><span class="s">":"</span><span class="no">E</span><span class="o">-</span><span class="no">BTC</span><span class="o">-</span><span class="no">USDT</span><span class="s">"}"</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"请求主体 (body): "</span> <span class="o">+</span> <span class="n">body</span><span class="o">);</span>

            <span class="c1">// 拼接签名字符串</span>
            <span class="nc">String</span> <span class="n">signStr</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span> <span class="o">+</span> <span class="n">body</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名字符串: "</span> <span class="o">+</span> <span class="n">signStr</span><span class="o">);</span>

            <span class="c1">// 生成 HMAC SHA256 签名</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSHA256</span><span class="o">(</span><span class="n">signStr</span><span class="o">,</span> <span class="no">API_SECRET</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名 (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>

            <span class="c1">// 使用 URI 创建 URL</span>
            <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="no">BASE_URL</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">timestamp</span><span class="o">));</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="no">API_KEY</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// 发送请求主体</span>
            <span class="k">try</span> <span class="o">(</span><span class="nc">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">body</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
                <span class="n">os</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
            <span class="o">}</span>

            <span class="c1">// 读取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span>
                    <span class="n">responseCode</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">responseCode</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="o">?</span> <span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()</span> <span class="o">:</span> <span class="n">conn</span><span class="o">.</span><span class="na">getErrorStream</span><span class="o">()));</span>
            <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
            <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

            <span class="c1">// 输出响应结果</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"响应 ("</span> <span class="o">+</span> <span class="n">responseCode</span> <span class="o">+</span> <span class="s">"): "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**
     * 生成 HMAC SHA256 签名
     *
     * @param data   要签名的字符串
     * @param secret 密钥
     * @return HMAC SHA256 签名
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSHA256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"bytes"</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="c">// API 相关信息</span>
<span class="k">const</span> <span class="p">(</span>
    <span class="n">APIKey</span>     <span class="o">=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">APISecret</span>  <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
    <span class="n">BaseURL</span>    <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
    <span class="n">RequestPath</span> <span class="o">=</span> <span class="s">"/fapi/v1/myTrades"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// 获取毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span> <span class="o">/</span> <span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

    <span class="c">// 请求主体 (JSON 格式)</span>
    <span class="n">body</span> <span class="o">:=</span> <span class="s">`{"contractName":"E-BTC-USDT"}`</span>

    <span class="c">// 拼接签名字符串</span>
    <span class="n">signStr</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d%s%s%s"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">RequestPath</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">signStr</span><span class="p">)</span>

    <span class="c">// 生成 HMAC SHA256 签名</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">signStr</span><span class="p">,</span> <span class="n">APISecret</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 发送 POST 请求</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="n">BaseURL</span> <span class="o">+</span> <span class="n">RequestPath</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">body</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"创建请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置请求头</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">))</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">APIKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 执行请求</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">responseBody</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"响应:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">responseBody</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 生成 HMAC SHA256 签名</span>
<span class="k">func</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
<span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/myTrades"</span>

<span class="c1"># 请求方法和请求主体
</span><span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span>
<span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s">"contractName"</span><span class="p">:</span><span class="s">"E-BTC-USDT"</span><span class="p">}</span>


<span class="c1"># 获取时间戳 (毫秒级)
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1"># 将请求主体转换为紧凑的 JSON 字符串
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="n">body_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"请求主体 (body):"</span><span class="p">,</span> <span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 拼接签名字符串
</span><span class="n">sign_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}{</span><span class="n">method</span><span class="si">}{</span><span class="n">REQUEST_PATH</span><span class="si">}{</span><span class="n">body_str</span><span class="si">}</span><span class="s">"</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">sign_str</span><span class="p">)</span>

<span class="c1"># 生成 HMAC SHA256 签名
</span><span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sign_str</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

<span class="c1"># 构建请求头
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="s">"User-Agent"</span><span class="p">:</span> <span class="s">"Python-Client"</span>
<span class="p">}</span>

<span class="c1"># 发送 POST 请求
</span><span class="n">url</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 输出响应结果
</span><span class="k">print</span><span class="p">(</span><span class="s">"响应状态码:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"响应内容:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// API 相关信息</span>
<span class="nv">$apiKey</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$apiSecret</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>
<span class="nv">$baseUrl</span> <span class="o">=</span> <span class="s2">"https://futuresopenapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$requestPath</span> <span class="o">=</span> <span class="s2">"/fapi/v1/myTrades"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="s2">"POST"</span><span class="p">;</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">([</span>
    <span class="s2">"contractName"</span> <span class="o">=&gt;</span> <span class="s2">"E-BTC-USDT"</span>
<span class="p">],</span> <span class="no">JSON_UNESCAPED_SLASHES</span><span class="p">);</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 拼接签名字符串</span>
<span class="nv">$signStr</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$method</span> <span class="mf">.</span> <span class="nv">$requestPath</span> <span class="mf">.</span> <span class="nv">$body</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"签名字符串: "</span> <span class="mf">.</span> <span class="nv">$signStr</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$signStr</span><span class="p">,</span> <span class="nv">$apiSecret</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"签名 (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$signature</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 构建请求头</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$apiKey</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"User-Agent: PHP-Client"</span>
<span class="p">];</span>

<span class="c1">// 发送 POST 请求</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nv">$baseUrl</span> <span class="mf">.</span> <span class="nv">$requestPath</span><span class="p">;</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$body</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 仅在开发环境中使用，生产环境应启用 SSL 验证</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$httpCode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"请求失败: "</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"响应状态码: </span><span class="nv">$httpCode</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"响应内容: </span><span class="nv">$response</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span>

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">BASE_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://futuresopenapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/fapi/v1/myTrades</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="kd">const</span> <span class="nx">method</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">contractName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">E-BTC-USDT</span><span class="dl">"</span>
<span class="p">});</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>

<span class="c1">// 拼接签名字符串</span>
<span class="kd">const</span> <span class="nx">signStr</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">timestamp</span><span class="p">}${</span><span class="nx">method</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}${</span><span class="nx">body</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名字符串:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signStr</span><span class="p">);</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">signStr</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名 (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>

<span class="c1">// 构建请求头</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span>
    <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">User-Agent</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Node.js-Client</span><span class="dl">"</span>
<span class="p">};</span>

<span class="c1">// 发送 POST 请求</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">sendOrder</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">BASE_URL</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">body</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">});</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应状态码:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应内容:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">请求失败:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 执行请求</span>
<span class="nx">sendOrder</span><span class="p">();</span>

</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">contractName<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>大写</code>合约名称，例如：<code>E-BTC-USDT</code></td>
</tr>
<tr>
<td style="text-align: left">limit</td>
<td style="text-align: left">string</td>
<td style="text-align: left">分页条数，默认：100；最大：1000</td>
</tr>
<tr>
<td style="text-align: left">fromId</td>
<td style="text-align: left">long</td>
<td style="text-align: left">从这个tradeId开始检索</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.30000000000000000000000000000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.001</span><span class="p">,</span><span class="w">
        </span><span class="nl">"isMaker"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"isBuyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bidId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1874564572563538130</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bidUserId"</span><span class="p">:</span><span class="w"> </span><span class="mi">10034</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0000000000000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"qty"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="nl">"askId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1954072405852309104</span><span class="p">,</span><span class="w">
        </span><span class="nl">"contractName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E-ETH-USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1701419186000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tradeId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1528</span><span class="p">,</span><span class="w">
        </span><span class="nl">"askUserId"</span><span class="p">:</span><span class="w"> </span><span class="mi">10378</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.00000000000000000000000000000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00025</span><span class="p">,</span><span class="w">
        </span><span class="nl">"isMaker"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"isBuyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bidId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1874564572563538059</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bidUserId"</span><span class="p">:</span><span class="w"> </span><span class="mi">10034</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0000000000000000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"qty"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="nl">"askId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1954072405852309104</span><span class="p">,</span><span class="w">
        </span><span class="nl">"contractName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E-ETH-USDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1701419186000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tradeId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1527</span><span class="p">,</span><span class="w">
        </span><span class="nl">"askUserId"</span><span class="p">:</span><span class="w"> </span><span class="mi">10378</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">示例</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">tradeId</td>
<td style="text-align: left">number</td>
<td style="text-align: left"><code>1528</code></td>
<td style="text-align: left">交易ID</td>
</tr>
<tr>
<td style="text-align: left">bidId</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>1874564572563538130</code></td>
<td style="text-align: left">买方订单ID</td>
</tr>
<tr>
<td style="text-align: left">askId</td>
<td style="text-align: left">long</td>
<td style="text-align: left"><code>1954072405852309104</code></td>
<td style="text-align: left">卖方订单ID</td>
</tr>
<tr>
<td style="text-align: left">bidUserId</td>
<td style="text-align: left">integer</td>
<td style="text-align: left"><code>10034</code></td>
<td style="text-align: left">买方用户ID</td>
</tr>
<tr>
<td style="text-align: left">askUserId</td>
<td style="text-align: left">integer</td>
<td style="text-align: left"><code>10378</code></td>
<td style="text-align: left">卖方用户ID</td>
</tr>
<tr>
<td style="text-align: left">price</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>10.0</code></td>
<td style="text-align: left">成交价格</td>
</tr>
<tr>
<td style="text-align: left">qty</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>3</code></td>
<td style="text-align: left">交易数量</td>
</tr>
<tr>
<td style="text-align: left">amount</td>
<td style="text-align: left">float</td>
<td style="text-align: left"><code>30.0</code></td>
<td style="text-align: left">成交金额</td>
</tr>
<tr>
<td style="text-align: left">time</td>
<td style="text-align: left">number</td>
<td style="text-align: left"><code>1499865549590</code></td>
<td style="text-align: left">交易时间戳</td>
</tr>
<tr>
<td style="text-align: left">fee</td>
<td style="text-align: left">number</td>
<td style="text-align: left"><code>0.001</code></td>
<td style="text-align: left">交易手续费</td>
</tr>
<tr>
<td style="text-align: left">side</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>BUY</code></td>
<td style="text-align: left">当前订单方向，<code>BUY</code>：买入，<code>SELL</code>：卖出</td>
</tr>
<tr>
<td style="text-align: left">contractName</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>E-BTC-USDT</code></td>
<td style="text-align: left"><code>大写</code>合约名称</td>
</tr>
<tr>
<td style="text-align: left">isMaker</td>
<td style="text-align: left">boolean</td>
<td style="text-align: left"><code>true</code></td>
<td style="text-align: left">是否是maker</td>
</tr>
<tr>
<td style="text-align: left">isBuyer</td>
<td style="text-align: left">boolean</td>
<td style="text-align: left"><code>true</code></td>
<td style="text-align: left">是否买方</td>
</tr>
</tbody></table>
<h3 id='97ef08e65e'>更改持仓模式</h3>
<p><code>POST https://futuresopenapi.fameex.com/fapi/v1/edit_user_position_model</code></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">POST https://futuresopenapi.fameex.com/fapi/v1/edit_user_position_model

body
{"contractName":"E-BTC-USDT","positionModel":"1"}
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># API 相关信息</span>
<span class="nv">api_key</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">api_secret</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 请求信息</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="k">$((</span><span class="si">$(</span><span class="nb">date</span> +%s%N<span class="si">)</span><span class="o">/</span><span class="m">1000000</span><span class="k">))</span>  <span class="c"># 毫秒级时间戳</span>
<span class="nv">method</span><span class="o">=</span><span class="s2">"POST"</span>
<span class="nv">request_path</span><span class="o">=</span><span class="s2">"/fapi/v1/edit_user_position_model"</span>

<span class="c"># 请求主体 (JSON 格式)</span>
<span class="nv">body</span><span class="o">=</span><span class="s1">'{"contractName":"E-BTC-USDT","positionModel":"1"}'</span>

<span class="c"># 删除 body 中的空白字符，保证签名的一致性</span>
<span class="nv">body</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span> | jq <span class="nt">-c</span><span class="si">)</span>

<span class="c"># 拼接签名字符串</span>
<span class="nv">sign_str</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">method</span><span class="k">}${</span><span class="nv">request_path</span><span class="k">}${</span><span class="nv">body</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"签名字符串: </span><span class="nv">$sign_str</span><span class="s2">"</span>

<span class="c"># 生成 HMAC SHA256 签名</span>
<span class="nv">signature</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$sign_str</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$api_secret</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>
<span class="nb">echo</span> <span class="s2">"签名 (X-CH-SIGN): </span><span class="nv">$signature</span><span class="s2">"</span>

<span class="c"># 发送 POST 请求</span>
<span class="nv">response</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="nt">-X</span> POST <span class="s2">"https://futuresopenapi.fameex.com</span><span class="k">${</span><span class="nv">request_path</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span><span class="si">)</span>

<span class="c"># 输出响应结果</span>
<span class="nb">echo</span> <span class="s2">"响应: </span><span class="nv">$response</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.TimeUnit</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SendOrder</span> <span class="o">{</span>

    <span class="c1">// API 相关信息</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/edit_user_position_model"</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// 获取时间戳 (毫秒)</span>
            <span class="kt">long</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">.</span><span class="na">convert</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">(),</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span><span class="o">;</span>

            <span class="c1">// 请求主体 (JSON 格式，注意使用紧凑格式)</span>
            <span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{"</span><span class="n">contractName</span><span class="s">":"</span><span class="no">E</span><span class="o">-</span><span class="no">BTC</span><span class="o">-</span><span class="no">USDT</span><span class="s">","</span><span class="n">positionModel</span><span class="s">":"</span><span class="mi">1</span><span class="s">"}"</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"请求主体 (body): "</span> <span class="o">+</span> <span class="n">body</span><span class="o">);</span>

            <span class="c1">// 拼接签名字符串</span>
            <span class="nc">String</span> <span class="n">signStr</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span> <span class="o">+</span> <span class="n">body</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名字符串: "</span> <span class="o">+</span> <span class="n">signStr</span><span class="o">);</span>

            <span class="c1">// 生成 HMAC SHA256 签名</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSHA256</span><span class="o">(</span><span class="n">signStr</span><span class="o">,</span> <span class="no">API_SECRET</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名 (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>

            <span class="c1">// 使用 URI 创建 URL</span>
            <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="no">BASE_URL</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">timestamp</span><span class="o">));</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="no">API_KEY</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// 发送请求主体</span>
            <span class="k">try</span> <span class="o">(</span><span class="nc">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">body</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
                <span class="n">os</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
            <span class="o">}</span>

            <span class="c1">// 读取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span>
                    <span class="n">responseCode</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">responseCode</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="o">?</span> <span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()</span> <span class="o">:</span> <span class="n">conn</span><span class="o">.</span><span class="na">getErrorStream</span><span class="o">()));</span>
            <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
            <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

            <span class="c1">// 输出响应结果</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"响应 ("</span> <span class="o">+</span> <span class="n">responseCode</span> <span class="o">+</span> <span class="s">"): "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**
     * 生成 HMAC SHA256 签名
     *
     * @param data   要签名的字符串
     * @param secret 密钥
     * @return HMAC SHA256 签名
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSHA256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"bytes"</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="c">// API 相关信息</span>
<span class="k">const</span> <span class="p">(</span>
    <span class="n">APIKey</span>     <span class="o">=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">APISecret</span>  <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
    <span class="n">BaseURL</span>    <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
    <span class="n">RequestPath</span> <span class="o">=</span> <span class="s">"/fapi/v1/edit_user_position_model"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// 获取毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span> <span class="o">/</span> <span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

    <span class="c">// 请求主体 (JSON 格式)</span>
    <span class="n">body</span> <span class="o">:=</span> <span class="s">`{"contractName":"E-BTC-USDT","positionModel":"1"}`</span>

    <span class="c">// 拼接签名字符串</span>
    <span class="n">signStr</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d%s%s%s"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">RequestPath</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">signStr</span><span class="p">)</span>

    <span class="c">// 生成 HMAC SHA256 签名</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">signStr</span><span class="p">,</span> <span class="n">APISecret</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 发送 POST 请求</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="n">BaseURL</span> <span class="o">+</span> <span class="n">RequestPath</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">body</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"创建请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置请求头</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">))</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">APIKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 执行请求</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">responseBody</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"响应:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">responseBody</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 生成 HMAC SHA256 签名</span>
<span class="k">func</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
<span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/edit_user_position_model"</span>

<span class="c1"># 请求方法和请求主体
</span><span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span>
<span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s">"contractName"</span><span class="p">:</span><span class="s">"E-BTC-USDT"</span><span class="p">,</span><span class="s">"positionModel"</span><span class="p">:</span><span class="s">"1"</span><span class="p">}</span>


<span class="c1"># 获取时间戳 (毫秒级)
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1"># 将请求主体转换为紧凑的 JSON 字符串
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="n">body_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"请求主体 (body):"</span><span class="p">,</span> <span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 拼接签名字符串
</span><span class="n">sign_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}{</span><span class="n">method</span><span class="si">}{</span><span class="n">REQUEST_PATH</span><span class="si">}{</span><span class="n">body_str</span><span class="si">}</span><span class="s">"</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">sign_str</span><span class="p">)</span>

<span class="c1"># 生成 HMAC SHA256 签名
</span><span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sign_str</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

<span class="c1"># 构建请求头
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="s">"User-Agent"</span><span class="p">:</span> <span class="s">"Python-Client"</span>
<span class="p">}</span>

<span class="c1"># 发送 POST 请求
</span><span class="n">url</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 输出响应结果
</span><span class="k">print</span><span class="p">(</span><span class="s">"响应状态码:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"响应内容:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// API 相关信息</span>
<span class="nv">$apiKey</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$apiSecret</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>
<span class="nv">$baseUrl</span> <span class="o">=</span> <span class="s2">"https://futuresopenapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$requestPath</span> <span class="o">=</span> <span class="s2">"/fapi/v1/edit_user_position_model"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="s2">"POST"</span><span class="p">;</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">([</span>
    <span class="s2">"contractName"</span>  <span class="o">=&gt;</span> <span class="s2">"E-BTC-USDT"</span><span class="p">,</span>
    <span class="s2">"positionModel"</span> <span class="o">=&gt;</span> <span class="s2">"1"</span>
<span class="p">],</span> <span class="no">JSON_UNESCAPED_SLASHES</span><span class="p">);</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 拼接签名字符串</span>
<span class="nv">$signStr</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$method</span> <span class="mf">.</span> <span class="nv">$requestPath</span> <span class="mf">.</span> <span class="nv">$body</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"签名字符串: "</span> <span class="mf">.</span> <span class="nv">$signStr</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$signStr</span><span class="p">,</span> <span class="nv">$apiSecret</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"签名 (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$signature</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 构建请求头</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$apiKey</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"User-Agent: PHP-Client"</span>
<span class="p">];</span>

<span class="c1">// 发送 POST 请求</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nv">$baseUrl</span> <span class="mf">.</span> <span class="nv">$requestPath</span><span class="p">;</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$body</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 仅在开发环境中使用，生产环境应启用 SSL 验证</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$httpCode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"请求失败: "</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"响应状态码: </span><span class="nv">$httpCode</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"响应内容: </span><span class="nv">$response</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span>

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">BASE_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://futuresopenapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/fapi/v1/edit_user_position_model</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="kd">const</span> <span class="nx">method</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">contractName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">E-BTC-USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">positionModel</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span>
<span class="p">});</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>

<span class="c1">// 拼接签名字符串</span>
<span class="kd">const</span> <span class="nx">signStr</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">timestamp</span><span class="p">}${</span><span class="nx">method</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}${</span><span class="nx">body</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名字符串:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signStr</span><span class="p">);</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">signStr</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名 (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>

<span class="c1">// 构建请求头</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span>
    <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">User-Agent</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Node.js-Client</span><span class="dl">"</span>
<span class="p">};</span>

<span class="c1">// 发送 POST 请求</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">sendOrder</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">BASE_URL</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">body</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">});</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应状态码:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应内容:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">请求失败:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 执行请求</span>
<span class="nx">sendOrder</span><span class="p">();</span>

</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">contractName<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">合约名称，例如：<code>E-BTC-USDT</code></td>
</tr>
<tr>
<td style="text-align: left">positionModel<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">持仓模式，1：<code>净持仓</code>，2：<code>双向持仓</code></td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"成功"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='168f63da47'>更改保证金模式</h3>
<p><code>POST https://futuresopenapi.fameex.com/fapi/v1/edit_user_margin_model</code></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">POST https://futuresopenapi.fameex.com/fapi/v1/edit_user_margin_model

body
{"contractName":"E-BTC-USDT","marginModel":"1"}
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># API 相关信息</span>
<span class="nv">api_key</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">api_secret</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 请求信息</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="k">$((</span><span class="si">$(</span><span class="nb">date</span> +%s%N<span class="si">)</span><span class="o">/</span><span class="m">1000000</span><span class="k">))</span>  <span class="c"># 毫秒级时间戳</span>
<span class="nv">method</span><span class="o">=</span><span class="s2">"POST"</span>
<span class="nv">request_path</span><span class="o">=</span><span class="s2">"/fapi/v1/edit_user_margin_model"</span>

<span class="c"># 请求主体 (JSON 格式)</span>
<span class="nv">body</span><span class="o">=</span><span class="s1">'{"contractName":"E-BTC-USDT","marginModel":"1"}'</span>

<span class="c"># 删除 body 中的空白字符，保证签名的一致性</span>
<span class="nv">body</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span> | jq <span class="nt">-c</span><span class="si">)</span>

<span class="c"># 拼接签名字符串</span>
<span class="nv">sign_str</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">method</span><span class="k">}${</span><span class="nv">request_path</span><span class="k">}${</span><span class="nv">body</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"签名字符串: </span><span class="nv">$sign_str</span><span class="s2">"</span>

<span class="c"># 生成 HMAC SHA256 签名</span>
<span class="nv">signature</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$sign_str</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$api_secret</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>
<span class="nb">echo</span> <span class="s2">"签名 (X-CH-SIGN): </span><span class="nv">$signature</span><span class="s2">"</span>

<span class="c"># 发送 POST 请求</span>
<span class="nv">response</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="nt">-X</span> POST <span class="s2">"https://futuresopenapi.fameex.com</span><span class="k">${</span><span class="nv">request_path</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span><span class="si">)</span>

<span class="c"># 输出响应结果</span>
<span class="nb">echo</span> <span class="s2">"响应: </span><span class="nv">$response</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.TimeUnit</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SendOrder</span> <span class="o">{</span>

    <span class="c1">// API 相关信息</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/edit_user_margin_model"</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// 获取时间戳 (毫秒)</span>
            <span class="kt">long</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">.</span><span class="na">convert</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">(),</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span><span class="o">;</span>

            <span class="c1">// 请求主体 (JSON 格式，注意使用紧凑格式)</span>
            <span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{"</span><span class="n">contractName</span><span class="s">":"</span><span class="no">E</span><span class="o">-</span><span class="no">BTC</span><span class="o">-</span><span class="no">USDT</span><span class="s">","</span><span class="n">marginModel</span><span class="s">":"</span><span class="mi">1</span><span class="s">"}"</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"请求主体 (body): "</span> <span class="o">+</span> <span class="n">body</span><span class="o">);</span>

            <span class="c1">// 拼接签名字符串</span>
            <span class="nc">String</span> <span class="n">signStr</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span> <span class="o">+</span> <span class="n">body</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名字符串: "</span> <span class="o">+</span> <span class="n">signStr</span><span class="o">);</span>

            <span class="c1">// 生成 HMAC SHA256 签名</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSHA256</span><span class="o">(</span><span class="n">signStr</span><span class="o">,</span> <span class="no">API_SECRET</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名 (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>

            <span class="c1">// 使用 URI 创建 URL</span>
            <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="no">BASE_URL</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">timestamp</span><span class="o">));</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="no">API_KEY</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// 发送请求主体</span>
            <span class="k">try</span> <span class="o">(</span><span class="nc">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">body</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
                <span class="n">os</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
            <span class="o">}</span>

            <span class="c1">// 读取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span>
                    <span class="n">responseCode</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">responseCode</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="o">?</span> <span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()</span> <span class="o">:</span> <span class="n">conn</span><span class="o">.</span><span class="na">getErrorStream</span><span class="o">()));</span>
            <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
            <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

            <span class="c1">// 输出响应结果</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"响应 ("</span> <span class="o">+</span> <span class="n">responseCode</span> <span class="o">+</span> <span class="s">"): "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**
     * 生成 HMAC SHA256 签名
     *
     * @param data   要签名的字符串
     * @param secret 密钥
     * @return HMAC SHA256 签名
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSHA256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"bytes"</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="c">// API 相关信息</span>
<span class="k">const</span> <span class="p">(</span>
    <span class="n">APIKey</span>     <span class="o">=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">APISecret</span>  <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
    <span class="n">BaseURL</span>    <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
    <span class="n">RequestPath</span> <span class="o">=</span> <span class="s">"/fapi/v1/edit_user_margin_model"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// 获取毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span> <span class="o">/</span> <span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

    <span class="c">// 请求主体 (JSON 格式)</span>
    <span class="n">body</span> <span class="o">:=</span> <span class="s">`{"contractName":"E-BTC-USDT","marginModel":"1"}`</span>

    <span class="c">// 拼接签名字符串</span>
    <span class="n">signStr</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d%s%s%s"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">RequestPath</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">signStr</span><span class="p">)</span>

    <span class="c">// 生成 HMAC SHA256 签名</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">signStr</span><span class="p">,</span> <span class="n">APISecret</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 发送 POST 请求</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="n">BaseURL</span> <span class="o">+</span> <span class="n">RequestPath</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">body</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"创建请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置请求头</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">))</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">APIKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 执行请求</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">responseBody</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"响应:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">responseBody</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 生成 HMAC SHA256 签名</span>
<span class="k">func</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
<span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/edit_user_margin_model"</span>

<span class="c1"># 请求方法和请求主体
</span><span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span>
<span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s">"contractName"</span><span class="p">:</span><span class="s">"E-BTC-USDT"</span><span class="p">,</span><span class="s">"marginModel"</span><span class="p">:</span><span class="s">"1"</span><span class="p">}</span>


<span class="c1"># 获取时间戳 (毫秒级)
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1"># 将请求主体转换为紧凑的 JSON 字符串
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="n">body_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"请求主体 (body):"</span><span class="p">,</span> <span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 拼接签名字符串
</span><span class="n">sign_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}{</span><span class="n">method</span><span class="si">}{</span><span class="n">REQUEST_PATH</span><span class="si">}{</span><span class="n">body_str</span><span class="si">}</span><span class="s">"</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">sign_str</span><span class="p">)</span>

<span class="c1"># 生成 HMAC SHA256 签名
</span><span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sign_str</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

<span class="c1"># 构建请求头
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="s">"User-Agent"</span><span class="p">:</span> <span class="s">"Python-Client"</span>
<span class="p">}</span>

<span class="c1"># 发送 POST 请求
</span><span class="n">url</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 输出响应结果
</span><span class="k">print</span><span class="p">(</span><span class="s">"响应状态码:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"响应内容:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// API 相关信息</span>
<span class="nv">$apiKey</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$apiSecret</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>
<span class="nv">$baseUrl</span> <span class="o">=</span> <span class="s2">"https://futuresopenapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$requestPath</span> <span class="o">=</span> <span class="s2">"/fapi/v1/edit_user_margin_model"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="s2">"POST"</span><span class="p">;</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">([</span>
    <span class="s2">"contractName"</span>  <span class="o">=&gt;</span> <span class="s2">"E-BTC-USDT"</span><span class="p">,</span>
    <span class="s2">"marginModel"</span> <span class="o">=&gt;</span> <span class="s2">"1"</span>
<span class="p">],</span> <span class="no">JSON_UNESCAPED_SLASHES</span><span class="p">);</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 拼接签名字符串</span>
<span class="nv">$signStr</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$method</span> <span class="mf">.</span> <span class="nv">$requestPath</span> <span class="mf">.</span> <span class="nv">$body</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"签名字符串: "</span> <span class="mf">.</span> <span class="nv">$signStr</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$signStr</span><span class="p">,</span> <span class="nv">$apiSecret</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"签名 (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$signature</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 构建请求头</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$apiKey</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"User-Agent: PHP-Client"</span>
<span class="p">];</span>

<span class="c1">// 发送 POST 请求</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nv">$baseUrl</span> <span class="mf">.</span> <span class="nv">$requestPath</span><span class="p">;</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$body</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 仅在开发环境中使用，生产环境应启用 SSL 验证</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$httpCode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"请求失败: "</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"响应状态码: </span><span class="nv">$httpCode</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"响应内容: </span><span class="nv">$response</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span>

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">BASE_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://futuresopenapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/fapi/v1/edit_user_margin_model</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="kd">const</span> <span class="nx">method</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">contractName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">E-BTC-USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">marginModel</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span>
<span class="p">});</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>

<span class="c1">// 拼接签名字符串</span>
<span class="kd">const</span> <span class="nx">signStr</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">timestamp</span><span class="p">}${</span><span class="nx">method</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}${</span><span class="nx">body</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名字符串:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signStr</span><span class="p">);</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">signStr</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名 (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>

<span class="c1">// 构建请求头</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span>
    <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">User-Agent</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Node.js-Client</span><span class="dl">"</span>
<span class="p">};</span>

<span class="c1">// 发送 POST 请求</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">sendOrder</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">BASE_URL</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">body</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">});</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应状态码:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应内容:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">请求失败:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 执行请求</span>
<span class="nx">sendOrder</span><span class="p">();</span>

</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">contractName<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">合约名称，例如：<code>E-BTC-USDT</code></td>
</tr>
<tr>
<td style="text-align: left">marginModel<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">持仓模式，1：<code>净持仓</code>，2：<code>双向持仓</code></td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> 
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"成功"</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> 
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='a417f8d88a'>更改杠杆倍数</h3>
<p><code>POST</code> <code>https://futuresopenapi.fameex.com/fapi/v1/edit_lever</code></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">POST https://futuresopenapi.fameex.com/fapi/v1/edit_lever

body
{"contractName":"E-BTC-USDT","newLever":"1"}
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># API 相关信息</span>
<span class="nv">api_key</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">api_secret</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 请求信息</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="k">$((</span><span class="si">$(</span><span class="nb">date</span> +%s%N<span class="si">)</span><span class="o">/</span><span class="m">1000000</span><span class="k">))</span>  <span class="c"># 毫秒级时间戳</span>
<span class="nv">method</span><span class="o">=</span><span class="s2">"POST"</span>
<span class="nv">request_path</span><span class="o">=</span><span class="s2">"/fapi/v1/edit_lever"</span>

<span class="c"># 请求主体 (JSON 格式)</span>
<span class="nv">body</span><span class="o">=</span><span class="s1">'{"contractName":"E-BTC-USDT","newLever":"1"}'</span>

<span class="c"># 删除 body 中的空白字符，保证签名的一致性</span>
<span class="nv">body</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span> | jq <span class="nt">-c</span><span class="si">)</span>

<span class="c"># 拼接签名字符串</span>
<span class="nv">sign_str</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">method</span><span class="k">}${</span><span class="nv">request_path</span><span class="k">}${</span><span class="nv">body</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"签名字符串: </span><span class="nv">$sign_str</span><span class="s2">"</span>

<span class="c"># 生成 HMAC SHA256 签名</span>
<span class="nv">signature</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$sign_str</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$api_secret</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>
<span class="nb">echo</span> <span class="s2">"签名 (X-CH-SIGN): </span><span class="nv">$signature</span><span class="s2">"</span>

<span class="c"># 发送 POST 请求</span>
<span class="nv">response</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="nt">-X</span> POST <span class="s2">"https://futuresopenapi.fameex.com</span><span class="k">${</span><span class="nv">request_path</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span><span class="si">)</span>

<span class="c"># 输出响应结果</span>
<span class="nb">echo</span> <span class="s2">"响应: </span><span class="nv">$response</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.TimeUnit</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SendOrder</span> <span class="o">{</span>

    <span class="c1">// API 相关信息</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/edit_lever"</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// 获取时间戳 (毫秒)</span>
            <span class="kt">long</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">.</span><span class="na">convert</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">(),</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span><span class="o">;</span>

            <span class="c1">// 请求主体 (JSON 格式，注意使用紧凑格式)</span>
            <span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{"</span><span class="n">contractName</span><span class="s">":"</span><span class="no">E</span><span class="o">-</span><span class="no">BTC</span><span class="o">-</span><span class="no">USDT</span><span class="s">","</span><span class="n">newLever</span><span class="s">":"</span><span class="mi">1</span><span class="s">"}"</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"请求主体 (body): "</span> <span class="o">+</span> <span class="n">body</span><span class="o">);</span>

            <span class="c1">// 拼接签名字符串</span>
            <span class="nc">String</span> <span class="n">signStr</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span> <span class="o">+</span> <span class="n">body</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名字符串: "</span> <span class="o">+</span> <span class="n">signStr</span><span class="o">);</span>

            <span class="c1">// 生成 HMAC SHA256 签名</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSHA256</span><span class="o">(</span><span class="n">signStr</span><span class="o">,</span> <span class="no">API_SECRET</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名 (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>

            <span class="c1">// 使用 URI 创建 URL</span>
            <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="no">BASE_URL</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">timestamp</span><span class="o">));</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="no">API_KEY</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// 发送请求主体</span>
            <span class="k">try</span> <span class="o">(</span><span class="nc">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">body</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
                <span class="n">os</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
            <span class="o">}</span>

            <span class="c1">// 读取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span>
                    <span class="n">responseCode</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">responseCode</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="o">?</span> <span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()</span> <span class="o">:</span> <span class="n">conn</span><span class="o">.</span><span class="na">getErrorStream</span><span class="o">()));</span>
            <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
            <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

            <span class="c1">// 输出响应结果</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"响应 ("</span> <span class="o">+</span> <span class="n">responseCode</span> <span class="o">+</span> <span class="s">"): "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**
     * 生成 HMAC SHA256 签名
     *
     * @param data   要签名的字符串
     * @param secret 密钥
     * @return HMAC SHA256 签名
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSHA256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"bytes"</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="c">// API 相关信息</span>
<span class="k">const</span> <span class="p">(</span>
    <span class="n">APIKey</span>     <span class="o">=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">APISecret</span>  <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
    <span class="n">BaseURL</span>    <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
    <span class="n">RequestPath</span> <span class="o">=</span> <span class="s">"/fapi/v1/edit_lever"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// 获取毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span> <span class="o">/</span> <span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

    <span class="c">// 请求主体 (JSON 格式)</span>
    <span class="n">body</span> <span class="o">:=</span> <span class="s">`{"contractName":"E-BTC-USDT","newLever":"1"}`</span>

    <span class="c">// 拼接签名字符串</span>
    <span class="n">signStr</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d%s%s%s"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">RequestPath</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">signStr</span><span class="p">)</span>

    <span class="c">// 生成 HMAC SHA256 签名</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">signStr</span><span class="p">,</span> <span class="n">APISecret</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 发送 POST 请求</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="n">BaseURL</span> <span class="o">+</span> <span class="n">RequestPath</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">body</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"创建请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置请求头</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">))</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">APIKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 执行请求</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">responseBody</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"响应:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">responseBody</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 生成 HMAC SHA256 签名</span>
<span class="k">func</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
<span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/edit_lever"</span>

<span class="c1"># 请求方法和请求主体
</span><span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span>
<span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s">"contractName"</span><span class="p">:</span><span class="s">"E-BTC-USDT"</span><span class="p">,</span><span class="s">"newLever"</span><span class="p">:</span><span class="s">"1"</span><span class="p">}</span>


<span class="c1"># 获取时间戳 (毫秒级)
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1"># 将请求主体转换为紧凑的 JSON 字符串
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="n">body_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"请求主体 (body):"</span><span class="p">,</span> <span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 拼接签名字符串
</span><span class="n">sign_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}{</span><span class="n">method</span><span class="si">}{</span><span class="n">REQUEST_PATH</span><span class="si">}{</span><span class="n">body_str</span><span class="si">}</span><span class="s">"</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">sign_str</span><span class="p">)</span>

<span class="c1"># 生成 HMAC SHA256 签名
</span><span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sign_str</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

<span class="c1"># 构建请求头
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="s">"User-Agent"</span><span class="p">:</span> <span class="s">"Python-Client"</span>
<span class="p">}</span>

<span class="c1"># 发送 POST 请求
</span><span class="n">url</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 输出响应结果
</span><span class="k">print</span><span class="p">(</span><span class="s">"响应状态码:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"响应内容:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// API 相关信息</span>
<span class="nv">$apiKey</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$apiSecret</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>
<span class="nv">$baseUrl</span> <span class="o">=</span> <span class="s2">"https://futuresopenapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$requestPath</span> <span class="o">=</span> <span class="s2">"/fapi/v1/edit_lever"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="s2">"POST"</span><span class="p">;</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">([</span>
    <span class="s2">"contractName"</span>  <span class="o">=&gt;</span> <span class="s2">"E-BTC-USDT"</span><span class="p">,</span>
    <span class="s2">"newLever"</span> <span class="o">=&gt;</span> <span class="s2">"1"</span>
<span class="p">],</span> <span class="no">JSON_UNESCAPED_SLASHES</span><span class="p">);</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 拼接签名字符串</span>
<span class="nv">$signStr</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$method</span> <span class="mf">.</span> <span class="nv">$requestPath</span> <span class="mf">.</span> <span class="nv">$body</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"签名字符串: "</span> <span class="mf">.</span> <span class="nv">$signStr</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$signStr</span><span class="p">,</span> <span class="nv">$apiSecret</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"签名 (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$signature</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 构建请求头</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$apiKey</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"User-Agent: PHP-Client"</span>
<span class="p">];</span>

<span class="c1">// 发送 POST 请求</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nv">$baseUrl</span> <span class="mf">.</span> <span class="nv">$requestPath</span><span class="p">;</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$body</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 仅在开发环境中使用，生产环境应启用 SSL 验证</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$httpCode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"请求失败: "</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"响应状态码: </span><span class="nv">$httpCode</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"响应内容: </span><span class="nv">$response</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span>

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">BASE_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://futuresopenapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/fapi/v1/edit_lever</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="kd">const</span> <span class="nx">method</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">contractName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">E-BTC-USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">newLever</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span>
<span class="p">});</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>

<span class="c1">// 拼接签名字符串</span>
<span class="kd">const</span> <span class="nx">signStr</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">timestamp</span><span class="p">}${</span><span class="nx">method</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}${</span><span class="nx">body</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名字符串:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signStr</span><span class="p">);</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">signStr</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名 (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>

<span class="c1">// 构建请求头</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span>
    <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">User-Agent</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Node.js-Client</span><span class="dl">"</span>
<span class="p">};</span>

<span class="c1">// 发送 POST 请求</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">sendOrder</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">BASE_URL</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">body</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">});</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应状态码:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应内容:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">请求失败:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 执行请求</span>
<span class="nx">sendOrder</span><span class="p">();</span>

</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">contractName<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">合约名称，例如：<code>E-BTC-USDT</code></td>
</tr>
<tr>
<td style="text-align: left">newLever<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">调整杠杆倍数</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> 
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"成功"</span><span class="p">,</span><span class="w"> 
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> 
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='6b4a8e9b43'>当前持仓列表</h3>
<p><code>POST</code> <code>https://futuresopenapi.fameex.com/fapi/v1/positionList</code></p>

<p><strong>请求头</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">X-CH-TS<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">时间戳</td>
</tr>
<tr>
<td style="text-align: left">X-CH-APIKEY<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">您的API-key</td>
</tr>
<tr>
<td style="text-align: left">X-CH-SIGN<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">签名</td>
</tr>
</tbody></table>

<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">POST https://futuresopenapi.fameex.com/fapi/v1/positionList

body
{"contractName":"E-BTC-USDT","limit":10,"page":1}
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># API 相关信息</span>
<span class="nv">api_key</span><span class="o">=</span><span class="s2">"您的API-KEY"</span>
<span class="nv">api_secret</span><span class="o">=</span><span class="s2">"您的API-SECRET"</span>

<span class="c"># 请求信息</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="k">$((</span><span class="si">$(</span><span class="nb">date</span> +%s%N<span class="si">)</span><span class="o">/</span><span class="m">1000000</span><span class="k">))</span>  <span class="c"># 毫秒级时间戳</span>
<span class="nv">method</span><span class="o">=</span><span class="s2">"POST"</span>
<span class="nv">request_path</span><span class="o">=</span><span class="s2">"/fapi/v1/positionList"</span>

<span class="c"># 请求主体 (JSON 格式)</span>
<span class="nv">body</span><span class="o">=</span><span class="s1">'{"contractName":"E-BTC-USDT","limit":10,"page":1}'</span>

<span class="c"># 删除 body 中的空白字符，保证签名的一致性</span>
<span class="nv">body</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span> | jq <span class="nt">-c</span><span class="si">)</span>

<span class="c"># 拼接签名字符串</span>
<span class="nv">sign_str</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">timestamp</span><span class="k">}${</span><span class="nv">method</span><span class="k">}${</span><span class="nv">request_path</span><span class="k">}${</span><span class="nv">body</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"签名字符串: </span><span class="nv">$sign_str</span><span class="s2">"</span>

<span class="c"># 生成 HMAC SHA256 签名</span>
<span class="nv">signature</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$sign_str</span><span class="s2">"</span> | openssl dgst <span class="nt">-sha256</span> <span class="nt">-hmac</span> <span class="s2">"</span><span class="nv">$api_secret</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>
<span class="nb">echo</span> <span class="s2">"签名 (X-CH-SIGN): </span><span class="nv">$signature</span><span class="s2">"</span>

<span class="c"># 发送 POST 请求</span>
<span class="nv">response</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="nt">-X</span> POST <span class="s2">"https://futuresopenapi.fameex.com</span><span class="k">${</span><span class="nv">request_path</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-APIKEY: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$body</span><span class="s2">"</span><span class="si">)</span>

<span class="c"># 输出响应结果</span>
<span class="nb">echo</span> <span class="s2">"响应: </span><span class="nv">$response</span><span class="s2">"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.TimeUnit</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SendOrder</span> <span class="o">{</span>

    <span class="c1">// API 相关信息</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/positionList"</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// 获取时间戳 (毫秒)</span>
            <span class="kt">long</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">.</span><span class="na">convert</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">(),</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span>

            <span class="c1">// 请求方法</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span><span class="o">;</span>

            <span class="c1">// 请求主体 (JSON 格式，注意使用紧凑格式)</span>
            <span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{"</span><span class="n">contractName</span><span class="s">":"</span><span class="no">E</span><span class="o">-</span><span class="no">BTC</span><span class="o">-</span><span class="no">USDT</span><span class="s">","</span><span class="n">limit</span><span class="s">":10,"</span><span class="n">page</span><span class="s">":1}"</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"请求主体 (body): "</span> <span class="o">+</span> <span class="n">body</span><span class="o">);</span>

            <span class="c1">// 拼接签名字符串</span>
            <span class="nc">String</span> <span class="n">signStr</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="n">method</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span> <span class="o">+</span> <span class="n">body</span><span class="o">;</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名字符串: "</span> <span class="o">+</span> <span class="n">signStr</span><span class="o">);</span>

            <span class="c1">// 生成 HMAC SHA256 签名</span>
            <span class="nc">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSHA256</span><span class="o">(</span><span class="n">signStr</span><span class="o">,</span> <span class="no">API_SECRET</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"签名 (X-CH-SIGN): "</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>

            <span class="c1">// 使用 URI 创建 URL</span>
            <span class="no">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="no">BASE_URL</span> <span class="o">+</span> <span class="no">REQUEST_PATH</span><span class="o">);</span>
            <span class="nc">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpURLConnection</span><span class="o">)</span> <span class="n">uri</span><span class="o">.</span><span class="na">toURL</span><span class="o">().</span><span class="na">openConnection</span><span class="o">();</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-TS"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">timestamp</span><span class="o">));</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-APIKEY"</span><span class="o">,</span> <span class="no">API_KEY</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"X-CH-SIGN"</span><span class="o">,</span> <span class="n">signature</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"User-Agent"</span><span class="o">,</span> <span class="s">"Java-Client"</span><span class="o">);</span>
            <span class="n">conn</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

            <span class="c1">// 发送请求主体</span>
            <span class="k">try</span> <span class="o">(</span><span class="nc">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">body</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
                <span class="n">os</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
            <span class="o">}</span>

            <span class="c1">// 读取响应</span>
            <span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
            <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span>
                    <span class="n">responseCode</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">responseCode</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="o">?</span> <span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()</span> <span class="o">:</span> <span class="n">conn</span><span class="o">.</span><span class="na">getErrorStream</span><span class="o">()));</span>
            <span class="nc">StringBuilder</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
            <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

            <span class="c1">// 输出响应结果</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"响应 ("</span> <span class="o">+</span> <span class="n">responseCode</span> <span class="o">+</span> <span class="s">"): "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="cm">/**
     * 生成 HMAC SHA256 签名
     *
     * @param data   要签名的字符串
     * @param secret 密钥
     * @return HMAC SHA256 签名
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">hmacSHA256</span><span class="o">(</span><span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">String</span> <span class="n">secret</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="nc">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="nc">SecretKeySpec</span> <span class="n">secretKeySpec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
        <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secretKeySpec</span><span class="o">);</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="nc">StringBuilder</span> <span class="n">hexString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">hash</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">hex</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">b</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hex</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'0'</span><span class="o">);</span>
            <span class="n">hexString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">hexString</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"bytes"</span>
    <span class="s">"crypto/hmac"</span>
    <span class="s">"crypto/sha256"</span>
    <span class="s">"encoding/hex"</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
    <span class="s">"time"</span>
<span class="p">)</span>

<span class="c">// API 相关信息</span>
<span class="k">const</span> <span class="p">(</span>
    <span class="n">APIKey</span>     <span class="o">=</span> <span class="s">"您的API-KEY"</span>
    <span class="n">APISecret</span>  <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
    <span class="n">BaseURL</span>    <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
    <span class="n">RequestPath</span> <span class="o">=</span> <span class="s">"/fapi/v1/positionList"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// 获取毫秒级时间戳</span>
    <span class="n">timestamp</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()</span> <span class="o">/</span> <span class="kt">int64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">)</span>

    <span class="c">// 请求方法</span>
    <span class="n">method</span> <span class="o">:=</span> <span class="s">"POST"</span>

    <span class="c">// 请求主体 (JSON 格式)</span>
    <span class="n">body</span> <span class="o">:=</span> <span class="s">`{"contractName":"E-BTC-USDT","limit":10,"page":1}`</span>

    <span class="c">// 拼接签名字符串</span>
    <span class="n">signStr</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d%s%s%s"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">RequestPath</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">signStr</span><span class="p">)</span>

    <span class="c">// 生成 HMAC SHA256 签名</span>
    <span class="n">signature</span> <span class="o">:=</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">signStr</span><span class="p">,</span> <span class="n">APISecret</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 发送 POST 请求</span>
    <span class="n">url</span> <span class="o">:=</span> <span class="n">BaseURL</span> <span class="o">+</span> <span class="n">RequestPath</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">body</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"创建请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// 设置请求头</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-TS"</span><span class="p">,</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">))</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-APIKEY"</span><span class="p">,</span> <span class="n">APIKey</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-CH-SIGN"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

    <span class="c">// 执行请求</span>
    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"请求失败:"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">defer</span> <span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

    <span class="c">// 读取响应</span>
    <span class="n">responseBody</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"响应:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">responseBody</span><span class="p">))</span>
<span class="p">}</span>

<span class="c">// 生成 HMAC SHA256 签名</span>
<span class="k">func</span> <span class="n">generateHMACSHA256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">secret</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">h</span> <span class="o">:=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">secret</span><span class="p">))</span>
    <span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># API 相关信息
</span><span class="n">API_KEY</span> <span class="o">=</span> <span class="s">"您的API-KEY"</span>
<span class="n">API_SECRET</span> <span class="o">=</span> <span class="s">"您的API-SECRET"</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">"https://futuresopenapi.fameex.com"</span>
<span class="n">REQUEST_PATH</span> <span class="o">=</span> <span class="s">"/fapi/v1/positionList"</span>

<span class="c1"># 请求方法和请求主体
</span><span class="n">method</span> <span class="o">=</span> <span class="s">"POST"</span>
<span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s">"contractName"</span><span class="p">:</span><span class="s">"E-BTC-USDT"</span><span class="p">,</span><span class="s">"limit"</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="s">"page"</span><span class="p">:</span><span class="mi">1</span><span class="p">}</span>


<span class="c1"># 获取时间戳 (毫秒级)
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1"># 将请求主体转换为紧凑的 JSON 字符串
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="n">body_str</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">"请求主体 (body):"</span><span class="p">,</span> <span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 拼接签名字符串
</span><span class="n">sign_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}{</span><span class="n">method</span><span class="si">}{</span><span class="n">REQUEST_PATH</span><span class="si">}{</span><span class="n">body_str</span><span class="si">}</span><span class="s">"</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名字符串:"</span><span class="p">,</span> <span class="n">sign_str</span><span class="p">)</span>

<span class="c1"># 生成 HMAC SHA256 签名
</span><span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">sign_str</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span><span class="p">).</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">"签名 (X-CH-SIGN):"</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>

<span class="c1"># 构建请求头
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"X-CH-TS"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span>
    <span class="s">"X-CH-APIKEY"</span><span class="p">:</span> <span class="n">API_KEY</span><span class="p">,</span>
    <span class="s">"X-CH-SIGN"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="s">"User-Agent"</span><span class="p">:</span> <span class="s">"Python-Client"</span>
<span class="p">}</span>

<span class="c1"># 发送 POST 请求
</span><span class="n">url</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="n">REQUEST_PATH</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body_str</span><span class="p">)</span>

<span class="c1"># 输出响应结果
</span><span class="k">print</span><span class="p">(</span><span class="s">"响应状态码:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"响应内容:"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="c1">// API 相关信息</span>
<span class="nv">$apiKey</span> <span class="o">=</span> <span class="s2">"您的API-KEY"</span><span class="p">;</span>
<span class="nv">$apiSecret</span> <span class="o">=</span> <span class="s2">"您的API-SECRET"</span><span class="p">;</span>
<span class="nv">$baseUrl</span> <span class="o">=</span> <span class="s2">"https://futuresopenapi.fameex.com"</span><span class="p">;</span>
<span class="nv">$requestPath</span> <span class="o">=</span> <span class="s2">"/fapi/v1/positionList"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="s2">"POST"</span><span class="p">;</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">([</span>
    <span class="s2">"contractName"</span>  <span class="o">=&gt;</span> <span class="s2">"E-BTC-USDT"</span><span class="p">,</span>
    <span class="s2">"limit"</span> <span class="o">=&gt;</span> <span class="s2">"10"</span><span class="p">,</span>
    <span class="s2">"page"</span> <span class="o">=&gt;</span> <span class="s2">"1"</span>
<span class="p">],</span> <span class="no">JSON_UNESCAPED_SLASHES</span><span class="p">);</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// 拼接签名字符串</span>
<span class="nv">$signStr</span> <span class="o">=</span> <span class="nv">$timestamp</span> <span class="mf">.</span> <span class="nv">$method</span> <span class="mf">.</span> <span class="nv">$requestPath</span> <span class="mf">.</span> <span class="nv">$body</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"签名字符串: "</span> <span class="mf">.</span> <span class="nv">$signStr</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$signStr</span><span class="p">,</span> <span class="nv">$apiSecret</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"签名 (X-CH-SIGN): "</span> <span class="mf">.</span> <span class="nv">$signature</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>

<span class="c1">// 构建请求头</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
    <span class="s2">"X-CH-TS: </span><span class="nv">$timestamp</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-APIKEY: </span><span class="nv">$apiKey</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"X-CH-SIGN: </span><span class="nv">$signature</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"User-Agent: PHP-Client"</span>
<span class="p">];</span>

<span class="c1">// 发送 POST 请求</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nv">$baseUrl</span> <span class="mf">.</span> <span class="nv">$requestPath</span><span class="p">;</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$body</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="c1">// 仅在开发环境中使用，生产环境应启用 SSL 验证</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$httpCode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"请求失败: "</span> <span class="mf">.</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"响应状态码: </span><span class="nv">$httpCode</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"响应内容: </span><span class="nv">$response</span><span class="s2">"</span> <span class="mf">.</span> <span class="kc">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span>

<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">crypto</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// API 相关信息</span>
<span class="kd">const</span> <span class="nx">API_KEY</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-KEY</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">API_SECRET</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">您的API-SECRET</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">BASE_URL</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://futuresopenapi.fameex.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REQUEST_PATH</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/fapi/v1/positionList</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 请求方法和请求主体</span>
<span class="kd">const</span> <span class="nx">method</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">contractName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">E-BTC-USDT</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">limit</span><span class="p">:</span> <span class="dl">"</span><span class="s2">10</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">page</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span>
<span class="p">});</span>

<span class="c1">// 获取毫秒级时间戳</span>
<span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>

<span class="c1">// 拼接签名字符串</span>
<span class="kd">const</span> <span class="nx">signStr</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">timestamp</span><span class="p">}${</span><span class="nx">method</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}${</span><span class="nx">body</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名字符串:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signStr</span><span class="p">);</span>

<span class="c1">// 生成 HMAC SHA256 签名</span>
<span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="dl">'</span><span class="s1">sha256</span><span class="dl">'</span><span class="p">,</span> <span class="nx">API_SECRET</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">signStr</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="dl">'</span><span class="s1">hex</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">签名 (X-CH-SIGN):</span><span class="dl">"</span><span class="p">,</span> <span class="nx">signature</span><span class="p">);</span>

<span class="c1">// 构建请求头</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-TS</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span>
    <span class="dl">"</span><span class="s2">X-CH-APIKEY</span><span class="dl">"</span><span class="p">:</span> <span class="nx">API_KEY</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">X-CH-SIGN</span><span class="dl">"</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">User-Agent</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Node.js-Client</span><span class="dl">"</span>
<span class="p">};</span>

<span class="c1">// 发送 POST 请求</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">sendOrder</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">BASE_URL</span><span class="p">}${</span><span class="nx">REQUEST_PATH</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">body</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span> <span class="p">});</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应状态码:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">响应内容:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">请求失败:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="p">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span> <span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 执行请求</span>
<span class="nx">sendOrder</span><span class="p">();</span>

</code></pre></div>
<p><strong>请求参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">contractName<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">合约名称，例如：<code>E-BTC-USDT</code></td>
</tr>
<tr>
<td style="text-align: left">limit<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">显示笔数</td>
</tr>
<tr>
<td style="text-align: left">page<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">第几页</td>
</tr>
</tbody></table>

<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"records"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">42888</span><span class="p">,</span><span class="w">
                </span><span class="nl">"originUid"</span><span class="p">:</span><span class="w"> </span><span class="mi">18099</span><span class="p">,</span><span class="w">
                </span><span class="nl">"uid"</span><span class="p">:</span><span class="w"> </span><span class="mi">10059</span><span class="p">,</span><span class="w">
                </span><span class="nl">"contractName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E-BTC-USDT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.0000000000000000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"holdAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0E-16</span><span class="p">,</span><span class="w">
                </span><span class="nl">"openPrice"</span><span class="p">:</span><span class="w"> </span><span class="mf">94777.1000000000000000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"closePrice"</span><span class="p">:</span><span class="w"> </span><span class="mi">0E-16</span><span class="p">,</span><span class="w">
                </span><span class="nl">"closeVolume"</span><span class="p">:</span><span class="w"> </span><span class="mi">0E-16</span><span class="p">,</span><span class="w">
                </span><span class="nl">"historyRealizedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0142165650000000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"unRealizedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.11638000000000000000000000000000000000000000000000000000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"ctime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-05-06 03:14:19"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"leverageLevel"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w">
        </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"current"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"orders"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="nl">"optimizeCountSql"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"hitCount"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"countId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"maxLimit"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"searchCount"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"succ"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>返回参数</strong></p>

<table><thead>
<tr>
<th style="text-align: left">参数名</th>
<th style="text-align: left">类型</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">id<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">数据ID</td>
</tr>
<tr>
<td style="text-align: left">contractName<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">合约名称</td>
</tr>
<tr>
<td style="text-align: left">volume<font color="red">*</font></td>
<td style="text-align: left">bigDecimal</td>
<td style="text-align: left">持仓数量</td>
</tr>
<tr>
<td style="text-align: left">holdAmount<font color="red">*</font></td>
<td style="text-align: left">bigDecimal</td>
<td style="text-align: left">持仓保证金</td>
</tr>
<tr>
<td style="text-align: left">openPrice<font color="red">*</font></td>
<td style="text-align: left">bigDecimal</td>
<td style="text-align: left">开仓价格</td>
</tr>
<tr>
<td style="text-align: left">closePrice<font color="red">*</font></td>
<td style="text-align: left">bigDecimal</td>
<td style="text-align: left">平仓均价</td>
</tr>
<tr>
<td style="text-align: left">closeVolume<font color="red">*</font></td>
<td style="text-align: left">bigDecimal</td>
<td style="text-align: left">已平仓数量</td>
</tr>
<tr>
<td style="text-align: left">historyRealizedAmount<font color="red">*</font></td>
<td style="text-align: left">bigDecimal</td>
<td style="text-align: left">历史累计已实现盈亏</td>
</tr>
<tr>
<td style="text-align: left">unRealizedAmount<font color="red">*</font></td>
<td style="text-align: left">bigDecimal</td>
<td style="text-align: left">未实现盈亏</td>
</tr>
<tr>
<td style="text-align: left">ctime<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">创建时间</td>
</tr>
<tr>
<td style="text-align: left">status<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">仓位有效性(0:无效,1:有效)</td>
</tr>
<tr>
<td style="text-align: left">side<font color="red">*</font></td>
<td style="text-align: left">string</td>
<td style="text-align: left">持仓方向</td>
</tr>
<tr>
<td style="text-align: left">leverageLevel<font color="red">*</font></td>
<td style="text-align: left">integer</td>
<td style="text-align: left">杠杆倍数</td>
</tr>
</tbody></table>
<h1 id='websocket'>Websocket</h1><h2 id='153042ed9e'>概述</h2>
<p>WebSocket是HTML5一种新的协议（Protocol）。它实现了客户端与服务器全双工通信，使得数据可以快速地双向传播。通过一次简单的握手就可以建立客户端和服务器连接，服务器根据业务规则可以主动推送信息给客户端。其优点如下：</p>

<ul>
<li>  客户端和服务器进行数据传输时，请求头信息比较小，大概2个字节。</li>
<li>  客户端和服务器皆可以主动地发送数据给对方。</li>
<li>  不需要多次创建TCP请求和销毁，节约宽带和服务器的资源。</li>
</ul>

<aside class="notice">强烈建议开发者使用WebSocket API获取市场行情和买卖深度等信息。</aside>
<h2 id='b122f813d5'>基本信息</h2>
<ul>
<li>  币币行情url：<a href="wss://ws.fameex.com/kline-api/ws">wss://ws.fameex.com/kline-api/ws</a>。</li>
<li>  币币行情备用url：<a href="wss://ws.fameex.net/kline-api/ws">wss://ws.fameex.net/kline-api/ws</a>。</li>
<li>  合约行情url：<a href="wss://futuresws.fameex.com/kline-api/ws">wss://futuresws.fameex.com/kline-api/ws</a>。</li>
<li>  合约行情备用url：<a href="wss://futuresws.fameex.net/kline-api/ws">wss://futuresws.fameex.net/kline-api/ws</a>。</li>
<li>  返回数据除了心跳数据都会二进制压缩（用户需要通过Gzip算法进行解压）。</li>
</ul>
<h3 id='94a9a32795'>心跳</h3>
<p>为了保持连接有效且稳定，建议您进行以下操作：</p>

<ol>
<li><p>每次接收到消息后，用户设置一个定时器，定时N秒，N小于30。</p></li>
<li><p>如果定时器被触发（N秒内没有收到新消息），发送字符串&#39;ping&#39;。</p></li>
<li><p>期待一个文字字符串&#39;pong&#39;作为回应。如果在N秒内未收到，请发出错误或重新连接。</p></li>
</ol>

<blockquote>
<p>心跳返回</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"pong"</span><span class="p">:</span><span class="w"> </span><span class="mi">15359750</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='demo'>Demo</h3>
<p><a href="https://github.com/exchange2021/openapidemo/blob/master/src/main/java/com/ws/WsTest.java">Websocket Demo</a></p>
<h2 id='5fc78ab0c4'>订阅/取消订阅参数</h2>
<table><thead>
<tr>
<th style="text-align: left">event</th>
<th style="text-align: left">channel</th>
<th style="text-align: left">description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">sub</td>
<td style="text-align: left"><code>market_$symbol_depth_step0</code></td>
<td style="text-align: left"><code>订阅深度</code></td>
</tr>
<tr>
<td style="text-align: left">unsub</td>
<td style="text-align: left"><code>market_$symbol_depth_step0</code></td>
<td style="text-align: left"><code>取消订阅深度</code></td>
</tr>
<tr>
<td style="text-align: left">sub</td>
<td style="text-align: left"><code>market_$symbol_trade_ticker</code></td>
<td style="text-align: left"><code>订阅实时成交</code></td>
</tr>
<tr>
<td style="text-align: left">unsub</td>
<td style="text-align: left"><code>market_$symbol_trade_ticker</code></td>
<td style="text-align: left"><code>取消订阅实时成交</code></td>
</tr>
<tr>
<td style="text-align: left">sub</td>
<td style="text-align: left"><code>market_$symbol_ticker</code></td>
<td style="text-align: left"><code>订阅24h行情数据</code></td>
</tr>
<tr>
<td style="text-align: left">unsub</td>
<td style="text-align: left"><code>market_$symbol_ticker</code></td>
<td style="text-align: left"><code>取消订阅24h行情数据</code></td>
</tr>
<tr>
<td style="text-align: left">sub</td>
<td style="text-align: left"><code>market_$symbol_kline_1min</code></td>
<td style="text-align: left"><code>订阅1min实时K线信息</code></td>
</tr>
<tr>
<td style="text-align: left">req</td>
<td style="text-align: left"><code>market_$symbol_kline_1month</code></td>
<td style="text-align: left"><code>请求1month历史K线记录</code></td>
</tr>
</tbody></table>
<h2 id='5319af762d'>订阅</h2><h3 id='00a0f1327d'>订阅全量深度</h3>
<blockquote>
<p>订阅示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market_$symbol_depth_step0"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">$symbol</span><span class="w"> </span><span class="err">E.g.</span><span class="w"> </span><span class="err">币币：btcusdt</span><span class="w"> </span><span class="err">合约：e_btcusdt</span><span class="w">
        </span><span class="nl">"cb_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">业务id非必填</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market_btcusdt_depth_step0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1506584998239</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tick"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"asks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">//卖盘</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="mf">10000.19</span><span class="p">,</span><span class="w">
                </span><span class="mf">0.93</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="mf">10001.21</span><span class="p">,</span><span class="w">
                </span><span class="mf">0.2</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="mf">10002.22</span><span class="p">,</span><span class="w">
                </span><span class="mf">0.34</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"bids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">//买盘</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="mf">9999.53</span><span class="p">,</span><span class="w">
                </span><span class="mf">0.93</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="mf">9998.2</span><span class="p">,</span><span class="w">
                </span><span class="mf">0.2</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="mf">9997.19</span><span class="p">,</span><span class="w">
                </span><span class="mf">0.21</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='6c81f8d216'>订阅实时成交</h3>
<blockquote>
<p>订阅示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market_$symbol_trade_ticker"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">$symbol</span><span class="w"> </span><span class="err">E.g.</span><span class="w"> </span><span class="err">币币:</span><span class="w"> </span><span class="err">btcusdt，合约:</span><span class="w"> </span><span class="err">e_btcusdt</span><span class="w">
        </span><span class="nl">"cb_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">业务id非必填</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market_$symbol_trade_ticker"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1506584998239</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">请求时间</span><span class="w">
    </span><span class="nl">"tick"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12121</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">data中最大交易ID</span><span class="w">
        </span><span class="nl">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1506584998239</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">data中最大时间</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">买卖方向buy，sell</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">32.233</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">单价</span><span class="w">
                </span><span class="nl">"vol"</span><span class="p">:</span><span class="w"> </span><span class="mi">232</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">数量</span><span class="w">
                </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">323</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">总额</span><span class="w">
                </span><span class="nl">"ds"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-09-1023: 12: 21"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='k-4'>订阅K线行情</h3>
<blockquote>
<p>订阅示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market_$symbol_kline_[1min/5min/15min/30min/60min/1day/1week/1month]"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">$symbol</span><span class="w"> </span><span class="err">E.g.</span><span class="w"> </span><span class="err">btcusdt</span><span class="w">
        </span><span class="nl">"cb_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">业务id非必填</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market_$symbol_kline_1min"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="mi">1</span><span class="err">min代表</span><span class="mi">1</span><span class="err">分钟K线</span><span class="w">
    </span><span class="nl">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1506584998239</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">请求时间</span><span class="w">
    </span><span class="nl">"tick"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1506602880</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">时间刻度起始值</span><span class="w">
        </span><span class="nl">"vol"</span><span class="p">:</span><span class="w"> </span><span class="mf">1212.12211</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">交易量</span><span class="w">
        </span><span class="nl">"open"</span><span class="p">:</span><span class="w"> </span><span class="mf">2233.22</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">开盘价</span><span class="w">
        </span><span class="nl">"close"</span><span class="p">:</span><span class="w"> </span><span class="mf">1221.11</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">收盘价</span><span class="w">
        </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="mf">22322.22</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">最高价</span><span class="w">
        </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="mf">2321.22</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">最低价</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='24h-ticker'>订阅24h行情Ticker</h3>
<blockquote>
<p>订阅示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market_$symbol_ticker"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">$symbol</span><span class="w"> </span><span class="err">E.g.</span><span class="w"> </span><span class="err">币币：btcusdt</span><span class="w"> </span><span class="err">合约：e_btcusdt</span><span class="w">
        </span><span class="nl">"cb_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">业务id非必填</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market_$symbol_ticker"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1506584998239</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">请求时间</span><span class="w">
    </span><span class="nl">"tick"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">123.1221</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">交易额</span><span class="w">
        </span><span class="nl">"vol"</span><span class="p">:</span><span class="w"> </span><span class="mf">1212.12211</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">交易量</span><span class="w">
        </span><span class="nl">"open"</span><span class="p">:</span><span class="w"> </span><span class="mf">2233.22</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">开盘价</span><span class="w">
        </span><span class="nl">"close"</span><span class="p">:</span><span class="w"> </span><span class="mf">1221.11</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">收盘价</span><span class="w">
        </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="mf">22322.22</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">最高价</span><span class="w">
        </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="mf">2321.22</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">最低价</span><span class="w">
        </span><span class="nl">"rose"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.2922</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">涨幅</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='k-5'>请求K线历史数据</h3>
<blockquote>
<p>订阅示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"req"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market_$symbol_kline_[1min/5min/15min/30min/60min/1day/1week/1month]"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"cb_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"endIdx"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1506602880"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">返回endIdx前pageSize条数据</span><span class="w"> </span><span class="err">非必填</span><span class="w">
        </span><span class="nl">"pageSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">非必填</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"event_rep"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rep"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market_$symbol_kline_5min"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cb_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"原路返回"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1506584998239</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">请求时间</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">最多</span><span class="mi">300</span><span class="err">条</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1506602880</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">时间刻度起始值</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">123.1221</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">交易额</span><span class="w">
            </span><span class="nl">"vol"</span><span class="p">:</span><span class="w"> </span><span class="mf">1212.12211</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">交易量</span><span class="w">
            </span><span class="nl">"open"</span><span class="p">:</span><span class="w"> </span><span class="mf">2233.22</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">开盘价</span><span class="w">
            </span><span class="nl">"close"</span><span class="p">:</span><span class="w"> </span><span class="mf">1221.11</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">收盘价</span><span class="w">
            </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="mf">22322.22</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">最高价</span><span class="w">
            </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="mf">2321.22</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">最低价</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1506602880</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">时间刻度起始值</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">123.1221</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">交易额</span><span class="w">
            </span><span class="nl">"vol"</span><span class="p">:</span><span class="w"> </span><span class="mf">1212.12211</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">交易量</span><span class="w">
            </span><span class="nl">"open"</span><span class="p">:</span><span class="w"> </span><span class="mf">2233.22</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">开盘价</span><span class="w">
            </span><span class="nl">"close"</span><span class="p">:</span><span class="w"> </span><span class="mf">1221.11</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">收盘价</span><span class="w">
            </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="mf">22322.22</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">最高价</span><span class="w">
            </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="mf">2321.22</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">最低价</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='3cf0f7e533'>请求成交记录</h3>
<blockquote>
<p>请求示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"req"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market_$symbol_trade_ticker"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">$symbol</span><span class="w"> </span><span class="err">E.g.</span><span class="w"> </span><span class="err">币币：btcusdt</span><span class="w"> </span><span class="err">合约：e_btcusdt</span><span class="w">
        </span><span class="nl">"cb_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">业务id非必填</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>返回示例</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"event_rep"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rep"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market_$symbol_trade_ticker"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cb_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"原路返回"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1506584998239</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">买卖方向buy，sell</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">32.233</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">单价</span><span class="w">
            </span><span class="nl">"vol"</span><span class="p">:</span><span class="w"> </span><span class="mi">232</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">数量</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">323</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">总额</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">买卖方向buy，sell</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">32.233</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">单价</span><span class="w">
            </span><span class="nl">"vol"</span><span class="p">:</span><span class="w"> </span><span class="mi">232</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">数量</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">323</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">总额</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h1 id='sdk'>SDK开发库</h1><h2 id='java'>Java</h2>
<p><a href="https://github.com/exchange2021/openApi-java-demo/tree/master/src/main/java/com">JAVA Demo</a></p>
<h1 id='0adb1147b3'>常见问题</h1><h2 id='timestamp'>请求接口的timestamp参数和到达服务器时间最大差值是多少？</h2>
<p>服务器收到请求时会判断请求中的时间戳，如果是5000毫秒之前发出的，则请求会被认为无效。这个时间窗口值可以通过发送可选参数<code>recvWindow</code>来自定义。</p>
<h2 id='quot-x-ch-ts-quot'>请求头&quot;X-CH-TS&quot;不能为空，如何解决？</h2>
<p>首先建议用户打印一下<code>X-CH-TS</code>，出现异常时检查<code>X-CH-TS</code>是否为空，另外建议用户对代码优化，每次请求前先判断<code>X-CH-TS</code>是否为空。</p>
<h2 id='57968bc36e'>为什么签名认证总返回无效的签名？</h2>
<p>可以打印出请求头信息和签名前字符串，重点有以下几点：</p>

<ul>
<li>将您的请求头和下面的请求头示例一一对比</li>
</ul>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="err">请求头示例：</span><span class="w">

</span><span class="err">Content-Type:</span><span class="w"> </span><span class="err">application/json</span><span class="w">

</span><span class="err">X-CH-APIKEY:</span><span class="w"> </span><span class="mi">44</span><span class="err">c</span><span class="mi">541</span><span class="err">a</span><span class="mi">1</span><span class="err">-****-****-****</span><span class="mi">-10</span><span class="err">fe</span><span class="mi">390</span><span class="err">df</span><span class="mi">2</span><span class="w">

</span><span class="err">X-CH-SIGN:</span><span class="w"> </span><span class="err">ssseLeefrffraoEQ</span><span class="mi">3</span><span class="err">yI</span><span class="mi">9</span><span class="err">qEtI</span><span class="mi">1</span><span class="err">CZ</span><span class="mi">82</span><span class="err">ikZ</span><span class="mi">4</span><span class="err">xSG</span><span class="mi">5</span><span class="err">Kj</span><span class="mi">8</span><span class="err">gnl</span><span class="mi">3</span><span class="err">uw=</span><span class="w">

</span><span class="err">X-CH-TS:</span><span class="w"> </span><span class="mi">1574327555669</span><span class="w">
</span></code></pre></div>
<ul>
<li><p>是否在程序中正确的配置了API-key。</p></li>
<li><p>签名前字符串是否符合标准格式，所有要素的顺序要保持一致。可以复制如下示例跟您的签名前字符串进行比对：</p></li>
</ul>

<blockquote>
<p>GET示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">1588591856950GET/sapi/v1/account
</span></code></pre></div>
<blockquote>
<p>POST示例</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">1588591856950POST/sapi/v1/order/test{"symbol":"BTCUSDT","price":"9300","volume":"1","side":"BUY","type":"LIMIT"}
</span></code></pre></div><h2 id='illegal_content_type-1017'>调用接口提示ILLEGAL_CONTENT_TYPE(-1017)，是什么原因？</h2>
<p>我们建议在所有的请求头附加<code>Content-Type</code>，并设置成<code>&#39;application/json&#39;</code>。</p>
<h2 id='api-2'>API每秒调用频率有限制吗？</h2>
<p>有限制，具体可以看下文档中每个接口的访问频率限制。</p>
<h2 id='api-3'>API的访问频率是根据什么限制的？</h2>
<p>个人数据是根据<strong>API-key</strong>限制的，公共数据是根据<strong>ip</strong>限制，需要注意的是，若用户请求公共数据时传入有效的个人信息就根据<strong>API-key</strong>限制。</p>
<h2 id='http-429'>HTTP状态码429是怎样造成的？</h2>
<p>请求接口超过访问频率限制，建议降低访问频率。</p>
<h2 id='api-ip'>API调用接口报超过访问频率会被封IP吗？封多久？</h2>
<p>通常情况下不会的，降低访问频率就可以。</p>
<h2 id='websocker'>为什么WebSocker出现了断开连接？</h2>
<ul>
<li>  未添加心跳，WebSocket连接需客户端需要回pong，保证连接的稳定。</li>
<li>  网络原因造成客户端发送的pong消息，但服务端并未接收到，或其他网络原因也会导致自动断开连接。</li>
<li>  建议用户做好WebSocket断开重连机制，在确保心跳（ping/pong）连接意外断开时，程序能够自动重新进行连接。</li>
</ul>
<h2 id='time-out'>用户请求接口报错Time Out？</h2>
<p>网络无法连接服务器，建议您检查下网络是否通畅。</p>
<h2 id='0a7de45921'>如何拿到平台所有的币对</h2>
<p>现货交易中的<code>/sapi/v1/symbols</code>接口可以拿到。</p>
<h2 id='a728c422ac'>批量下单/撤单有条数限制吗？</h2>
<p>是的。批量接口会限制10条订单。</p>
<h2 id='newclientorderid'>newClientOrderId是什么, 有什么作用?</h2>
<ul>
<li>newClientOrderId是您自定义的订单号，可以用来标识您的一笔订单，当下单完成后，可以使用newClientOrderId并调用<code>订单信息</code>接口，查看订单状态。</li>
<li>用户需要自己保证此ID不重复，我方不会进行重复检测，如有重复，撤单和查询订单时只能撤销或者查询其中最新的一条数据。</li>
</ul>
<h2 id='6b6191e1e7'>如何获取最新成交价格？</h2>
<p>可以通过获取Ticker信息，返回结果中的last就是最新成交价。</p>
<h2 id='ticker-24'>Ticker接口中的24小时成交量会出现负增长吗？</h2>
<p>会的。因为24小时成交量，为24小时滚动数据（平移窗口大小24小时），有可能会出现后一个窗口内的累计成交量、累计成交额小于前一窗口的情况。</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="http">HTTP</a>
                <a href="#" data-language-name="shell">SHELL</a>
                <a href="#" data-language-name="java">JAVA</a>
                <a href="#" data-language-name="go">GO</a>
                <a href="#" data-language-name="python">PYTHON</a>
                <a href="#" data-language-name="php">PHP</a>
                <a href="#" data-language-name="javascript--node">Node.js</a>
          </div>
      </div>
    </div>
  </body>
</html>
